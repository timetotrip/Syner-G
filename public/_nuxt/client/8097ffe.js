/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{0:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return h})),n.d(e,"d",(function(){return l})),n.d(e,"h",(function(){return f})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return v})),n.d(e,"g",(function(){return y}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function h(t,e,n,r){return new(n||(n=Promise))((function(o,c){function h(t){try{f(r.next(t))}catch(t){c(t)}}function l(t){try{f(r.throw(t))}catch(t){c(t)}}function f(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(h,l)}f((r=r.apply(t,e||[])).next())}))}function l(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(h){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,h])}}}function f(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function v(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(d(arguments[i]));return t}function y(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}},1:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return E})),n.d(e,"b",(function(){return M})),n.d(e,"c",(function(){return L})),n.d(e,"d",(function(){return J})),n.d(e,"e",(function(){return D})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return f})),n.d(e,"h",(function(){return v})),n.d(e,"i",(function(){return y})),n.d(e,"j",(function(){return at})),n.d(e,"k",(function(){return W})),n.d(e,"l",(function(){return X})),n.d(e,"m",(function(){return _})),n.d(e,"n",(function(){return w})),n.d(e,"o",(function(){return et})),n.d(e,"p",(function(){return I})),n.d(e,"q",(function(){return z})),n.d(e,"r",(function(){return S})),n.d(e,"s",(function(){return C})),n.d(e,"t",(function(){return k})),n.d(e,"u",(function(){return Q})),n.d(e,"v",(function(){return A})),n.d(e,"w",(function(){return x})),n.d(e,"x",(function(){return T})),n.d(e,"y",(function(){return O})),n.d(e,"z",(function(){return P})),n.d(e,"A",(function(){return N})),n.d(e,"B",(function(){return j})),n.d(e,"C",(function(){return K})),n.d(e,"D",(function(){return V})),n.d(e,"E",(function(){return map})),n.d(e,"F",(function(){return Y})),n.d(e,"G",(function(){return G})),n.d(e,"H",(function(){return st})),n.d(e,"I",(function(){return ot})),n.d(e,"J",(function(){return B})),n.d(e,"K",(function(){return tt})),n.d(e,"L",(function(){return nt})),n.d(e,"M",(function(){return it})),n.d(e,"N",(function(){return R}));var r=n(0),o=!1,c=!1,h="${JSCORE_VERSION}",l=function(t,e){if(!t)throw f(e)},f=function(t){return new Error("Firebase Database ("+h+") INTERNAL ASSERT FAILED: "+t)},d=function(t){for(var e=[],p=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e[p++]=n:n<2048?(e[p++]=n>>6|192,e[p++]=63&n|128):55296==(64512&n)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++i)),e[p++]=n>>18|240,e[p++]=n>>12&63|128,e[p++]=n>>6&63|128,e[p++]=63&n|128):(e[p++]=n>>12|224,e[p++]=n>>6&63|128,e[p++]=63&n|128)}return e},v={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(input,t){if(!Array.isArray(input))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,output=[],i=0;i<input.length;i+=3){var n=input[i],r=i+1<input.length,o=r?input[i+1]:0,c=i+2<input.length,h=c?input[i+2]:0,l=n>>2,f=(3&n)<<4|o>>4,d=(15&o)<<2|h>>6,v=63&h;c||(v=64,r||(d=64)),output.push(e[l],e[f],e[d],e[v])}return output.join("")},encodeString:function(input,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(input):this.encodeByteArray(d(input),t)},decodeString:function(input,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(input):function(t){for(var e=[],n=0,r=0;n<t.length;){var o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){var c=t[n++];e[r++]=String.fromCharCode((31&o)<<6|63&c)}else if(o>239&&o<365){var u=((7&o)<<18|(63&(c=t[n++]))<<12|(63&(h=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{c=t[n++];var h=t[n++];e[r++]=String.fromCharCode((15&o)<<12|(63&c)<<6|63&h)}}return e.join("")}(this.decodeStringToByteArray(input,t))},decodeStringToByteArray:function(input,t){this.init_();for(var e=t?this.charToByteMapWebSafe_:this.charToByteMap_,output=[],i=0;i<input.length;){var n=e[input.charAt(i++)],r=i<input.length?e[input.charAt(i)]:0,o=++i<input.length?e[input.charAt(i)]:64,c=++i<input.length?e[input.charAt(i)]:64;if(++i,null==n||null==r||null==o||null==c)throw Error();var h=n<<2|r>>4;if(output.push(h),64!==o){var l=r<<4&240|o>>2;if(output.push(l),64!==c){var f=o<<6&192|c;output.push(f)}}}return output},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},y=function(t){var e=d(t);return v.encodeByteArray(e,!0)},m=function(t){try{return v.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function _(t){return w(void 0,t)}function w(t,source){if(!(source instanceof Object))return source;switch(source.constructor){case Date:return new Date(source.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return source}for(var e in source)source.hasOwnProperty(e)&&"__proto__"!==e&&(t[e]=w(t[e],source[e]));return t}var E=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function I(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function T(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(I())}function O(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}}function S(){return"object"==typeof self&&self.self===self}function C(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function N(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function k(){return I().indexOf("Electron/")>=0}function A(){var t=I();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function j(){return I().indexOf("MSAppHost/")>=0}function P(){return!0===o||!0===c}function x(){return"indexedDB"in self&&null!=indexedDB}function R(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",o=window.indexedDB.open(r);o.onsuccess=function(){o.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=function(){n=!1},o.onerror=function(){var t;e((null===(t=o.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function D(){return!(!navigator||!navigator.cookieEnabled)}var L=function(t){function e(code,n,r){var o=t.call(this,n)||this;return o.code=code,o.customData=r,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,M.prototype.create),o}return Object(r.c)(e,t),e}(Error),M=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(code){for(var data=[],t=1;t<arguments.length;t++)data[t-1]=arguments[t];var e=data[0]||{},n=this.service+"/"+code,template=this.errors[code],r=template?F(template,e):"Error",o=this.serviceName+": "+r+" ("+n+").",c=new L(n,o,e);return c},t}();function F(template,data){return template.replace(U,(function(t,e){var n=data[e];return null!=n?String(n):"<"+e+"?>"}))}var U=/\{\$([^}]+)}/g;function V(t){return JSON.parse(t)}function B(data){return JSON.stringify(data)}var H=function(t){var header={},e={},data={},n="";try{var r=t.split(".");header=V(m(r[0])||""),e=V(m(r[1])||""),n=r[2],data=e.d||{},delete e.d}catch(t){}return{header:header,claims:e,data:data,signature:n}},K=function(t){var e=H(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},z=function(t){var e=H(t).claims;return"object"==typeof e&&!0===e.admin};function W(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function G(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Q(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function map(t,e,n){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=e.call(n,t[o],o,t));return r}function Y(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,o=Object.entries(t);r<o.length;r++){var c=o[r];n(c[0],c[1])}return e.length?"&"+e.join("&"):""}var J=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var i=1;i<this.blockSize;++i)this.pad_[i]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var o,c,a=this.chain_[0],b=this.chain_[1],h=this.chain_[2],l=this.chain_[3],f=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=l^b&(h^l),c=1518500249):(o=b^h^l,c=1859775393):i<60?(o=b&h|l&(b|h),c=2400959708):(o=b^h^l,c=3395469782);r=(a<<5|a>>>27)+o+f+c+n[i]&4294967295;f=l,l=h,h=4294967295&(b<<30|b>>>2),b=a,a=r}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+b&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,o=this.buf_,c=this.inbuf_;r<e;){if(0===c)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(o[c]=t.charCodeAt(r),++r,++c===this.blockSize){this.compress_(o),c=0;break}}else for(;r<e;)if(o[c]=t[r],++r,++c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&e,e/=256;this.compress_(this.buf_);var n=0;for(i=0;i<5;i++)for(var r=24;r>=0;r-=8)t[n]=this.chain_[i]>>r&255,++n;return t},t}();function X(t,e){var n=new $(t,e);return n.subscribe.bind(n)}var $=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var o=r[n];if(o in t&&"function"==typeof t[o])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Z),void 0===r.error&&(r.error=Z),void 0===r.complete&&(r.complete=Z);var c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(t){}})),this.observers.push(r),c},t.prototype.unsubscribeOne=function(i){void 0!==this.observers&&void 0!==this.observers[i]&&(delete this.observers[i],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var i=0;i<this.observers.length;i++)this.sendOne(i,t)},t.prototype.sendOne=function(i,t){var e=this;this.task.then((function(){if(void 0!==e.observers&&void 0!==e.observers[i])try{t(e.observers[i])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Z(){}var tt=function(t,e,n,r){var o;if(r<e?o="at least "+e:r>n&&(o=0===n?"none":"no more than "+n),o)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".")};function et(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=t+" failed: ";return o+=r+" argument "}function nt(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(et(t,e,r)+"must be a valid function.")}function it(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(et(t,e,r)+"must be a valid context object.")}var ot=function(t){for(var e=[],p=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);if(n>=55296&&n<=56319){var r=n-55296;i++,l(i<t.length,"Surrogate pair missing trail surrogate."),n=65536+(r<<10)+(t.charCodeAt(i)-56320)}n<128?e[p++]=n:n<2048?(e[p++]=n>>6|192,e[p++]=63&n|128):n<65536?(e[p++]=n>>12|224,e[p++]=n>>6&63|128,e[p++]=63&n|128):(e[p++]=n>>18|240,e[p++]=n>>12&63|128,e[p++]=n>>6&63|128,e[p++]=63&n|128)}return e},st=function(t){for(var p=0,i=0;i<t.length;i++){var e=t.charCodeAt(i);e<128?p++:e<2048?p+=2:e>=55296&&e<=56319?(p+=4,i++):p+=3}return p};function at(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),o=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+o)}}).call(this,n(18))},111:function(t,e,n){"use strict";var r={name:"ClientOnly",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,c=r(),h=c.default;void 0===h&&(h=[]);var l=c.placeholder;return n._isMounted?h:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||l)?t(o.placeholderTag,{class:["client-only-placeholder"]},o.placeholder||l):h.length>0?h.map((function(){return t(!1)})):t(!1))}};t.exports=r},13:function(t,e,n){"use strict";function r(t,e,n,r,o,c,h){try{var l=t[c](h),f=l.value}catch(t){return void n(t)}l.done?e(f):Promise.resolve(f).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,c){var h=t.apply(e,n);function l(t){r(h,o,c,l,f,"next",t)}function f(t){r(h,o,c,l,f,"throw",t)}l(void 0)}))}}n.d(e,"a",(function(){return o}))},14:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return cr})),n.d(e,"b",(function(){return fr})),n.d(e,"c",(function(){return lr})),n.d(e,"d",(function(){return pr})),n.d(e,"e",(function(){return dr})),n.d(e,"f",(function(){return vr})),n.d(e,"g",(function(){return ar})),n.d(e,"h",(function(){return ur}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])})(t,b)};function o(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},l=l||{},f=h||self;function d(){}function v(a){var b=typeof a;return"array"==(b="object"!=b?b:a?Array.isArray(a)?"array":b:"null")||"object"==b&&"number"==typeof a.length}function y(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var m="closure_uid_"+(1e9*Math.random()>>>0),_=0;function w(a,b,t){return a.call.apply(a.bind,arguments)}function E(a,b,t){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,e),a.apply(b,t)}}return function(){return a.apply(b,arguments)}}function p(a,b,t){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:E).apply(null,arguments)}function I(a,b){var t=Array.prototype.slice.call(arguments,1);return function(){var e=t.slice();return e.push.apply(e,arguments),a.apply(this,e)}}function q(){return Date.now()}function T(a,b){function t(){}t.prototype=b.prototype,a.X=b.prototype,a.prototype=new t,a.prototype.constructor=a,a.Kb=function(t,e,n){for(var g=Array(arguments.length-2),r=2;r<arguments.length;r++)g[r-2]=arguments[r];return b.prototype[e].apply(t,g)}}function O(){this.j=this.j,this.i=this.i}O.prototype.j=!1,O.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(a){Object.prototype.hasOwnProperty.call(a,m)&&a[m]||(a[m]=++_)})(this)},O.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var S=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"==typeof a)return"string"!=typeof b||1!=b.length?-1:a.indexOf(b,0);for(var t=0;t<a.length;t++)if(t in a&&a[t]===b)return t;return-1},C=Array.prototype.forEach?function(a,b,t){Array.prototype.forEach.call(a,b,t)}:function(a,b,t){for(var e=a.length,n="string"==typeof a?a.split(""):a,r=0;r<e;r++)r in n&&b.call(t,n[r],r,a)};function N(a){return Array.prototype.concat.apply([],arguments)}function k(a){var b=a.length;if(0<b){for(var t=Array(b),e=0;e<b;e++)t[e]=a[e];return t}return[]}function A(a){return/^[\s\xa0]*$/.test(a)}var j,P=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function x(a,b){return-1!=a.indexOf(b)}function R(a,b){return a<b?-1:a>b?1:0}t:{var D=f.navigator;if(D){var L=D.userAgent;if(L){j=L;break t}}j=""}function M(a,b,t){for(var e in a)b.call(t,a[e],e,a)}function F(a){var b={};for(var t in a)b[t]=a[t];return b}var U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(a,b){for(var t,e,n=1;n<arguments.length;n++){for(t in e=arguments[n])a[t]=e[t];for(var r=0;r<U.length;r++)t=U[r],Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}}function B(a){return B[" "](a),a}B[" "]=d;var H,a,K=x(j,"Opera"),z=x(j,"Trident")||x(j,"MSIE"),W=x(j,"Edge"),G=W||z,Q=x(j,"Gecko")&&!(x(j.toLowerCase(),"webkit")&&!x(j,"Edge"))&&!(x(j,"Trident")||x(j,"MSIE"))&&!x(j,"Edge"),Y=x(j.toLowerCase(),"webkit")&&!x(j,"Edge");function J(){var a=f.document;return a?a.documentMode:void 0}t:{var X="",$=(a=j,Q?/rv:([^\);]+)(\)|;)/.exec(a):W?/Edge\/([\d\.]+)/.exec(a):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):Y?/WebKit\/(\S+)/.exec(a):K?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if($&&(X=$?$[1]:""),z){var Z=J();if(null!=Z&&Z>parseFloat(X)){H=String(Z);break t}}H=X}var tt,et={};function nt(a){return function(a,b){var t=et;return Object.prototype.hasOwnProperty.call(t,a)?t[a]:t[a]=b(a)}(a,(function(){for(var b=0,t=P(String(H)).split("."),e=P(String(a)).split("."),g=Math.max(t.length,e.length),n=0;0==b&&n<g;n++){var r=t[n]||"",o=e[n]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==r[0].length&&0==o[0].length)break;b=R(0==r[1].length?0:parseInt(r[1],10),0==o[1].length?0:parseInt(o[1],10))||R(0==r[2].length,0==o[2].length)||R(r[2],o[2]),r=r[3],o=o[3]}while(0==b)}return 0<=b}))}if(f.document&&z){var it=J();tt=it||(parseInt(H,10)||void 0)}else tt=void 0;var ot=tt,st=!z||9<=Number(ot),at=z&&!nt("9"),ut=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{f.addEventListener("test",d,b),f.removeEventListener("test",d,b)}catch(t){}return a}();function ct(a,b){this.type=a,this.a=this.target=b,this.defaultPrevented=!1}function ht(a,b){if(ct.call(this,a?a.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,a){var t=this.type=a.type,e=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.a=b,b=a.relatedTarget){if(Q){t:{try{B(b.nodeName);var n=!0;break t}catch(t){}n=!1}n||(b=null)}}else"mouseover"==t?b=a.fromElement:"mouseout"==t&&(b=a.toElement);this.relatedTarget=b,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:lt[a.pointerType]||"",this.c=a,a.defaultPrevented&&this.b()}}ct.prototype.b=function(){this.defaultPrevented=!0},T(ht,ct);var lt={2:"touch",3:"pen",4:"mouse"};ht.prototype.b=function(){ht.X.b.call(this);var a=this.c;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,at)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(t){}};var ft="closure_listenable_"+(1e6*Math.random()|0),pt=0;function vt(a,b,t,e,n){this.listener=a,this.proxy=null,this.src=b,this.type=t,this.capture=!!e,this.ca=n,this.key=++pt,this.Y=this.Z=!1}function gt(a){a.Y=!0,a.listener=null,a.proxy=null,a.src=null,a.ca=null}function yt(a){this.src=a,this.a={},this.b=0}function mt(a,b){var t=b.type;if(t in a.a){var e,n=a.a[t],r=S(n,b);(e=0<=r)&&Array.prototype.splice.call(n,r,1),e&&(gt(b),0==a.a[t].length&&(delete a.a[t],a.b--))}}function bt(a,b,t,e){for(var n=0;n<a.length;++n){var r=a[n];if(!r.Y&&r.listener==b&&r.capture==!!t&&r.ca==e)return n}return-1}yt.prototype.add=function(a,b,t,e,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var g=bt(a,b,e,n);return-1<g?(b=a[g],t||(b.Z=!1)):((b=new vt(b,this.src,r,!!e,n)).Z=t,a.push(b)),b};var _t="closure_lm_"+(1e6*Math.random()|0),wt={};function Et(a,b,t,e,n){if(e&&e.once)return function t(a,b,e,n,r){if(Array.isArray(b)){for(var o=0;o<b.length;o++)t(a,b[o],e,n,r);return null}return e=At(e),a&&a[ft]?a.wa(b,e,y(n)?!!n.capture:!!n,r):It(a,b,e,!0,n,r)}(a,b,t,e,n);if(Array.isArray(b)){for(var r=0;r<b.length;r++)Et(a,b[r],t,e,n);return null}return t=At(t),a&&a[ft]?a.va(b,t,y(e)?!!e.capture:!!e,n):It(a,b,t,!1,e,n)}function It(a,b,t,e,n,r){if(!b)throw Error("Invalid event type");var g=y(n)?!!n.capture:!!n;if(g&&!st)return null;var o=Nt(a);if(o||(a[_t]=o=new yt(a)),(t=o.add(b,t,e,g,r)).proxy)return t;if(e=function(){var a=Ct,b=st?function(t){return a.call(b.src,b.listener,t)}:function(t){if(!(t=a.call(b.src,b.listener,t)))return t};return b}(),t.proxy=e,e.src=a,e.listener=t,a.addEventListener)ut||(n=g),void 0===n&&(n=!1),a.addEventListener(b.toString(),e,n);else if(a.attachEvent)a.attachEvent(Ot(b.toString()),e);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(e)}return t}function Tt(a){if("number"!=typeof a&&a&&!a.Y){var b=a.src;if(b&&b[ft])mt(b.c,a);else{var t=a.type,e=a.proxy;b.removeEventListener?b.removeEventListener(t,e,a.capture):b.detachEvent?b.detachEvent(Ot(t),e):b.addListener&&b.removeListener&&b.removeListener(e),(t=Nt(b))?(mt(t,a),0==t.b&&(t.src=null,b[_t]=null)):gt(a)}}}function Ot(a){return a in wt?wt[a]:wt[a]="on"+a}function St(a,b){var t=a.listener,e=a.ca||a.src;return a.Z&&Tt(a),t.call(e,b)}function Ct(a,b){if(a.Y)return!0;if(!st){if(!b)t:{b=["window","event"];for(var t=f,e=0;e<b.length;e++)if(null==(t=t[b[e]])){b=null;break t}b=t}return St(a,b=new ht(b,this))}return St(a,new ht(b,this))}function Nt(a){return(a=a[_t])instanceof yt?a:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function At(a){return"function"==typeof a?a:(a[kt]||(a[kt]=function(b){return a.handleEvent(b)}),a[kt])}function jt(){O.call(this),this.c=new yt(this),this.J=this,this.C=null}function Pt(a,b){var t,e=a.C;if(e)for(t=[];e;e=e.C)t.push(e);if(a=a.J,e=b.type||b,"string"==typeof b)b=new ct(b,a);else if(b instanceof ct)b.target=b.target||a;else{var n=b;V(b=new ct(e,a),n)}if(n=!0,t)for(var r=t.length-1;0<=r;r--){var g=b.a=t[r];n=xt(g,e,!0,b)&&n}if(n=xt(g=b.a=a,e,!0,b)&&n,n=xt(g,e,!1,b)&&n,t)for(r=0;r<t.length;r++)n=xt(g=b.a=t[r],e,!1,b)&&n}function xt(a,b,t,e){if(!(b=a.c.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var g=b[r];if(g&&!g.Y&&g.capture==t){var o=g.listener,c=g.ca||g.src;g.Z&&mt(a.c,g),n=!1!==o.call(c,e)&&n}}return n&&!e.defaultPrevented}T(jt,O),jt.prototype[ft]=!0,(c=jt.prototype).addEventListener=function(a,b,t,e){Et(this,a,b,t,e)},c.removeEventListener=function(a,b,t,e){!function t(a,b,e,n,r){if(Array.isArray(b))for(var o=0;o<b.length;o++)t(a,b[o],e,n,r);else n=y(n)?!!n.capture:!!n,e=At(e),a&&a[ft]?(a=a.c,(b=String(b).toString())in a.a&&(-1<(e=bt(o=a.a[b],e,n,r))&&(gt(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete a.a[b],a.b--)))):a&&(a=Nt(a))&&(b=a.a[b.toString()],a=-1,b&&(a=bt(b,e,n,r)),(e=-1<a?b[a]:null)&&Tt(e))}(this,a,b,t,e)},c.G=function(){if(jt.X.G.call(this),this.c){var t,a=this.c;for(t in a.a){for(var e=a.a[t],n=0;n<e.length;n++)gt(e[n]);delete a.a[t],a.b--}}this.C=null},c.va=function(a,b,t,e){return this.c.add(String(a),b,!1,t,e)},c.wa=function(a,b,t,e){return this.c.add(String(a),b,!0,t,e)};var Rt=f.JSON.stringify;function Dt(){this.b=this.a=null}var Lt,Mt=new(function(){function t(a,b){this.c=a,this.f=b,this.b=0,this.a=null}return t.prototype.get=function(){var a;return 0<this.b?(this.b--,a=this.a,this.a=a.next,a.next=null):a=this.c(),a},t}())((function(){return new Ut}),(function(a){a.reset()}));function Ft(){var a=Ht,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function Ut(){this.next=this.b=this.a=null}function Vt(a){f.setTimeout((function(){throw a}),0)}function qt(a,b){Lt||function(){var a=f.Promise.resolve(void 0);Lt=function(){a.then(Kt)}}(),Bt||(Lt(),Bt=!0),Ht.add(a,b)}Dt.prototype.add=function(a,b){var t=Mt.get();t.set(a,b),this.b?this.b.next=t:this.a=t,this.b=t},Ut.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},Ut.prototype.reset=function(){this.next=this.b=this.a=null};var Bt=!1,Ht=new Dt;function Kt(){for(var a;a=Ft();){try{a.a.call(a.b)}catch(t){Vt(t)}var b=Mt;b.f(a),100>b.b&&(b.b++,a.next=b.a,b.a=a)}Bt=!1}function zt(a,b){jt.call(this),this.b=a||1,this.a=b||f,this.f=p(this.Za,this),this.g=q()}function Wt(a){a.aa=!1,a.M&&(a.a.clearTimeout(a.M),a.M=null)}function Gt(a,b,t){if("function"==typeof a)t&&(a=p(a,t));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=p(a.handleEvent,a)}return 2147483647<Number(b)?-1:f.setTimeout(a,b||0)}function Qt(a){a.a=Gt((function(){a.a=null,a.c&&(a.c=!1,Qt(a))}),a.h);var b=a.b;a.b=null,a.g.apply(null,b)}T(zt,jt),(c=zt.prototype).aa=!1,c.M=null,c.Za=function(){if(this.aa){var a=q()-this.g;0<a&&a<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-a):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Pt(this,"tick"),this.aa&&(Wt(this),this.start()))}},c.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=q())},c.G=function(){zt.X.G.call(this),Wt(this),delete this.a};var Yt=function(t){function e(a,b){var e=t.call(this)||this;return e.g=a,e.h=b,e.b=null,e.c=!1,e.a=null,e}return function(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}(e,t),e.prototype.f=function(a){this.b=arguments,this.a?this.c=!0:Qt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(f.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(O);function Jt(a){O.call(this),this.b=a,this.a={}}T(Jt,O);var Xt=[];function $t(a,b,t,e){Array.isArray(t)||(t&&(Xt[0]=t.toString()),t=Xt);for(var n=0;n<t.length;n++){var r=Et(b,t[n],e||a.handleEvent,!1,a.b||a);if(!r)break;a.a[r.key]=r}}function Zt(a){M(a.a,(function(b,t){this.a.hasOwnProperty(t)&&Tt(b)}),a),a.a={}}function te(){this.a=!0}function ee(a,b,t,e){a.info((function(){return"XMLHTTP TEXT ("+b+"): "+function(a,b){if(!a.a)return b;if(!b)return null;try{var t=JSON.parse(b);if(t)for(a=0;a<t.length;a++)if(Array.isArray(t[a])){var e=t[a];if(!(2>e.length)){var n=e[1];if(Array.isArray(n)&&!(1>n.length)){var r=n[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var g=1;g<n.length;g++)n[g]=""}}}return Rt(t)}catch(t){return b}}(a,t)+(e?" "+e:"")}))}Jt.prototype.G=function(){Jt.X.G.call(this),Zt(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},te.prototype.info=function(){};var ne={},re=null;function ie(){return re=re||new jt}function oe(a){ct.call(this,ne.Fa,a)}function se(a){var b=ie();Pt(b,new oe(b,a))}function ae(a,b){ct.call(this,ne.STAT_EVENT,a),this.stat=b}function ue(a){var b=ie();Pt(b,new ae(b,a))}function ce(a){ct.call(this,ne.Ga,a)}function he(a,b){if("function"!=typeof a)throw Error("Fn must not be null and must be a function");return f.setTimeout((function(){a()}),b)}ne.Fa="serverreachability",T(oe,ct),ne.STAT_EVENT="statevent",T(ae,ct),ne.Ga="timingevent",T(ce,ct);var le={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},fe={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function pe(){}function de(a){var b;return(b=a.a)||(b=a.a={}),b}function ve(){}pe.prototype.a=null;var ge,ye={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function me(){ct.call(this,"d")}function be(){ct.call(this,"c")}function _e(){}function we(a,b,t,e){this.g=a,this.c=b,this.f=t,this.S=e||1,this.J=new Jt(this),this.P=Ee,a=G?125:void 0,this.R=new zt(a),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}T(me,ct),T(be,ct),T(_e,pe),ge=new _e;var Ee=45e3,Ie={},Te={};function Oe(a,b,t){a.H=1,a.i=Ge(qe(b)),a.j=t,a.I=!0,Se(a,null)}function Se(a,b){a.u=q(),ke(a),a.l=qe(a.i);var t=a.l,e=a.S;Array.isArray(e)||(e=[String(e)]),sn(t.b,"t",e),a.D=0,a.a=Zn(a.g,a.g.C?b:null),0<a.O&&(a.F=new Yt(p(a.Ca,a,a.a),a.O)),$t(a.J,a.a,"readystatechange",a.Xa),b=a.B?F(a.B):{},a.j?(a.m||(a.m="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.a.ba(a.l,a.m,a.j,b)):(a.m="GET",a.a.ba(a.l,a.m,null,b)),se(1),function(a,b,t,e,n,r){a.info((function(){if(a.a)if(r)for(var g="",o=r.split("&"),c=0;c<o.length;c++){var u=o[c].split("=");if(1<u.length){var h=u[0];u=u[1];var l=h.split("_");g=2<=l.length&&"type"==l[1]?g+(h+"=")+u+"&":g+(h+"=redacted&")}}else g=null;else g=r;return"XMLHTTP REQ ("+e+") [attempt "+n+"]: "+b+"\n"+t+"\n"+g}))}(a.c,a.m,a.l,a.f,a.S,a.j)}function Ce(a,b,t){for(var e=!0;!a.A&&a.D<t.length;){var n=Ne(a,t);if(n==Te){4==b&&(a.h=4,ue(14),e=!1),ee(a.c,a.f,null,"[Incomplete Response]");break}if(n==Ie){a.h=4,ue(15),ee(a.c,a.f,t,"[Invalid Chunk]"),e=!1;break}ee(a.c,a.f,n,null),Re(a,n)}4==b&&0==t.length&&(a.h=1,ue(16),e=!1),a.b=a.b&&e,e?0<t.length&&!a.V&&(a.V=!0,(b=a.g).a==a&&b.U&&!b.F&&(b.c.info("Great, no buffering proxy detected. Bytes received: "+t.length),zn(b),b.F=!0,ue(11))):(ee(a.c,a.f,t,"[Invalid Chunked Response]"),xe(a),Pe(a))}function Ne(a,b){var t=a.D,e=b.indexOf("\n",t);return-1==e?Te:(t=Number(b.substring(t,e)),isNaN(t)?Ie:(e+=1)+t>b.length?Te:(b=b.substr(e,t),a.D=e+t,b))}function ke(a){a.T=q()+a.P,Ae(a,a.P)}function Ae(a,b){if(null!=a.o)throw Error("WatchDog timer not null");a.o=he(p(a.Va,a),b)}function je(a){a.o&&(f.clearTimeout(a.o),a.o=null)}function Pe(a){0==a.g.v||a.A||Qn(a.g,a)}function xe(a){je(a);var b=a.F;b&&"function"==typeof b.ja&&b.ja(),a.F=null,Wt(a.R),Zt(a.J),a.a&&(b=a.a,a.a=null,b.abort(),b.ja())}function Re(a,b){try{var t=a.g;if(0!=t.v&&(t.a==a||pn(t.b,a)))if(t.I=a.N,!a.C&&pn(t.b,a)&&3==t.v){try{var e=t.ka.a.parse(b)}catch(t){e=null}if(Array.isArray(e)&&3==e.length){var n=e;if(0==n[0]){t:if(!t.j){if(t.a){if(!(t.a.u+3e3<a.u))break t;Gn(t),Ln(t)}Kn(t),ue(18)}}else t.oa=n[1],0<t.oa-t.P&&37500>n[2]&&t.H&&0==t.o&&!t.m&&(t.m=he(p(t.Sa,t),6e3));if(1>=fn(t.b)&&t.ea){try{t.ea()}catch(t){}t.ea=void 0}}else Jn(t,11)}else if((a.C||t.a==a)&&Gn(t),!A(b))for(b=e=t.ka.a.parse(b),e=0;e<b.length;e++)if(n=b[e],t.P=n[0],n=n[1],2==t.v)if("c"==n[0]){t.J=n[1],t.ga=n[2];var r=n[3];null!=r&&(t.ha=r,t.c.info("VER="+t.ha));var g=n[4];null!=g&&(t.pa=g,t.c.info("SVER="+t.pa));var o=n[5];if(null!=o&&"number"==typeof o&&0<o){var c=1.5*o;t.D=c,t.c.info("backChannelRequestTimeoutMs_="+c)}c=t;var u=a.a;if(u){var h=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=c.b;!l.a&&(x(h,"spdy")||x(h,"quic")||x(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(dn(l,l.b),l.b=null))}if(c.A){var f=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(c.na=f,We(c.B,c.A,f))}}t.v=3,t.f&&t.f.ta(),t.U&&(t.N=q()-a.u,t.c.info("Handshake RTT: "+t.N+"ms"));var d=a;if((c=t).la=$n(c,c.C?c.ga:null,c.fa),d.C){vn(c.b,d);var v=d,y=c.D;y&&v.setTimeout(y),v.o&&(je(v),ke(v)),c.a=d}else Hn(c);0<t.g.length&&Un(t)}else"stop"!=n[0]&&"close"!=n[0]||Jn(t,7);else 3==t.v&&("stop"==n[0]||"close"==n[0]?"stop"==n[0]?Jn(t,7):Dn(t):"noop"!=n[0]&&t.f&&t.f.sa(n),t.o=0);se(4)}catch(t){}}function De(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(v(a)||"string"==typeof a)C(a,b,void 0);else{if(a.L&&"function"==typeof a.L)var t=a.L();else if(a.K&&"function"==typeof a.K)t=void 0;else if(v(a)||"string"==typeof a){t=[];for(var e=a.length,n=0;n<e;n++)t.push(n)}else for(n in t=[],e=0,a)t[e++]=n;n=(e=function(a){if(a.K&&"function"==typeof a.K)return a.K();if("string"==typeof a)return a.split("");if(v(a)){for(var b=[],t=a.length,e=0;e<t;e++)b.push(a[e]);return b}for(e in b=[],t=0,a)b[t++]=a[e];return b}(a)).length;for(var r=0;r<n;r++)b.call(void 0,e[r],t&&t[r],a)}}function Le(a,b){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var e=0;e<t;e+=2)this.set(arguments[e],arguments[e+1])}else if(a)if(a instanceof Le)for(t=a.L(),e=0;e<t.length;e++)this.set(t[e],a.get(t[e]));else for(e in a)this.set(e,a[e])}function Me(a){if(a.c!=a.a.length){for(var b=0,t=0;b<a.a.length;){var e=a.a[b];Fe(a.b,e)&&(a.a[t++]=e),b++}a.a.length=t}if(a.c!=a.a.length){var n={};for(t=b=0;b<a.a.length;)Fe(n,e=a.a[b])||(a.a[t++]=e,n[e]=1),b++;a.a.length=t}}function Fe(a,b){return Object.prototype.hasOwnProperty.call(a,b)}(c=we.prototype).setTimeout=function(a){this.P=a},c.Xa=function(a){a=a.target;var b=this.F;b&&3==jn(a)?b.f():this.Ca(a)},c.Ca=function(a){try{if(a==this.a)t:{var b=jn(this.a),t=this.a.ua(),e=this.a.W();if(!(3>b||3==b&&!G&&!this.a.$())){this.A||4!=b||7==t||se(8==t||0>=e?3:2),je(this);var n=this.a.W();this.N=n;var r=this.a.$();if(this.b=200==n,function(a,b,t,e,n,r,g){a.info((function(){return"XMLHTTP RESP ("+e+") [ attempt "+n+"]: "+b+"\n"+t+"\n"+r+" "+g}))}(this.c,this.m,this.l,this.f,this.S,b,n),this.b){if(this.U&&!this.C){e:{if(this.a){var g,o=this.a;if((g=o.a?o.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(g)){var c=g;break e}}c=null}if(!c){this.b=!1,this.h=3,ue(12),xe(this),Pe(this);break t}ee(this.c,this.f,c,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Re(this,c)}this.I?(Ce(this,b,r),G&&this.b&&3==b&&($t(this.J,this.R,"tick",this.Wa),this.R.start())):(ee(this.c,this.f,r,null),Re(this,r)),4==b&&xe(this),this.b&&!this.A&&(4==b?Qn(this.g,this):(this.b=!1,ke(this)))}else 400==n&&0<r.indexOf("Unknown SID")?(this.h=3,ue(12)):(this.h=0,ue(13)),xe(this),Pe(this)}}}catch(t){}},c.Wa=function(){if(this.a){var a=jn(this.a),b=this.a.$();this.D<b.length&&(je(this),Ce(this,a,b),this.b&&4!=a&&ke(this))}},c.cancel=function(){this.A=!0,xe(this)},c.Va=function(){this.o=null;var a=q();0<=a-this.T?(function(a,b){a.info((function(){return"TIMEOUT: "+b}))}(this.c,this.l),2!=this.H&&(se(3),ue(17)),xe(this),this.h=2,Pe(this)):Ae(this,this.T-a)},(c=Le.prototype).K=function(){Me(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},c.L=function(){return Me(this),this.a.concat()},c.get=function(a,b){return Fe(this.b,a)?this.b[a]:b},c.set=function(a,b){Fe(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},c.forEach=function(a,b){for(var t=this.L(),e=0;e<t.length;e++){var n=t[e],r=this.get(n);a.call(b,r,n,this)}};var Ue=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ve(a,b){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,a instanceof Ve){this.a=void 0!==b?b:a.a,Be(this,a.f),this.j=a.j,He(this,a.c),Ke(this,a.h),this.g=a.g,b=a.b;var t=new en;t.c=b.c,b.a&&(t.a=new Le(b.a),t.b=b.b),ze(this,t),this.i=a.i}else a&&(t=String(a).match(Ue))?(this.a=!!b,Be(this,t[1]||"",!0),this.j=Qe(t[2]||""),He(this,t[3]||"",!0),Ke(this,t[4]),this.g=Qe(t[5]||"",!0),ze(this,t[6]||"",!0),this.i=Qe(t[7]||"")):(this.a=!!b,this.b=new en(null,this.a))}function qe(a){return new Ve(a)}function Be(a,b,t){a.f=t?Qe(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,""))}function He(a,b,t){a.c=t?Qe(b,!0):b}function Ke(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.h=b}else a.h=null}function ze(a,b,t){b instanceof en?(a.b=b,function(a,b){b&&!a.f&&(nn(a),a.c=null,a.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(rn(this,e),sn(this,n,t))}),a)),a.f=b}(a.b,a.a)):(t||(b=Ye(b,Ze)),a.b=new en(b,a.a))}function We(a,b,t){a.b.set(b,t)}function Ge(a){return We(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^q()).toString(36)),a}function Qe(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ye(a,b,t){return"string"==typeof a?(a=encodeURI(a).replace(b,dd),t&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function dd(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Ve.prototype.toString=function(){var a=[],b=this.f;b&&a.push(Ye(b,Je,!0),":");var t=this.c;return(t||"file"==b)&&(a.push("//"),(b=this.j)&&a.push(Ye(b,Je,!0),"@"),a.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.h)&&a.push(":",String(t))),(t=this.g)&&(this.c&&"/"!=t.charAt(0)&&a.push("/"),a.push(Ye(t,"/"==t.charAt(0)?$e:Xe,!0))),(t=this.b.toString())&&a.push("?",t),(t=this.i)&&a.push("#",Ye(t,tn)),a.join("")};var Je=/[#\/\?@]/g,Xe=/[#\?:]/g,$e=/[#\?]/g,Ze=/[#\?@]/g,tn=/#/g;function en(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function nn(a){a.a||(a.a=new Le,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var t=0;t<a.length;t++){var e=a[t].indexOf("="),n=null;if(0<=e){var r=a[t].substring(0,e);n=a[t].substring(e+1)}else r=a[t];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,(function(b,t){a.add(decodeURIComponent(b.replace(/\+/g," ")),t)})))}function rn(a,b){nn(a),b=an(a,b),Fe(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,Fe((a=a.a).b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Me(a)))}function on(a,b){return nn(a),b=an(a,b),Fe(a.a.b,b)}function sn(a,b,t){rn(a,b),0<t.length&&(a.c=null,a.a.set(an(a,b),k(t)),a.b+=t.length)}function an(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}(c=en.prototype).add=function(a,b){nn(this),this.c=null,a=an(this,a);var t=this.a.get(a);return t||this.a.set(a,t=[]),t.push(b),this.b+=1,this},c.forEach=function(a,b){nn(this),this.a.forEach((function(t,e){C(t,(function(t){a.call(b,t,e,this)}),this)}),this)},c.L=function(){nn(this);for(var a=this.a.K(),b=this.a.L(),t=[],e=0;e<b.length;e++)for(var n=a[e],r=0;r<n.length;r++)t.push(b[e]);return t},c.K=function(a){nn(this);var b=[];if("string"==typeof a)on(this,a)&&(b=N(b,this.a.get(an(this,a))));else{a=this.a.K();for(var t=0;t<a.length;t++)b=N(b,a[t])}return b},c.set=function(a,b){return nn(this),this.c=null,on(this,a=an(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},c.get=function(a,b){return a&&0<(a=this.K(a)).length?String(a[0]):b},c.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.L(),t=0;t<b.length;t++){var e=b[t],n=encodeURIComponent(String(e));e=this.K(e);for(var r=0;r<e.length;r++){var g=n;""!==e[r]&&(g+="="+encodeURIComponent(String(e[r]))),a.push(g)}}return this.c=a.join("&")};var un=function(a,b){this.b=a,this.a=b};function cn(a){this.g=a||hn,f.PerformanceNavigationTiming?a=0<(a=f.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):a=!!(f.ia&&f.ia.ya&&f.ia.ya()&&f.ia.ya().Lb),this.f=a?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var hn=10;function ln(a){return!!a.b||!!a.a&&a.a.size>=a.f}function fn(a){return a.b?1:a.a?a.a.size:0}function pn(a,b){return a.b?a.b==b:!!a.a&&a.a.has(b)}function dn(a,b){a.a?a.a.add(b):a.b=b}function vn(a,b){a.b&&a.b==b?a.b=null:a.a&&a.a.has(b)&&a.a.delete(b)}function gn(a){var t,e;if(null!=a.b)return a.c.concat(a.b.s);if(null!=a.a&&0!==a.a.size){var b=a.c;try{for(var n=o(a.a.values()),r=n.next();!r.done;r=n.next()){var c=r.value;b=b.concat(c.s)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return b}return k(a.c)}function yn(){}function mn(){this.a=new yn}function bn(a,b,t){var e=t||"";try{De(a,(function(t,n){var g=t;y(t)&&(g=Rt(t)),b.push(e+n+"="+encodeURIComponent(g))}))}catch(t){throw b.push(e+"type="+encodeURIComponent("_badmap")),t}}function _n(a,b,t,e,n){try{b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null,n(e)}catch(t){}}cn.prototype.cancel=function(){var t,e;if(this.c=gn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=o(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},yn.prototype.stringify=function(a){return f.JSON.stringify(a,void 0)},yn.prototype.parse=function(a){return f.JSON.parse(a,void 0)};var wn=f.JSON.parse;function En(a){jt.call(this),this.headers=new Le,this.H=a||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=In,this.D=this.F=!1}T(En,jt);var In="",Tn=/^https?$/i,td=["POST","PUT"];function On(a){return"content-type"==a.toLowerCase()}function Sn(a,b){a.b=!1,a.a&&(a.g=!0,a.a.abort(),a.g=!1),a.f=b,a.h=5,Cn(a),kn(a)}function Cn(a){a.u||(a.u=!0,Pt(a,"complete"),Pt(a,"error"))}function Nn(a){if(a.b&&void 0!==l&&(!a.s[1]||4!=jn(a)||2!=a.W()))if(a.l&&4==jn(a))Gt(a.za,0,a);else if(Pt(a,"readystatechange"),4==jn(a)){a.b=!1;try{var t,e=a.W();t:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break t;default:b=!1}if(!(t=b)){var n;if(n=0===e){var r=String(a.B).match(Ue)[1]||null;if(!r&&f.self&&f.self.location){var o=f.self.location.protocol;r=o.substr(0,o.length-1)}n=!Tn.test(r?r.toLowerCase():"")}t=n}if(t)Pt(a,"complete"),Pt(a,"success");else{a.h=6;try{var c=2<jn(a)?a.a.statusText:""}catch(e){c=""}a.f=c+" ["+a.W()+"]",Cn(a)}}finally{kn(a)}}}function kn(a,b){if(a.a){An(a);var t=a.a,e=a.s[0]?d:null;a.a=null,a.s=null,b||Pt(a,"ready");try{t.onreadystatechange=e}catch(t){}}}function An(a){a.a&&a.D&&(a.a.ontimeout=null),a.m&&(f.clearTimeout(a.m),a.m=null)}function jn(a){return a.a?a.a.readyState:0}function Pn(a,b,t){t:{for(e in t){var e=!1;break t}e=!0}e||(t=function(a){var b="";return M(a,(function(t,e){b+=e,b+=":",b+=t,b+="\r\n"})),b}(t),"string"==typeof a?null!=t&&encodeURIComponent(String(t)):We(a,b,t))}function xn(a,b,t){return t&&t.internalChannelParams&&t.internalChannelParams[a]||b}function Rn(a){this.pa=0,this.g=[],this.c=new te,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=xn("failFast",!1,a),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=xn("baseRetryDelayMs",5e3,a),this.Ra=xn("retryDelaySeedMs",1e4,a),this.Ma=xn("forwardChannelMaxRetries",2,a),this.ma=xn("forwardChannelRequestTimeoutMs",2e4,a),this.Na=a&&a.g||void 0,this.D=void 0,this.C=a&&a.supportsCrossDomainXhr||!1,this.J="",this.b=new cn(a&&a.concurrentRequestLimit),this.ka=new mn,this.da=a&&a.fastHandshake||!1,this.Ia=a&&a.b||!1,a&&a.f&&(this.c.a=!1),a&&a.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&a&&a.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=a&&a.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Dn(a){if(Mn(a),3==a.v){var b=a.R++,t=qe(a.B);We(t,"SID",a.J),We(t,"RID",b),We(t,"TYPE","terminate"),qn(a,t),(b=new we(a,a.c,b,void 0)).H=2,b.i=Ge(qe(t)),t=!1,f.navigator&&f.navigator.sendBeacon&&(t=f.navigator.sendBeacon(b.i.toString(),"")),!t&&f.Image&&((new Image).src=b.i,t=!0),t||(b.a=Zn(b.g,null),b.a.ba(b.i)),b.u=q(),ke(b)}Xn(a)}function Ln(a){a.a&&(zn(a),a.a.cancel(),a.a=null)}function Mn(a){Ln(a),a.j&&(f.clearTimeout(a.j),a.j=null),Gn(a),a.b.cancel(),a.h&&("number"==typeof a.h&&f.clearTimeout(a.h),a.h=null)}function Fn(a,b){a.g.push(new un(a.Oa++,b)),3==a.v&&Un(a)}function Un(a){ln(a.b)||a.h||(a.h=!0,qt(a.Ba,a),a.u=0)}function Vn(a,b){var t;t=b?b.f:a.R++;var e=qe(a.B);We(e,"SID",a.J),We(e,"RID",t),We(e,"AID",a.P),qn(a,e),a.i&&a.l&&Pn(e,a.i,a.l),t=new we(a,a.c,t,a.u+1),null===a.i&&(t.B=a.l),b&&(a.g=b.s.concat(a.g)),b=Bn(a,t,1e3),t.setTimeout(Math.round(.5*a.ma)+Math.round(.5*a.ma*Math.random())),dn(a.b,t),Oe(t,e,b)}function qn(a,b){a.f&&De({},(function(t,e){We(b,e,t)}))}function Bn(a,b,t){t=Math.min(a.g.length,t);var e=a.f?p(a.f.Ja,a.f,a):null;t:for(var n=a.g,r=-1;;){var g=["count="+t];-1==r?0<t?(r=n[0].b,g.push("ofs="+r)):r=0:g.push("ofs="+r);for(var o=!0,c=0;c<t;c++){var u=n[c].b,h=n[c].a;if(0>(u-=r))r=Math.max(0,n[c].b-100),o=!1;else try{bn(h,g,"req"+u+"_")}catch(t){e&&e(h)}}if(o){e=g.join("&");break t}}return a=a.g.splice(0,t),b.s=a,e}function Hn(a){a.a||a.j||(a.T=1,qt(a.Aa,a),a.o=0)}function Kn(a){return!(a.a||a.j||3<=a.o)&&(a.T++,a.j=he(p(a.Aa,a),Yn(a,a.o)),a.o++,!0)}function zn(a){null!=a.s&&(f.clearTimeout(a.s),a.s=null)}function Wn(a){a.a=new we(a,a.c,"rpc",a.T),null===a.i&&(a.a.B=a.l),a.a.O=0;var b=qe(a.la);We(b,"RID","rpc"),We(b,"SID",a.J),We(b,"CI",a.H?"0":"1"),We(b,"AID",a.P),qn(a,b),We(b,"TYPE","xmlhttp"),a.i&&a.l&&Pn(b,a.i,a.l),a.D&&a.a.setTimeout(a.D);var t=a.a;a=a.ga,t.H=1,t.i=Ge(qe(b)),t.j=null,t.I=!0,Se(t,a)}function Gn(a){null!=a.m&&(f.clearTimeout(a.m),a.m=null)}function Qn(a,b){var t=null;if(a.a==b){Gn(a),zn(a),a.a=null;var e=2}else{if(!pn(a.b,b))return;t=b.s,vn(a.b,b),e=1}if(a.I=b.N,0!=a.v)if(b.b)if(1==e){t=b.j?b.j.length:0,b=q()-b.u;var n=a.u;Pt(e=ie(),new ce(e,t,b,n)),Un(a)}else Hn(a);else if(3==(n=b.h)||0==n&&0<a.I||!(1==e&&function(a,b){return!(fn(a.b)>=a.b.f-(a.h?1:0))&&(a.h?(a.g=b.s.concat(a.g),!0):!(1==a.v||2==a.v||a.u>=(a.La?0:a.Ma))&&(a.h=he(p(a.Ba,a,b),Yn(a,a.u)),a.u++,!0))}(a,b)||2==e&&Kn(a)))switch(t&&0<t.length&&(b=a.b,b.c=b.c.concat(t)),n){case 1:Jn(a,5);break;case 4:Jn(a,10);break;case 3:Jn(a,6);break;default:Jn(a,2)}}function Yn(a,b){var t=a.Ha+Math.floor(Math.random()*a.Ra);return a.f||(t*=2),t*b}function Jn(a,b){if(a.c.info("Error code "+b),2==b){var t=null;a.f&&(t=null);var e=p(a.Ya,a);t||(t=new Ve("//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||Be(t,"https"),Ge(t)),function(a,b){var t=new te;if(f.Image){var e=new Image;e.onload=I(_n,t,e,"TestLoadImage: loaded",!0,b),e.onerror=I(_n,t,e,"TestLoadImage: error",!1,b),e.onabort=I(_n,t,e,"TestLoadImage: abort",!1,b),e.ontimeout=I(_n,t,e,"TestLoadImage: timeout",!1,b),f.setTimeout((function(){e.ontimeout&&e.ontimeout()}),1e4),e.src=a}else b(!1)}(t.toString(),e)}else ue(2);a.v=0,a.f&&a.f.ra(b),Xn(a),Mn(a)}function Xn(a){a.v=0,a.I=-1,a.f&&(0==gn(a.b).length&&0==a.g.length||(a.b.c.length=0,k(a.g),a.g.length=0),a.f.qa())}function $n(a,b,t){var e=function(a){return a instanceof Ve?qe(a):new Ve(a,void 0)}(t);if(""!=e.c)b&&He(e,b+"."+e.c),Ke(e,e.h);else{var n=f.location;e=function(a,b,t,e){var n=new Ve(null,void 0);return a&&Be(n,a),b&&He(n,b),t&&Ke(n,t),e&&(n.g=e),n}(n.protocol,b?b+"."+n.hostname:n.hostname,+n.port,t)}return a.V&&M(a.V,(function(t,g){We(e,g,t)})),b=a.A,t=a.na,b&&t&&We(e,b,t),We(e,"VER",a.ha),qn(a,e),e}function Zn(a,b){if(b&&!a.C)throw Error("Can't create secondary domain capable XhrIo object.");return(b=new En(a.Na)).F=a.C,b}function er(){}function nr(){if(z&&!(10<=Number(ot)))throw Error("Environmental error: no available transport.")}function rr(a,b){jt.call(this),this.a=new Rn(b),this.o=a,this.b=b&&b.messageUrlParams||null,a=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.a.l=a,a=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(a?a["X-WebChannel-Content-Type"]=b.messageContentType:a={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.a&&(a?a["X-WebChannel-Client-Profile"]=b.a:a={"X-WebChannel-Client-Profile":b.a}),this.a.O=a,(a=b&&b.httpHeadersOverwriteParam)&&!A(a)&&(this.a.i=a),this.m=b&&b.supportsCrossDomainXhr||!1,this.l=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!A(b)&&(this.a.A=b,null!==(a=this.b)&&b in a&&(b in(a=this.b)&&delete a[b])),this.f=new sr(this)}function ir(a){me.call(this);var b=a.__sm__;if(b){t:{for(var t in b){a=t;break t}a=void 0}(this.c=a)?(a=this.c,this.data=null!==b&&a in b?b[a]:void 0):this.data=b}else this.data=a}function or(){be.call(this),this.status=1}function sr(a){this.a=a}(c=En.prototype).ba=function(a,b,t,e){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+a);b=b?b.toUpperCase():"GET",this.B=a,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?de(this.H):de(ge),this.a.onreadystatechange=p(this.za,this);try{this.A=!0,this.a.open(b,String(a),!0),this.A=!1}catch(t){return void Sn(this,t)}a=t||"";var n=new Le(this.headers);e&&De(e,(function(t,g){n.set(g,t)})),e=function(a){t:{for(var b=On,t=a.length,e="string"==typeof a?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a)){b=n;break t}b=-1}return 0>b?null:"string"==typeof a?a.charAt(b):a[b]}(n.L()),t=f.FormData&&a instanceof f.FormData,!(0<=S(td,b))||e||t||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.forEach((function(t,g){this.a.setRequestHeader(g,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{An(this),0<this.o&&((this.D=function(a){return z&&nt(9)&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=p(this.xa,this)):this.m=Gt(this.xa,this.o,this)),this.l=!0,this.a.send(a),this.l=!1}catch(t){Sn(this,t)}},c.xa=function(){void 0!==l&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Pt(this,"timeout"),this.abort(8))},c.abort=function(a){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=a||7,Pt(this,"complete"),Pt(this,"abort"),kn(this))},c.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),kn(this,!0)),En.X.G.call(this)},c.za=function(){this.j||(this.A||this.l||this.g?Nn(this):this.Ua())},c.Ua=function(){Nn(this)},c.W=function(){try{return 2<jn(this)?this.a.status:-1}catch(t){return-1}},c.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},c.Pa=function(a){if(this.a){var b=this.a.responseText;return a&&0==b.indexOf(a)&&(b=b.substring(a.length)),wn(b)}},c.ua=function(){return this.h},c.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(c=Rn.prototype).ha=8,c.v=1,c.Ba=function(a){if(this.h)if(this.h=null,1==this.v){if(!a){this.R=Math.floor(1e5*Math.random()),a=this.R++;var t,b=new we(this,this.c,a,void 0),e=this.l;if(this.O&&(e?V(e=F(e),this.O):e=this.O),null===this.i&&(b.B=e),this.da)t:{for(var n=t=0;n<this.g.length;n++){var r=this.g[n];if(void 0===(r="__data__"in r.a&&"string"==typeof(r=r.a.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break t}if(4096===t||n===this.g.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Bn(this,b,t),We(n=qe(this.B),"RID",a),We(n,"CVER",22),this.A&&We(n,"X-HTTP-Session-Id",this.A),qn(this,n),this.i&&e&&Pn(n,this.i,e),dn(this.b,b),this.Ia&&We(n,"TYPE","init"),this.da?(We(n,"$req",t),We(n,"SID","null"),b.U=!0,Oe(b,n,null)):Oe(b,n,t),this.v=2}}else 3==this.v&&(a?Vn(this,a):0==this.g.length||ln(this.b)||Vn(this))},c.Aa=function(){if(this.j=null,Wn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var a=2*this.N;this.c.info("BP detection timer enabled: "+a),this.s=he(p(this.Ta,this),a)}},c.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ue(10),Ln(this),Wn(this))},c.Sa=function(){null!=this.m&&(this.m=null,Ln(this),Kn(this),ue(19))},c.Ya=function(a){a?(this.c.info("Successfully pinged google.com"),ue(2)):(this.c.info("Failed to ping google.com"),ue(1))},(c=er.prototype).ta=function(){},c.sa=function(){},c.ra=function(){},c.qa=function(){},c.Ja=function(){},nr.prototype.a=function(a,b){return new rr(a,b)},T(rr,jt),rr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var a=this.a,b=this.o,t=this.b||void 0;ue(0),a.fa=b,a.V=t||{},a.H=a.S,a.B=$n(a,null,a.fa),Un(a)},rr.prototype.close=function(){Dn(this.a)},rr.prototype.h=function(a){if("string"==typeof a){var b={};b.__data__=a,Fn(this.a,b)}else this.l?((b={}).__data__=Rt(a),Fn(this.a,b)):Fn(this.a,a)},rr.prototype.G=function(){this.a.f=null,delete this.f,Dn(this.a),delete this.a,rr.X.G.call(this)},T(ir,me),T(or,be),T(sr,er),sr.prototype.ta=function(){Pt(this.a,"a")},sr.prototype.sa=function(a){Pt(this.a,new ir(a))},sr.prototype.ra=function(a){Pt(this.a,new or(a))},sr.prototype.qa=function(){Pt(this.a,"b")},nr.prototype.createWebChannel=nr.prototype.a,rr.prototype.send=rr.prototype.h,rr.prototype.open=rr.prototype.g,rr.prototype.close=rr.prototype.close,le.NO_ERROR=0,le.TIMEOUT=8,le.HTTP_ERROR=6,fe.COMPLETE="complete",ve.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",jt.prototype.listen=jt.prototype.va,En.prototype.listenOnce=En.prototype.wa,En.prototype.getLastError=En.prototype.Qa,En.prototype.getLastErrorCode=En.prototype.ua,En.prototype.getStatus=En.prototype.W,En.prototype.getResponseJson=En.prototype.Pa,En.prototype.getResponseText=En.prototype.$,En.prototype.send=En.prototype.ba;var ar=function(){return new nr},ur=function(){return ie()},cr=le,lr=fe,fr=ne,pr={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},dr=ve,vr=En}).call(this,n(18))},152:function(t,e,n){"use strict";var r=n(2),o=n(0),c=n(1),h=n(6),l=function(t){function e(code,n){var r=t.call(this,R(code),"Firebase Storage: "+n+" ("+R(code)+")")||this;return r.customData={serverResponse:null},Object.setPrototypeOf(r,e.prototype),r}return Object(o.c)(e,t),e.prototype.codeEquals=function(code){return R(code)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(c.c),f="unknown",d="object-not-found",v="quota-exceeded",y="unauthenticated",m="unauthorized",_="retry-limit-exceeded",w="canceled",E="invalid-url",I="invalid-default-bucket",T="no-default-bucket",O="cannot-slice-blob",S="server-file-wrong-size",C="no-download-url",N="invalid-argument",k="app-deleted",A="invalid-root-operation",j="invalid-format",P="internal-error",x="unsupported-environment";function R(code){return"storage/"+code}function D(){return new l(f,"An unknown error occurred, please check the error payload for server response.")}function L(){return new l(w,"User canceled the upload/download.")}function M(){return new l(O,"Cannot slice blob for upload. Please retry the upload.")}function F(t){return new l(N,t)}function U(){return new l(k,"The Firebase app was deleted.")}function V(t){return new l(A,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function B(t,e){return new l(j,"String does not match format '"+t+"': "+e)}function H(t){throw new l(P,"Internal error: "+t)}var K={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},z=function(data,t){this.data=data,this.contentType=t||null};function W(t,e){switch(t){case K.RAW:return new z(G(e));case K.BASE64:case K.BASE64URL:return new z(Q(t,e));case K.DATA_URL:return new z((n=new Y(e)).base64?Q(K.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw B(K.DATA_URL,"Malformed data URL.")}return G(e)}(n.rest),function(t){return new Y(t).contentType}(e))}var n;throw D()}function G(t){for(var b=[],i=0;i<t.length;i++){var e=t.charCodeAt(i);if(e<=127)b.push(e);else if(e<=2047)b.push(192|e>>6,128|63&e);else if(55296==(64512&e))if(i<t.length-1&&56320==(64512&t.charCodeAt(i+1)))e=65536|(1023&e)<<10|1023&t.charCodeAt(++i),b.push(240|e>>18,128|e>>12&63,128|e>>6&63,128|63&e);else b.push(239,191,189);else 56320==(64512&e)?b.push(239,191,189):b.push(224|e>>12,128|e>>6&63,128|63&e)}return new Uint8Array(b)}function Q(t,e){switch(t){case K.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw B(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case K.BASE64URL:var o=-1!==e.indexOf("+"),c=-1!==e.indexOf("/");if(o||c)throw B(t,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var h;try{h=atob(e)}catch(e){throw B(t,"Invalid character found")}for(var l=new Uint8Array(h.length),i=0;i<h.length;i++)l[i]=h.charCodeAt(i);return l}var Y=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw B(K.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(s=n,r=";base64",s.length>=r.length&&s.substring(s.length-r.length)===r),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var s,r};var J,X={STATE_CHANGED:"state_changed"},$="running",Z="pausing",tt="paused",et="success",nt="canceling",it="canceled",ot="error",st={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function at(t){switch(t){case $:case Z:case nt:return st.RUNNING;case tt:return st.PAUSED;case et:return st.SUCCESS;case it:return st.CANCELED;case ot:default:return st.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(J||(J={}));var ut=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=J.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=J.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=J.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,body,n){if(this.sent_)throw H("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==n)for(var r in n)n.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,n[r].toString());return void 0!==body?this.xhr_.send(body):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw H("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw H("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw H("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(header){return this.xhr_.getResponseHeader(header)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),ct=function(){function t(){}return t.prototype.createXhrIo=function(){return new ut},t}();function ht(p){return"string"==typeof p||p instanceof String}function lt(p){return ft()&&p instanceof Blob}function ft(){return"undefined"!=typeof Blob}function pt(t,e,n,r){if(r<e)throw new l(N,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new l(N,"Invalid value for '"+t+"'. Expected "+n+" or less.")}function vt(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function gt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=vt();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(ft())return new Blob(t);throw new l(x,"This browser doesn't seem to support creating Blobs")}var yt=function(){function t(data,t){var e=0,n="";lt(data)?(this.data_=data,e=data.size,n=data.type):data instanceof ArrayBuffer?(t?this.data_=new Uint8Array(data):(this.data_=new Uint8Array(data.byteLength),this.data_.set(new Uint8Array(data))),e=this.data_.length):data instanceof Uint8Array&&(t?this.data_=data:(this.data_=new Uint8Array(data.length),this.data_.set(data)),e=data.length),this.size_=e,this.type_=n}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(lt(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(ft()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(gt.apply(null,r))}var o=e.map((function(t){return ht(t)?W(K.RAW,t).data:t.data_})),c=0;o.forEach((function(t){c+=t.byteLength}));var h=new Uint8Array(c),l=0;return o.forEach((function(t){for(var i=0;i<t.length;i++)h[l++]=t[i]})),new t(h,!0)},t.prototype.uploadData=function(){return this.data_},t}(),mt=function(){function t(t,path){this.bucket=t,this.path_=path}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new l(I,"Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null;var r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var c="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),h=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+c+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],i=0;i<h.length;i++){var f=h[i],d=f.regex.exec(e);if(d){var v=d[f.indices.bucket],y=d[f.indices.path];y||(y=""),n=new t(v,y),f.postModify(n);break}}if(null==n)throw function(t){return new l(E,"Invalid URL '"+t+"'.")}(e);return n},t}();function bt(s){var t,p;try{t=JSON.parse(s)}catch(t){return null}return"object"!=typeof(p=t)||Array.isArray(p)?null:t}function _t(path){var t=path.lastIndexOf("/",path.length-2);return-1===t?path:path.slice(t+1)}function wt(t){return"https://firebasestorage.googleapis.com/v0"+t}function Et(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}function It(t,e){return e}var Tt=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||It},Ot=null;function St(){if(Ot)return Ot;var t=[];t.push(new Tt("bucket")),t.push(new Tt("generation")),t.push(new Tt("metageneration")),t.push(new Tt("name","fullPath",!0));var e=new Tt("name");e.xform=function(t,e){return function(t){return!ht(t)||t.length<2?t:_t(t)}(e)},t.push(e);var n=new Tt("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Tt("timeCreated")),t.push(new Tt("updated")),t.push(new Tt("md5Hash",null,!0)),t.push(new Tt("cacheControl",null,!0)),t.push(new Tt("contentDisposition",null,!0)),t.push(new Tt("contentEncoding",null,!0)),t.push(new Tt("contentLanguage",null,!0)),t.push(new Tt("contentType",null,!0)),t.push(new Tt("metadata","customMetadata",!0)),Ot=t}function Ct(t,e,n){for(var r={type:"file"},o=n.length,i=0;i<o;i++){var c=n[i];r[c.local]=c.xform(r,e[c.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,path=t.fullPath,r=new mt(n,path);return e.makeStorageReference(r)}})}(r,t),r}function Nt(t,e,n){var r=bt(e);return null===r?null:Ct(t,r,n)}function kt(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function At(t,e,n){var r=bt(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var o=0,c=n.prefixes;o<c.length;o++){var h=c[o].replace(/\/$/,""),l=t.makeStorageReference(new mt(e,h));r.prefixes.push(l)}if(n.items)for(var f=0,d=n.items;f<d.length;f++){var v=d[f];l=t.makeStorageReference(new mt(e,v.name));r.items.push(l)}return r}(t,e,r)}var jt=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Pt(t){if(!t)throw D()}function xt(t,e){return function(n,text){var r=Nt(t,text,e);return Pt(null!==r),r}}function Rt(t,e){return function(n,text){var r=Nt(t,text,e);return Pt(null!==r),function(t,e){var n=bt(e);if(null===n)return null;if(!ht(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var o=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,path=t.fullPath;return wt("/b/"+o(n)+"/o/"+o(path))+Et({alt:"media",token:e})}))[0]}(r,text)}}function Dt(t){return function(e,n){var r,path,o;return 401===e.getStatus()?r=new l(y,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new l(v,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(path=t.path,r=new l(m,"User does not have permission to access '"+path+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Lt(t){var e=Dt(t);return function(n,r){var path,o=e(n,r);return 404===n.getStatus()&&(path=t.path,o=new l(d,"Object '"+path+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function Mt(t,e,n){var r=wt(e.fullServerUrl()),o=t.maxOperationRetryTime,c=new jt(r,"GET",xt(t,n),o);return c.errorHandler=Lt(e),c}function Ft(t,e,n,r,o){var c={};e.isRoot?c.prefix="":c.prefix=e.path+"/",n&&n.length>0&&(c.delimiter=n),r&&(c.pageToken=r),o&&(c.maxResults=o);var h=wt(e.bucketOnlyServerUrl()),l=t.maxOperationRetryTime,f=new jt(h,"GET",function(t,e){return function(n,text){var r=At(t,e,text);return Pt(null!==r),r}}(t,e.bucket),l);return f.urlParams=c,f.errorHandler=Dt(e),f}function Ut(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Vt=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function qt(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Pt(!1)}return Pt(!!n&&-1!==(e||["active"]).indexOf(n)),n}function Bt(t,e,n,r,o,c,h,f){var d=new Vt(0,0);if(h?(d.current=h.current,d.total=h.total):(d.current=0,d.total=r.size()),r.size()!==d.total)throw new l(S,"Server recorded incorrect upload file size, please retry the upload.");var v=d.total-d.current,y=v;o>0&&(y=Math.min(y,o));var m=d.current,_=m+y,w={"X-Goog-Upload-Command":y===v?"upload, finalize":"upload","X-Goog-Upload-Offset":d.current},body=r.slice(m,_);if(null===body)throw M();var E=e.maxUploadRetryTime,I=new jt(n,"POST",(function(t,text){var n,o=qt(t,["active","final"]),h=d.current+y,l=r.size();return n="final"===o?xt(e,c)(t,text):null,new Vt(h,l,"final"===o,n)}),E);return I.headers=w,I.body=body.uploadData(),I.progressCallback=f||null,I.errorHandler=Dt(t),I}var Ht=function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}},Kt=function(t,e,n,r,o,c){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=o,this.ref=c};function zt(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Wt=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=St(),this._resumable=this._shouldDoResumable(this._blob),this._state=$,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(w)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(ot))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(w)?r.completeTransitions_():(r._error=t,r._transition(ot))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){this._state===$&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then((function(n){switch(e._state){case $:t(n);break;case nt:e._transition(it);break;case Z:e._transition(tt)}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,o){var c=e.bucketOnlyServerUrl(),h=Ut(e,r,o),l={name:h.fullPath},f=wt(c),d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":h.contentType,"Content-Type":"application/json; charset=utf-8"},body=kt(h,n),v=t.maxUploadRetryTime,y=new jt(f,"POST",(function(t){var e;qt(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Pt(!1)}return Pt(ht(e)),e}),v);return y.urlParams=l,y.headers=d,y.body=body,y.errorHandler=Dt(e),y}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var o=t.maxUploadRetryTime,c=new jt(n,"POST",(function(t){var e=qt(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Pt(!1)}n||Pt(!1);var o=Number(n);return Pt(!isNaN(o)),new Vt(o,r.size(),"final"===e)}),o);return c.headers={"X-Goog-Upload-Command":"query"},c.errorHandler=Dt(e),c}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage.makeRequest(r,n);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new Vt(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(o){var c;try{c=Bt(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition(ot)}var h=t._ref.storage.makeRequest(c,o);t._request=h,h.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition(et)):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=Mt(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition(et)}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,o){var c=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"},l=function(){for(var t="",i=0;i<2;i++)t+=Math.random().toString().slice(2);return t}();h["Content-Type"]="multipart/related; boundary="+l;var f=Ut(e,r,o),d="--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+kt(f,n)+"\r\n--"+l+"\r\nContent-Type: "+f.contentType+"\r\n\r\n",v="\r\n--"+l+"--",body=yt.getBlob(d,r,v);if(null===body)throw M();var y={name:f.fullPath},m=wt(c),_=t.maxUploadRetryTime,w=new jt(m,"POST",xt(t,n),_);return w.urlParams=y,w.headers=h,w.body=body.uploadData(),w.errorHandler=Dt(e),w}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition(et)}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case nt:case Z:this._state=t,void 0!==this._request&&this._request.cancel();break;case $:var e=this._state===tt;this._state=t,e&&(this._notifyObservers(),this._start());break;case tt:this._state=t,this._notifyObservers();break;case it:this._error=L(),this._state=t,this._notifyObservers();break;case ot:case et:this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case Z:this._transition(tt);break;case nt:this._transition(it);break;case $:this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=at(this._state);return new Kt(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var o=this,c=new Ht(e,n,r);return this._addObserver(c),function(){o._removeObserver(c)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var i=this._observers.indexOf(t);-1!==i&&this._observers.splice(i,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(at(this._state)){case st.SUCCESS:zt(this._resolve.bind(null,this.snapshot))();break;case st.CANCELED:case st.ERROR:zt(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(at(this._state)){case st.RUNNING:case st.PAUSED:t.next&&zt(t.next.bind(t,this.snapshot))();break;case st.SUCCESS:t.complete&&zt(t.complete.bind(t))();break;case st.CANCELED:case st.ERROR:t.error&&zt(t.error.bind(t,this._error))();break;default:t.error&&zt(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t=this._state===tt||this._state===Z;return t&&this._transition($),t},t.prototype.pause=function(){var t=this._state===$;return t&&this._transition(Z),t},t.prototype.cancel=function(){var t=this._state===$||this._state===Z;return t&&this._transition(nt),t},t}(),Gt=function(){function t(t,e){this._service=t,this._location=e instanceof mt?e:mt.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new mt(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return _t(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(path){if(0===path.length)return null;var t=path.lastIndexOf("/");return-1===t?"":path.slice(0,t)}(this._location.path);if(null===e)return null;var n=new mt(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw V(t)},t}();function Qt(t){var e={prefixes:[],items:[]};return function t(e,n,r){return Object(o.b)(this,void 0,void 0,(function(){var c,h,l;return Object(o.d)(this,(function(o){switch(o.label){case 0:return[4,Yt(e,{pageToken:r})];case 1:return c=o.sent(),(h=n.prefixes).push.apply(h,c.prefixes),(l=n.items).push.apply(l,c.items),null==c.nextPageToken?[3,3]:[4,t(e,n,c.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))}function Yt(t,e){return Object(o.b)(this,void 0,void 0,(function(){var n,r,c;return Object(o.d)(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&pt("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),r=e||{},c=Ft(t.storage,t._location,"/",r.pageToken,r.maxResults),[2,t.storage.makeRequest(c,n).getPromise()]}}))}))}function Jt(t,e){return Object(o.b)(this,void 0,void 0,(function(){var n,r;return Object(o.d)(this,(function(o){switch(o.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),r=function(t,e,n,r){var o=wt(e.fullServerUrl()),body=kt(n,r),c=t.maxOperationRetryTime,h=new jt(o,"PATCH",xt(t,r),c);return h.headers={"Content-Type":"application/json; charset=utf-8"},h.body=body,h.errorHandler=Lt(e),h}(t.storage,t._location,e,St()),[2,t.storage.makeRequest(r,n).getPromise()]}}))}))}function Xt(t){return Object(o.b)(this,void 0,void 0,(function(){var e,n;return Object(o.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=wt(e.fullServerUrl()),o=t.maxOperationRetryTime,c=new jt(r,"GET",Rt(t,n),o);return c.errorHandler=Lt(e),c}(t.storage,t._location,St()),[2,t.storage.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new l(C,"The given file does not have any download URLs.");return t}))]}}))}))}function $t(t){return Object(o.b)(this,void 0,void 0,(function(){var e,n;return Object(o.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=wt(e.fullServerUrl()),r=t.maxOperationRetryTime,o=new jt(n,"DELETE",(function(t,e){}),r);return o.successCodes=[200,204],o.errorHandler=Lt(e),o}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}function Zt(t,e){var n=function(path,t){var e=t.split("/").filter((function(component){return component.length>0})).join("/");return 0===path.length?e:path+"/"+e}(t._location.path,e),r=new mt(t._location.bucket,n);return new Gt(t.storage,r)}var te=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),ee=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new te(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new te(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var o=this,c=void 0;return e&&(c="function"==typeof e?function(t){return e(new te(t,o,o._ref))}:{next:e.next?function(t){return e.next(new te(t,o,o._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,c,n||void 0,r||void 0)},t}(),ne=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new re(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new re(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),re=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(Zt(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(data,t){return this._throwIfRoot("put"),new ee(function(t,data,e){return void 0===e&&(e=null),t._throwIfRoot("uploadBytesResumable"),new Wt(t,new yt(data),e)}(this._delegate,data,t),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=K.RAW),this._throwIfRoot("putString"),new ee(function(t,e,n,r){void 0===n&&(n=K.RAW),t._throwIfRoot("putString");var data=W(n,e),c=Object(o.a)({},r);return null==c.contentType&&null!=data.contentType&&(c.contentType=data.contentType),new Wt(t,new yt(data.data,!0),c)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t=this;return Qt(this._delegate).then((function(e){return new ne(e,t.storage)}))},t.prototype.list=function(t){var e=this;return Yt(this._delegate,t).then((function(t){return new ne(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return Object(o.b)(this,void 0,void 0,(function(){var e,n;return Object(o.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=Mt(t.storage,t._location,St()),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype.updateMetadata=function(t){return Jt(this._delegate,t)},t.prototype.getDownloadURL=function(){return Xt(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),$t(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw V(t)},t}(),ie=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();var oe=function(){function t(t,e,n,body,r,o,c,h,l,f,d){var v=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=body,this.successCodes_=r.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=c,this.errorCallback_=h,this.progressCallback_=f,this.timeout_=l,this.pool_=d,this.promise_=new Promise((function(t,e){v.resolve_=t,v.reject_=e,v.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,o=t.resolve_,c=t.reject_,h=n.xhr;if(n.wasSuccessCode)try{var f=t.callback_(h,h.getResponseText());void 0!==f?o(f):o()}catch(t){c(t)}else null!==h?((r=D()).serverResponse=h.getResponseText(),t.errorCallback_?c(t.errorCallback_(h,r)):c(r)):n.canceled?c(r=t.appDelete_?U():L()):c(r=new l(_,"Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new se(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,c=null,h=!1,l=0;function f(){return 2===l}var d=!1;function v(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];d||(d=!0,e.apply(null,t))}function y(e){c=setTimeout((function(){c=null,t(m,f())}),e)}function m(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!d)if(t)v.call.apply(v,Object(o.g)([null,t],e));else{var c,m=f()||h;if(m)v.call.apply(v,Object(o.g)([null,t],e));else r<64&&(r*=2),1===l?(l=2,c=0):c=1e3*(r+Math.random()),y(c)}}var _=!1;function w(t){_||(_=!0,d||(null!==c?(t||(l=2),clearTimeout(c),y(0)):t||(l=1)))}return y(0),setTimeout((function(){h=!0,w(!0)}),n),w}((function(e,n){if(n)e(!1,new se(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(o),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(o),t.pendingXhr_=null;var r=(n=n).getErrorCode()===J.NO_ERROR,c=n.getStatus();if(r&&!t.isRetryStatusCode_(c)){var h=-1!==t.successCodes_.indexOf(c);e(!0,new se(h,n))}else{var l=n.getErrorCode()===J.ABORT;e(!1,new se(!1,null,l))}}))}function o(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),se=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function ae(t,e,n,o){var c=Et(t.urlParams),h=t.url+c,l=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(l,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(l,n),function(t){var e=void 0!==r.a?r.a.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(l),new oe(h,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o)}function ue(path){return/^[A-Za-z]+:\/\//.test(path)}function ce(t,path){if(t instanceof pe){var e=t;if(null==e._bucket)throw new l(T,"No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var n=new Gt(e,e._bucket);return null!=path?ce(n,path):n}if(void 0!==path){if(path.includes(".."))throw F('`path` param cannot contain ".."');return Zt(t,path)}return t}function he(t,e){if(e&&ue(e)){if(t instanceof pe)return new Gt(t,e);throw F("To use ref(service, url), the first argument must be a Storage instance.")}return ce(t,e)}var le,fe,pe=function(){function t(t,e,n,r){var o,c;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?mt.makeFromBucketSpec(r):(o=this.app.options,null==(c=null==o?void 0:o.storageBucket)?null:mt.makeFromBucketSpec(c))}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(time){pt("time",0,Number.POSITIVE_INFINITY,time),this._maxUploadRetryTime=time},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(time){pt("time",0,Number.POSITIVE_INFINITY,time),this._maxOperationRetryTime=time},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return Object(o.b)(this,void 0,void 0,(function(){var t,e;return Object(o.d)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new Gt(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new ie(U());var r=ae(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}(),de=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(path){if(ue(path))throw F("ref() expected a child path but got a URL, use refFromURL instead.");return new re(he(this._delegate,path),this)},t.prototype.refFromURL=function(t){if(!ue(t))throw F("refFromURL() expected a full URL but got a child path, use ref() instead.");try{mt.makeFromUrl(t)}catch(t){throw F("refFromUrl() expected a valid full URL but got an invalid one.")}return new re(he(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(time){this._delegate.maxUploadRetryTime=time},t.prototype.setMaxOperationRetryTime=function(time){this._delegate.maxOperationRetryTime=time},t}();function ve(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new de(n,new pe(n,r,new ct,e))}le=r.a,fe={TaskState:st,TaskEvent:X,StringFormat:K,Storage:pe,Reference:re},le.INTERNAL.registerComponent(new h.a("storage",ve,"PUBLIC").setServiceProps(fe).setMultipleInstances(!0)),le.registerVersion("@firebase/storage","0.4.2")},153:function(t,e,n){"use strict";e.a=function(t,e){return e=e||{},new Promise((function(n,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(t){return i[t.toLowerCase()]},has:function(t){return t.toLowerCase()in i}}}};for(var c in s.open(e.method||"get",t,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){o.push(e=e.toLowerCase()),u.push([e,n]),i[e]=i[e]?i[e]+","+n:n})),n(a())},s.onerror=r,s.withCredentials="include"==e.credentials,e.headers)s.setRequestHeader(c,e.headers[c]);s.send(e.body||null)}))}},154:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},155:function(t,e,n){"use strict";function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return o}))},157:function(t,e,n){"use strict";var r=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===o}(t)}(t)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function c(t,e){return!1!==e.clone&&e.isMergeableObject(t)?v((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function h(t,source,e){return t.concat(source).map((function(element){return c(element,e)}))}function l(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(symbol){return t.propertyIsEnumerable(symbol)})):[]}(t))}function f(object,t){try{return t in object}catch(t){return!1}}function d(t,source,e){var n={};return e.isMergeableObject(t)&&l(t).forEach((function(r){n[r]=c(t[r],e)})),l(source).forEach((function(r){(function(t,e){return f(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,r)||(f(t,r)&&e.isMergeableObject(source[r])?n[r]=function(t,e){if(!e.customMerge)return v;var n=e.customMerge(t);return"function"==typeof n?n:v}(r,e)(t[r],source[r],e):n[r]=c(source[r],e))})),n}function v(t,source,e){(e=e||{}).arrayMerge=e.arrayMerge||h,e.isMergeableObject=e.isMergeableObject||r,e.cloneUnlessOtherwiseSpecified=c;var n=Array.isArray(source);return n===Array.isArray(t)?n?e.arrayMerge(t,source,e):d(t,source,e):c(source,e)}v.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return v(t,n,e)}),{})};var y=v;t.exports=y},158:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return T}));var r=n(23),o="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};var c=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){!function(e){var n=function(t,e,r){if(!f(e)||v(e)||y(e)||m(e)||l(e))return e;var output,i=0,o=0;if(d(e))for(output=[],o=e.length;i<o;i++)output.push(n(t,e[i],r));else for(var c in output={},e)Object.prototype.hasOwnProperty.call(e,c)&&(output[t(c,r)]=n(t,e[c],r));return output},r=function(t){return _(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))).substr(0,1).toLowerCase()+t.substr(1)},o=function(t){var e=r(t);return e.substr(0,1).toUpperCase()+e.substr(1)},c=function(t,e){return function(t,e){var n=(e=e||{}).separator||"_",r=e.split||/(?=[A-Z])/;return t.split(r).join(n)}(t,e).toLowerCase()},h=Object.prototype.toString,l=function(t){return"function"==typeof t},f=function(t){return t===Object(t)},d=function(t){return"[object Array]"==h.call(t)},v=function(t){return"[object Date]"==h.call(t)},y=function(t){return"[object RegExp]"==h.call(t)},m=function(t){return"[object Boolean]"==h.call(t)},_=function(t){return(t-=0)==t},w=function(t,e){var n=e&&"process"in e?e.process:e;return"function"!=typeof n?t:function(e,r){return n(e,t,r)}},E={camelize:r,decamelize:c,pascalize:o,depascalize:c,camelizeKeys:function(object,t){return n(w(r,t),object)},decamelizeKeys:function(object,t){return n(w(c,t),object,t)},pascalizeKeys:function(object,t){return n(w(o,t),object)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=E:e.humps=E}(o)})),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},f=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var e in source)Object.prototype.hasOwnProperty.call(source,e)&&(t[e]=source[e])}return t},d=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n};function v(style){return style.split(";").map((function(s){return s.trim()})).filter((function(s){return s})).reduce((function(t,e){var i=e.indexOf(":"),n=c.camelize(e.slice(0,i)),r=e.slice(i+1).trim();return t[n]=r,t}),{})}function y(t){return t.split(/\s+/).reduce((function(t,e){return t[e]=!0,t}),{})}function m(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return Array.isArray(e)?t=t.concat(e):t.push(e),t}),[])}function _(t,element){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},data=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=(element.children||[]).map(_.bind(null,t)),r=Object.keys(element.attributes||{}).reduce((function(t,e){var n=element.attributes[e];switch(e){case"class":t.class=y(n);break;case"style":t.style=v(n);break;default:t.attrs[e]=n}return t}),{class:{},style:{},attrs:{}}),o=data.class,c=void 0===o?{}:o,h=data.style,l=void 0===h?{}:h,w=data.attrs,E=void 0===w?{}:w,I=d(data,["class","style","attrs"]);return"string"==typeof element?element:t(element.tag,f({class:m(r.class,c),style:f({},r.style,l),attrs:f({},r.attrs,E)},I,{props:e}),n)}var w=!1;try{w=!0}catch(t){}function E(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?l({},t,e):{}}function I(t){return r.d.icon?r.d.icon(t):null===t?null:"object"===(void 0===t?"undefined":h(t))&&t.prefix&&t.iconName?t:Array.isArray(t)&&2===t.length?{prefix:t[0],iconName:t[1]}:"string"==typeof t?{prefix:"fas",iconName:t}:void 0}var T={name:"FontAwesomeIcon",functional:!0,props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:String,default:null,validator:function(t){return["horizontal","vertical","both"].indexOf(t)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(t){return["right","left"].indexOf(t)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(t){return[90,180,270].indexOf(parseInt(t,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(t){return["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(t)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},inverse:{type:Boolean,default:!1}},render:function(t,e){var n=e.props,o=n.icon,c=n.mask,symbol=n.symbol,title=n.title,h=I(o),d=E("classes",function(t){var e,n=(e={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip-horizontal":"horizontal"===t.flip||"both"===t.flip,"fa-flip-vertical":"vertical"===t.flip||"both"===t.flip},l(e,"fa-"+t.size,null!==t.size),l(e,"fa-rotate-"+t.rotation,null!==t.rotation),l(e,"fa-pull-"+t.pull,null!==t.pull),l(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(n).map((function(t){return n[t]?t:null})).filter((function(t){return t}))}(n)),v=E("transform","string"==typeof n.transform?r.d.transform(n.transform):n.transform),mask=E("mask",I(c)),y=Object(r.b)(h,f({},d,v,mask,{symbol:symbol,title:title}));if(!y)return function(){var t;!w&&console&&"function"==typeof console.error&&(t=console).error.apply(t,arguments)}("Could not find one or more icon(s)",h,mask);var m=y.abstract;return _.bind(null,t)(m[0],{},e.data)}};Boolean,Boolean}).call(this,n(18))},159:function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}([function(t,e,n){var i=n(6);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),(0,n(3).default)("6223ff68",i,!0,{})},function(t,e,n){var i=n(8);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),(0,n(3).default)("27f0e51f",i,!0,{})},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,r=t[1]||"",i=t[3];if(!i)return r;if(e&&"function"==typeof btoa){var a=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),o=i.sources.map((function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"}));return[r].concat(o).concat([a]).join("\n")}return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},a=0;a<this.length;a++){var r=this[a][0];"number"==typeof r&&(i[r]=!0)}for(a=0;a<t.length;a++){var o=t[a];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(t,e,n){"use strict";function i(t,e){for(var n=[],i={},a=0;a<e.length;a++){var r=e[a],o=r[0],s={id:t+":"+a,css:r[1],media:r[2],sourceMap:r[3]};i[o]?i[o].parts.push(s):n.push(i[o]={id:o,parts:[s]})}return n}n.r(e),n.d(e,"default",(function(){return f}));var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},o=a&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,h=!1,l=function(){},u=null,p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t,e,n,a){h=n,u=a||{};var o=i(t,e);return b(o),function(e){for(var n=[],a=0;a<o.length;a++){var s=o[a];(c=r[s.id]).refs--,n.push(c)}for(e?b(o=i(t,e)):o=[],a=0;a<n.length;a++){var c;if(0===(c=n[a]).refs){for(var h=0;h<c.parts.length;h++)c.parts[h]();delete r[c.id]}}}}function b(t){for(var e=0;e<t.length;e++){var n=t[e],i=r[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(v(n.parts[a]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var o=[];for(a=0;a<n.parts.length;a++)o.push(v(n.parts[a]));r[n.id]={id:n.id,refs:1,parts:o}}}}function d(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function v(t){var e,n,i=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(i){if(h)return l;i.parentNode.removeChild(i)}if(p){var a=c++;i=s||(s=d()),e=m.bind(null,i,a,!1),n=m.bind(null,i,a,!0)}else i=d(),e=_.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}var g,y=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function m(t,e,n,i){var a=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=y(e,a);else{var r=document.createTextNode(a),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(r,o[e]):t.appendChild(r)}}function _(t,e){var n=e.css,i=e.media,a=e.sourceMap;if(i&&t.setAttribute("media",i),u.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e.default=a.a},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,'.loading-wave-dots[data-v-46b20d22]{position:relative}.loading-wave-dots[data-v-46b20d22] .wave-item{position:absolute;top:50%;left:50%;display:inline-block;margin-top:-4px;width:8px;height:8px;border-radius:50%;-webkit-animation:loading-wave-dots-data-v-46b20d22 linear 2.8s infinite;animation:loading-wave-dots-data-v-46b20d22 linear 2.8s infinite}.loading-wave-dots[data-v-46b20d22] .wave-item:first-child{margin-left:-36px}.loading-wave-dots[data-v-46b20d22] .wave-item:nth-child(2){margin-left:-20px;-webkit-animation-delay:.14s;animation-delay:.14s}.loading-wave-dots[data-v-46b20d22] .wave-item:nth-child(3){margin-left:-4px;-webkit-animation-delay:.28s;animation-delay:.28s}.loading-wave-dots[data-v-46b20d22] .wave-item:nth-child(4){margin-left:12px;-webkit-animation-delay:.42s;animation-delay:.42s}.loading-wave-dots[data-v-46b20d22] .wave-item:last-child{margin-left:28px;-webkit-animation-delay:.56s;animation-delay:.56s}@-webkit-keyframes loading-wave-dots-data-v-46b20d22{0%{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}10%{-webkit-transform:translateY(-6px);transform:translateY(-6px);background:#999}20%{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}to{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}}@keyframes loading-wave-dots-data-v-46b20d22{0%{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}10%{-webkit-transform:translateY(-6px);transform:translateY(-6px);background:#999}20%{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}to{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}}.loading-circles[data-v-46b20d22] .circle-item{width:5px;height:5px;-webkit-animation:loading-circles-data-v-46b20d22 linear .75s infinite;animation:loading-circles-data-v-46b20d22 linear .75s infinite}.loading-circles[data-v-46b20d22] .circle-item:first-child{margin-top:-14.5px;margin-left:-2.5px}.loading-circles[data-v-46b20d22] .circle-item:nth-child(2){margin-top:-11.26px;margin-left:6.26px}.loading-circles[data-v-46b20d22] .circle-item:nth-child(3){margin-top:-2.5px;margin-left:9.5px}.loading-circles[data-v-46b20d22] .circle-item:nth-child(4){margin-top:6.26px;margin-left:6.26px}.loading-circles[data-v-46b20d22] .circle-item:nth-child(5){margin-top:9.5px;margin-left:-2.5px}.loading-circles[data-v-46b20d22] .circle-item:nth-child(6){margin-top:6.26px;margin-left:-11.26px}.loading-circles[data-v-46b20d22] .circle-item:nth-child(7){margin-top:-2.5px;margin-left:-14.5px}.loading-circles[data-v-46b20d22] .circle-item:last-child{margin-top:-11.26px;margin-left:-11.26px}@-webkit-keyframes loading-circles-data-v-46b20d22{0%{background:#dfdfdf}90%{background:#505050}to{background:#dfdfdf}}@keyframes loading-circles-data-v-46b20d22{0%{background:#dfdfdf}90%{background:#505050}to{background:#dfdfdf}}.loading-bubbles[data-v-46b20d22] .bubble-item{background:#666;-webkit-animation:loading-bubbles-data-v-46b20d22 linear .75s infinite;animation:loading-bubbles-data-v-46b20d22 linear .75s infinite}.loading-bubbles[data-v-46b20d22] .bubble-item:first-child{margin-top:-12.5px;margin-left:-.5px}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(2){margin-top:-9.26px;margin-left:8.26px}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(3){margin-top:-.5px;margin-left:11.5px}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(4){margin-top:8.26px;margin-left:8.26px}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(5){margin-top:11.5px;margin-left:-.5px}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(6){margin-top:8.26px;margin-left:-9.26px}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(7){margin-top:-.5px;margin-left:-12.5px}.loading-bubbles[data-v-46b20d22] .bubble-item:last-child{margin-top:-9.26px;margin-left:-9.26px}@-webkit-keyframes loading-bubbles-data-v-46b20d22{0%{width:1px;height:1px;box-shadow:0 0 0 3px #666}90%{width:1px;height:1px;box-shadow:0 0 0 0 #666}to{width:1px;height:1px;box-shadow:0 0 0 3px #666}}@keyframes loading-bubbles-data-v-46b20d22{0%{width:1px;height:1px;box-shadow:0 0 0 3px #666}90%{width:1px;height:1px;box-shadow:0 0 0 0 #666}to{width:1px;height:1px;box-shadow:0 0 0 3px #666}}.loading-default[data-v-46b20d22]{position:relative;border:1px solid #999;-webkit-animation:loading-rotating-data-v-46b20d22 ease 1.5s infinite;animation:loading-rotating-data-v-46b20d22 ease 1.5s infinite}.loading-default[data-v-46b20d22]:before{content:"";position:absolute;display:block;top:0;left:50%;margin-top:-3px;margin-left:-3px;width:6px;height:6px;background-color:#999;border-radius:50%}.loading-spiral[data-v-46b20d22]{border:2px solid #777;border-right-color:transparent;-webkit-animation:loading-rotating-data-v-46b20d22 linear .85s infinite;animation:loading-rotating-data-v-46b20d22 linear .85s infinite}@-webkit-keyframes loading-rotating-data-v-46b20d22{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loading-rotating-data-v-46b20d22{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.loading-bubbles[data-v-46b20d22],.loading-circles[data-v-46b20d22]{position:relative}.loading-bubbles[data-v-46b20d22] .bubble-item,.loading-circles[data-v-46b20d22] .circle-item{position:absolute;top:50%;left:50%;display:inline-block;border-radius:50%}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(2),.loading-circles[data-v-46b20d22] .circle-item:nth-child(2){-webkit-animation-delay:93ms;animation-delay:93ms}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(3),.loading-circles[data-v-46b20d22] .circle-item:nth-child(3){-webkit-animation-delay:.186s;animation-delay:.186s}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(4),.loading-circles[data-v-46b20d22] .circle-item:nth-child(4){-webkit-animation-delay:.279s;animation-delay:.279s}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(5),.loading-circles[data-v-46b20d22] .circle-item:nth-child(5){-webkit-animation-delay:.372s;animation-delay:.372s}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(6),.loading-circles[data-v-46b20d22] .circle-item:nth-child(6){-webkit-animation-delay:.465s;animation-delay:.465s}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(7),.loading-circles[data-v-46b20d22] .circle-item:nth-child(7){-webkit-animation-delay:.558s;animation-delay:.558s}.loading-bubbles[data-v-46b20d22] .bubble-item:last-child,.loading-circles[data-v-46b20d22] .circle-item:last-child{-webkit-animation-delay:.651s;animation-delay:.651s}',""])},function(t,e,n){"use strict";n.r(e);var i=n(1),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e.default=a.a},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,".infinite-loading-container[data-v-644ea9c9]{clear:both;text-align:center}.infinite-loading-container[data-v-644ea9c9] [class^=loading-]{display:inline-block;margin:5px 0;width:28px;height:28px;font-size:28px;line-height:28px;border-radius:50%}.btn-try-infinite[data-v-644ea9c9]{margin-top:5px;padding:5px 10px;color:#999;font-size:14px;line-height:1;background:transparent;border:1px solid #ccc;border-radius:3px;outline:none;cursor:pointer}.btn-try-infinite[data-v-644ea9c9]:not(:active):hover{opacity:.8}",""])},function(t,e,n){"use strict";n.r(e);var i={throttleLimit:50,loopCheckTimeout:1e3,loopCheckMaxCalls:10},a=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch(t){}return t}(),r={STATE_CHANGER:["emit `loaded` and `complete` event through component instance of `$refs` may cause error, so it will be deprecated soon, please use the `$state` argument instead (`$state` just the special `$event` variable):","\ntemplate:",'<infinite-loading @infinite="infiniteHandler"></infinite-loading>',"\nscript:\n...\ninfiniteHandler($state) {\n  ajax('https://www.example.com/api/news')\n    .then((res) => {\n      if (res.data.length) {\n        $state.loaded();\n      } else {\n        $state.complete();\n      }\n    });\n}\n...","","more details: https://github.com/PeachScript/vue-infinite-loading/issues/57#issuecomment-324370549"].join("\n"),INFINITE_EVENT:"`:on-infinite` property will be deprecated soon, please use `@infinite` event instead.",IDENTIFIER:"the `reset` event will be deprecated soon, please reset this component by change the `identifier` property."},o={INFINITE_LOOP:["executed the callback function more than ".concat(i.loopCheckMaxCalls," times for a short time, it looks like searched a wrong scroll wrapper that doest not has fixed height or maximum height, please check it. If you want to force to set a element as scroll wrapper ranther than automatic searching, you can do this:"),'\n\x3c!-- add a special attribute for the real scroll wrapper --\x3e\n<div infinite-wrapper>\n  ...\n  \x3c!-- set force-use-infinite-wrapper --\x3e\n  <infinite-loading force-use-infinite-wrapper></infinite-loading>\n</div>\nor\n<div class="infinite-wrapper">\n  ...\n  \x3c!-- set force-use-infinite-wrapper as css selector of the real scroll wrapper --\x3e\n  <infinite-loading force-use-infinite-wrapper=".infinite-wrapper"></infinite-loading>\n</div>\n    ',"more details: https://github.com/PeachScript/vue-infinite-loading/issues/55#issuecomment-316934169"].join("\n")},s={READY:0,LOADING:1,COMPLETE:2,ERROR:3},c={color:"#666",fontSize:"14px",padding:"10px 0"},h={mode:"development",props:{spinner:"default",distance:100,forceUseInfiniteWrapper:!1},system:i,slots:{noResults:"No results :(",noMore:"No more data :)",error:"Opps, something went wrong :(",errorBtnText:"Retry",spinner:""},WARNINGS:r,ERRORS:o,STATUS:s},l=n(4),u=n.n(l),p={BUBBLES:{render:function(t){return t("span",{attrs:{class:"loading-bubbles"}},Array.apply(Array,Array(8)).map((function(){return t("span",{attrs:{class:"bubble-item"}})})))}},CIRCLES:{render:function(t){return t("span",{attrs:{class:"loading-circles"}},Array.apply(Array,Array(8)).map((function(){return t("span",{attrs:{class:"circle-item"}})})))}},DEFAULT:{render:function(t){return t("i",{attrs:{class:"loading-default"}})}},SPIRAL:{render:function(t){return t("i",{attrs:{class:"loading-spiral"}})}},WAVEDOTS:{render:function(t){return t("span",{attrs:{class:"loading-wave-dots"}},Array.apply(Array,Array(5)).map((function(){return t("span",{attrs:{class:"wave-item"}})})))}}};function f(t,e,n,i,a,r,o,s){var c,h="function"==typeof t?t.options:t;if(e&&(h.render=e,h.staticRenderFns=n,h._compiled=!0),i&&(h.functional=!0),r&&(h._scopeId="data-v-"+r),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=c):a&&(c=s?function(){a.call(this,this.$root.$options.shadowRoot)}:a),c)if(h.functional){h._injectStyles=c;var l=h.render;h.render=function(t,e){return c.call(e),l(t,e)}}else{var u=h.beforeCreate;h.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:h}}var b=f({name:"Spinner",computed:{spinnerView:function(){return p[(this.$attrs.spinner||"").toUpperCase()]||this.spinnerInConfig},spinnerInConfig:function(){return h.slots.spinner&&"string"==typeof h.slots.spinner?{render:function(){return this._v(h.slots.spinner)}}:"object"===u()(h.slots.spinner)?h.slots.spinner:p[h.props.spinner.toUpperCase()]||p.DEFAULT}}},(function(){var t=this.$createElement;return(this._self._c||t)(this.spinnerView,{tag:"component"})}),[],!1,(function(t){var e=n(5);e.__inject__&&e.__inject__(t)}),"46b20d22",null).exports;function d(t){"production"!==h.mode&&console.warn("[Vue-infinite-loading warn]: ".concat(t))}var g={timers:[],caches:[],throttle:function(t){var e=this;-1===this.caches.indexOf(t)&&(this.caches.push(t),this.timers.push(setTimeout((function(){t(),e.caches.splice(e.caches.indexOf(t),1),e.timers.shift()}),h.system.throttleLimit)))},reset:function(){this.timers.forEach((function(t){clearTimeout(t)})),this.timers.length=0,this.caches=[]}},v={isChecked:!1,timer:null,times:0,track:function(){var t=this;this.times+=1,clearTimeout(this.timer),this.timer=setTimeout((function(){t.isChecked=!0}),h.system.loopCheckTimeout),this.times>h.system.loopCheckMaxCalls&&(function(t){console.error("[Vue-infinite-loading error]: ".concat(t))}(o.INFINITE_LOOP),this.isChecked=!0)}},y={key:"_infiniteScrollHeight",getScrollElm:function(t){return t===window?document.documentElement:t},save:function(t){var e=this.getScrollElm(t);e[this.key]=e.scrollHeight},restore:function(t){var e=this.getScrollElm(t);"number"==typeof e[this.key]&&(e.scrollTop=e.scrollHeight-e[this.key]+e.scrollTop),this.remove(e)},remove:function(t){void 0!==t[this.key]&&delete t[this.key]}};function m(t){return t.offsetWidth+t.offsetHeight>0}var _=f({name:"InfiniteLoading",data:function(){return{scrollParent:null,scrollHandler:null,isFirstLoad:!0,status:s.READY,slots:h.slots}},components:{Spinner:b},computed:{isShowSpinner:function(){return this.status===s.LOADING},isShowError:function(){return this.status===s.ERROR},isShowNoResults:function(){return this.status===s.COMPLETE&&this.isFirstLoad},isShowNoMore:function(){return this.status===s.COMPLETE&&!this.isFirstLoad},slotStyles:function(){var t=this,e={};return Object.keys(h.slots).forEach((function(n){var i=function(t){return t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())}))}(n);(!t.$slots[i]&&!h.slots[n].render||t.$slots[i]&&!t.$slots[i][0].tag)&&(e[n]=c)})),e}},props:{distance:{type:Number,default:h.props.distance},spinner:String,direction:{type:String,default:"bottom"},forceUseInfiniteWrapper:{type:[Boolean,String],default:h.props.forceUseInfiniteWrapper},identifier:{default:+new Date},onInfinite:Function},watch:{identifier:function(){this.stateChanger.reset()}},mounted:function(){var t=this;this.$watch("forceUseInfiniteWrapper",(function(){t.scrollParent=t.getScrollParent()}),{immediate:!0}),this.scrollHandler=function(e){t.status===s.READY&&(e&&e.constructor===Event&&m(t.$el)?g.throttle(t.attemptLoad):t.attemptLoad())},setTimeout((function(){t.scrollHandler(),t.scrollParent.addEventListener("scroll",t.scrollHandler,a)}),1),this.$on("$InfiniteLoading:loaded",(function(e){t.isFirstLoad=!1,"top"===t.direction&&t.$nextTick((function(){y.restore(t.scrollParent)})),t.status===s.LOADING&&t.$nextTick(t.attemptLoad.bind(null,!0)),e&&e.target===t||d(r.STATE_CHANGER)})),this.$on("$InfiniteLoading:complete",(function(e){t.status=s.COMPLETE,t.$nextTick((function(){t.$forceUpdate()})),t.scrollParent.removeEventListener("scroll",t.scrollHandler,a),e&&e.target===t||d(r.STATE_CHANGER)})),this.$on("$InfiniteLoading:reset",(function(e){t.status=s.READY,t.isFirstLoad=!0,y.remove(t.scrollParent),t.scrollParent.addEventListener("scroll",t.scrollHandler,a),setTimeout((function(){g.reset(),t.scrollHandler()}),1),e&&e.target===t||d(r.IDENTIFIER)})),this.stateChanger={loaded:function(){t.$emit("$InfiniteLoading:loaded",{target:t})},complete:function(){t.$emit("$InfiniteLoading:complete",{target:t})},reset:function(){t.$emit("$InfiniteLoading:reset",{target:t})},error:function(){t.status=s.ERROR,g.reset()}},this.onInfinite&&d(r.INFINITE_EVENT)},deactivated:function(){this.status===s.LOADING&&(this.status=s.READY),this.scrollParent.removeEventListener("scroll",this.scrollHandler,a)},activated:function(){this.scrollParent.addEventListener("scroll",this.scrollHandler,a)},methods:{attemptLoad:function(t){var e=this;this.status!==s.COMPLETE&&m(this.$el)&&this.getCurrentDistance()<=this.distance?(this.status=s.LOADING,"top"===this.direction&&this.$nextTick((function(){y.save(e.scrollParent)})),"function"==typeof this.onInfinite?this.onInfinite.call(null,this.stateChanger):this.$emit("infinite",this.stateChanger),!t||this.forceUseInfiniteWrapper||v.isChecked||v.track()):this.status===s.LOADING&&(this.status=s.READY)},getCurrentDistance:function(){return"top"===this.direction?"number"==typeof this.scrollParent.scrollTop?this.scrollParent.scrollTop:this.scrollParent.pageYOffset:this.$el.getBoundingClientRect().top-(this.scrollParent===window?window.innerHeight:this.scrollParent.getBoundingClientRect().bottom)},getScrollParent:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$el;return"string"==typeof this.forceUseInfiniteWrapper&&(t=document.querySelector(this.forceUseInfiniteWrapper)),t||("BODY"===e.tagName?t=window:(!this.forceUseInfiniteWrapper&&["scroll","auto"].indexOf(getComputedStyle(e).overflowY)>-1||e.hasAttribute("infinite-wrapper")||e.hasAttribute("data-infinite-wrapper"))&&(t=e)),t||this.getScrollParent(e.parentNode)}},destroyed:function(){!this.status!==s.COMPLETE&&(g.reset(),y.remove(this.scrollParent),this.scrollParent.removeEventListener("scroll",this.scrollHandler,a))}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"infinite-loading-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowSpinner,expression:"isShowSpinner"}],staticClass:"infinite-status-prompt",style:t.slotStyles.spinner},[t._t("spinner",[n("spinner",{attrs:{spinner:t.spinner}})])],2),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowNoResults,expression:"isShowNoResults"}],staticClass:"infinite-status-prompt",style:t.slotStyles.noResults},[t._t("no-results",[t.slots.noResults.render?n(t.slots.noResults,{tag:"component"}):[t._v(t._s(t.slots.noResults))]])],2),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowNoMore,expression:"isShowNoMore"}],staticClass:"infinite-status-prompt",style:t.slotStyles.noMore},[t._t("no-more",[t.slots.noMore.render?n(t.slots.noMore,{tag:"component"}):[t._v(t._s(t.slots.noMore))]])],2),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowError,expression:"isShowError"}],staticClass:"infinite-status-prompt",style:t.slotStyles.error},[t._t("error",[t.slots.error.render?n(t.slots.error,{tag:"component",attrs:{trigger:t.attemptLoad}}):[t._v("\n        "+t._s(t.slots.error)+"\n        "),n("br"),t._v(" "),n("button",{staticClass:"btn-try-infinite",domProps:{textContent:t._s(t.slots.errorBtnText)},on:{click:t.attemptLoad}})]],{trigger:t.attemptLoad})],2)])}),[],!1,(function(t){var e=n(7);e.__inject__&&e.__inject__(t)}),"644ea9c9",null).exports;function w(t){h.mode=t.config.productionTip?"development":"production"}Object.defineProperty(_,"install",{configurable:!1,enumerable:!1,value:function(t,e){Object.assign(h.props,e&&e.props),Object.assign(h.slots,e&&e.slots),Object.assign(h.system,e&&e.system),t.component("infinite-loading",_),w(t)}}),"undefined"!=typeof window&&window.Vue&&(window.Vue.component("infinite-loading",_),w(window.Vue)),e.default=_}])},162:function(t,e,n){(function(t){t.installComponents=function(component,t){var e="function"==typeof component.exports?component.exports.extendOptions:component.options;for(var i in"function"==typeof component.exports&&(e.components=component.exports.options.components),e.components=e.components||{},t)e.components[i]=e.components[i]||t[i];e.functional&&function(component,t){if(component.exports._functionalComponents)return;component.exports._functionalComponents=!0;var e=component.exports.render;component.exports.render=function(n,r){return e(n,Object.assign({},r,{_c:function(e,a,b){return r._c(t[e]||e,a,b)}}))}}(component,e.components)}}).call(this,n(18))},17:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function o(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,r=!1,o=void 0;try{for(var c,h=t[Symbol.iterator]();!(n=(c=h.next()).done)&&(e.push(c.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==h.return||h.return()}finally{if(r)throw o}}return e}}(t,i)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return o}))},2:function(t,e,n){"use strict";var r,o,c=n(0),h=n(1),l=n(6),f=n(5),d=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),v=new h.b("app","Firebase",d),y=((o={})["@firebase/app"]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),m=new f.b("@firebase/app"),_=function(){function t(t,e,n){var r,o,f=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(h.m)(t),this.container=new l.b(e.name),this._addComponent(new l.a("app",(function(){return f}),"PUBLIC"));try{for(var d=Object(c.h)(this.firebase_.INTERNAL.components.values()),v=d.next();!v.done;v=d.next()){var component=v.value;this._addComponent(component)}}catch(t){r={error:t}}finally{try{v&&!v.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(component){try{this.container.addComponent(component)}catch(t){m.debug("Component "+component.name+" failed to register with FirebaseApp "+this.name,t)}},t.prototype._addOrOverwriteComponent=function(component){this.container.addOrOverwriteComponent(component)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw v.create("app-deleted",{appName:this.name_})},t}();_.prototype.name&&_.prototype.options||_.prototype.delete||console.log("dc");var w=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,o){void 0===o&&(o={});if("object"!=typeof o||null===o){o={name:o}}var c=o;void 0===c.name&&(c.name="[DEFAULT]");var l=c.name;if("string"!=typeof l||!l)throw v.create("bad-app-name",{appName:String(l)});if(Object(h.k)(e,l))throw v.create("duplicate-app",{appName:l});var f=new t(n,c,r);return e[l]=f,f},app:o,registerVersion:function(t,e,n){var r,o=null!==(r=y[t])&&void 0!==r?r:t;n&&(o+="-"+n);var c=o.match(/\s|\//),h=e.match(/\s|\//);if(c||h){var f=['Unable to register library "'+o+'" with version "'+e+'":'];return c&&f.push('library name "'+o+'" contains illegal characters (whitespace or "/")'),c&&h&&f.push("and"),h&&f.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void m.warn(f.join(" "))}d(new l.a(o+"-version",(function(){return{library:o,version:e}}),"VERSION"))},setLogLevel:f.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw v.create("invalid-log-argument",{appName:name});Object(f.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:d,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function o(t){if(t=t||"[DEFAULT]",!Object(h.k)(e,t))throw v.create("no-app",{appName:t});return e[t]}function d(component){var l,f,d=component.name;if(n.has(d))return m.debug("There were multiple attempts to register component "+d+"."),"PUBLIC"===component.type?r[d]:null;if(n.set(d,component),"PUBLIC"===component.type){var y=function(t){if(void 0===t&&(t=o()),"function"!=typeof t[d])throw v.create("invalid-app-argument",{appName:d});return t[d]()};void 0!==component.serviceProps&&Object(h.n)(y,component.serviceProps),r[d]=y,t.prototype[d]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,d);return n.apply(this,component.multipleInstances?t:[])}}try{for(var _=Object(c.h)(Object.keys(e)),w=_.next();!w.done;w=_.next()){var E=w.value;e[E]._addComponent(component)}}catch(t){l={error:t}}finally{try{w&&!w.done&&(f=_.return)&&f.call(_)}finally{if(l)throw l.error}}return"PUBLIC"===component.type?r[d]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),o.App=t,r}(_);return e.INTERNAL=Object(c.a)(Object(c.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(h.n)(e,t)},createSubscribe:h.l,ErrorFactory:h.b,deepExtend:h.n}),e}(),E=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var component=t.getComponent();return"VERSION"===(null==component?void 0:component.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(h.r)()&&void 0!==self.firebase){m.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var I=self.firebase.SDK_VERSION;I&&I.indexOf("LITE")>=0&&m.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var T=w.initializeApp;w.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(h.y)()&&m.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),T.apply(void 0,t)};var O=w;!function(t,e){t.INTERNAL.registerComponent(new l.a("platform-logger",(function(t){return new E(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.13",e),t.registerVersion("fire-js","")}(O),e.a=O},208:function(t,e,n){"use strict";(function(t){var e=n(2);(function(){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,t){a!=Array.prototype&&a!=Object.prototype&&(a[b]=t.value)};var o=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,a];for(var b=0;b<a.length;++b){var e=a[b];if(e&&e.Math==Math)return e}return globalThis}(this);function c(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function h(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:c(a)}}!function(a,b){if(b){var t=o;a=a.split(".");for(var e=0;e<a.length-1;e++){var n=a[e];n in t||(t[n]={}),t=t[n]}(b=b(e=t[a=a[a.length-1]]))!=e&&null!=b&&r(t,a,{configurable:!0,writable:!0,value:b})}}("Promise",(function(a){function b(g){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{g(t.resolve,t.reject)}catch(e){t.reject(e)}}function t(){this.a=null}function e(g){return g instanceof b?g:new b((function(t){t(g)}))}if(a)return a;t.prototype.b=function(g){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(g)};var n=o.setTimeout;t.prototype.c=function(g){n(g,0)},t.prototype.g=function(){for(;this.a&&this.a.length;){var g=this.a;this.a=[];for(var t=0;t<g.length;++t){var e=g[t];g[t]=null;try{e()}catch(t){this.f(t)}}}this.a=null},t.prototype.f=function(g){this.c((function(){throw g}))},b.prototype.f=function(){function g(p){return function(n){e||(e=!0,p.call(t,n))}}var t=this,e=!1;return{resolve:g(this.v),reject:g(this.g)}},b.prototype.v=function(g){if(g===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.s(g);else{t:switch(typeof g){case"object":var t=null!=g;break t;case"function":t=!0;break t;default:t=!1}t?this.m(g):this.i(g)}},b.prototype.m=function(g){var t=void 0;try{t=g.then}catch(t){return void this.g(t)}"function"==typeof t?this.u(t,g):this.i(g)},b.prototype.g=function(g){this.h(2,g)},b.prototype.i=function(g){this.h(1,g)},b.prototype.h=function(g,t){if(0!=this.b)throw Error("Cannot settle("+g+", "+t+"): Promise already settled in state"+this.b);this.b=g,this.c=t,this.l()},b.prototype.l=function(){if(null!=this.a){for(var g=0;g<this.a.length;++g)r.b(this.a[g]);this.a=null}};var r=new t;return b.prototype.s=function(g){var t=this.f();g.Pa(t.resolve,t.reject)},b.prototype.u=function(g,t){var e=this.f();try{g.call(t,e.resolve,e.reject)}catch(t){e.reject(t)}},b.prototype.then=function(g,t){function e(t,e){return"function"==typeof t?function(e){try{p(t(e))}catch(t){n(t)}}:e}var p,n,r=new b((function(t,e){p=t,n=e}));return this.Pa(e(g,p),e(t,n)),r},b.prototype.catch=function(g){return this.then(void 0,g)},b.prototype.Pa=function(g,t){function e(){switch(p.b){case 1:g(p.c);break;case 2:t(p.c);break;default:throw Error("Unexpected state: "+p.b)}}var p=this;null==this.a?r.b(e):this.a.push(e)},b.resolve=e,b.reject=function(g){return new b((function(t,e){e(g)}))},b.race=function(g){return new b((function(t,n){for(var p=h(g),r=p.next();!r.done;r=p.next())e(r.value).Pa(t,n)}))},b.all=function(g){var t=h(g),n=t.next();return n.done?e([]):new b((function(p,r){function o(t){return function(e){c[t]=e,0==--h&&p(c)}}var c=[],h=0;do{c.push(void 0),h++,e(n.value).Pa(o(c.length-1),r),n=t.next()}while(!n.done)}))},b}));var l=l||{},f=this||self,d=/^[\w+/_-]+[=]{0,2}$/,v=null;function y(a){return(a=a.querySelector&&a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&d.test(a)?a:""}function m(){}function _(a){var b=typeof a;return"object"!=b?b:a?Array.isArray(a)?"array":b:"null"}function w(a){var b=_(a);return"array"==b||"object"==b&&"number"==typeof a.length}function E(a){return"function"==_(a)}function I(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function T(a){return Object.prototype.hasOwnProperty.call(a,O)&&a[O]||(a[O]=++S)}var O="closure_uid_"+(1e9*Math.random()>>>0),S=0;function C(a,b,t){return a.call.apply(a.bind,arguments)}function N(a,b,t){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,e),a.apply(b,t)}}return function(){return a.apply(b,arguments)}}function q(a,b,t){return(q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?C:N).apply(null,arguments)}function k(a,b){var t=Array.prototype.slice.call(arguments,1);return function(){var e=t.slice();return e.push.apply(e,arguments),a.apply(this,e)}}var A=Date.now;function j(a,b){function t(){}t.prototype=b.prototype,a.$a=b.prototype,a.prototype=new t,a.prototype.constructor=a}function P(a){return a}function x(a,b,t){this.code=L+a,this.message=b||M[a]||"",this.a=t||null}function R(a){var b=a&&a.code;return b?new x(b.substring(L.length),a.message,a.serverResponse):null}j(x,Error),x.prototype.w=function(){var a={code:this.code,message:this.message};return this.a&&(a.serverResponse=this.a),a},x.prototype.toJSON=function(){return this.w()};var D,L="auth/",M={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},F={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function U(a){for(var b in F)if(F[b].id===a)return{firebaseEndpoint:(a=F[b]).Sa,secureTokenEndpoint:a.Ya,identityPlatformEndpoint:a.Va};return null}function V(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(t){return!1}}function u(a){if(Error.captureStackTrace)Error.captureStackTrace(this,u);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}function B(a,b){for(var t="",e=(a=a.split("%s")).length-1,n=0;n<e;n++)t+=a[n]+(n<b.length?b[n]:"%s");u.call(this,t+a[e])}function H(a,b){throw new B("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1))}function K(a,b){this.c=a,this.f=b,this.b=0,this.a=null}function z(a,b){a.f(b),100>a.b&&(a.b++,b.next=a.a,a.a=b)}function W(){this.b=this.a=null}D=U("__EID__")?"__EID__":void 0,j(u,Error),u.prototype.name="CustomError",j(B,u),B.prototype.name="AssertionError",K.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var G=new K((function(){return new Y}),(function(a){a.reset()}));function Q(){var a=Ne,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function Y(){this.next=this.b=this.a=null}W.prototype.add=function(a,b){var t=G.get();t.set(a,b),this.b?this.b.next=t:this.a=t,this.b=t},Y.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},Y.prototype.reset=function(){this.next=this.b=this.a=null};var J=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"==typeof a)return"string"!=typeof b||1!=b.length?-1:a.indexOf(b,0);for(var t=0;t<a.length;t++)if(t in a&&a[t]===b)return t;return-1},X=Array.prototype.forEach?function(a,b,t){Array.prototype.forEach.call(a,b,t)}:function(a,b,t){for(var e=a.length,n="string"==typeof a?a.split(""):a,r=0;r<e;r++)r in n&&b.call(t,n[r],r,a)};var $=Array.prototype.filter?function(a,b){return Array.prototype.filter.call(a,b,void 0)}:function(a,b){for(var t=a.length,e=[],n=0,r="string"==typeof a?a.split(""):a,g=0;g<t;g++)if(g in r){var o=r[g];b.call(void 0,o,g,a)&&(e[n++]=o)}return e},Z=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var t=a.length,e=Array(t),n="string"==typeof a?a.split(""):a,r=0;r<t;r++)r in n&&(e[r]=b.call(void 0,n[r],r,a));return e},tt=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var t=a.length,e="string"==typeof a?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a))return!0;return!1};function et(a,b){return 0<=J(a,b)}function nt(a,b){var t;return(t=0<=(b=J(a,b)))&&Array.prototype.splice.call(a,b,1),t}function it(a,b){!function(a,b){for(var t="string"==typeof a?a.split(""):a,e=a.length-1;0<=e;--e)e in t&&b.call(void 0,t[e],e,a)}(a,(function(t,e){b.call(void 0,t,e,a)&&1==Array.prototype.splice.call(a,e,1).length&&0}))}function ot(a){return Array.prototype.concat.apply([],arguments)}function st(a){var b=a.length;if(0<b){for(var t=Array(b),e=0;e<b;e++)t[e]=a[e];return t}return[]}var at,ut=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]},ct=/&/g,ht=/</g,lt=/>/g,ft=/"/g,pt=/'/g,vt=/\x00/g,gt=/[\x00&<>"']/;function yt(a,b){return-1!=a.indexOf(b)}function mt(a,b){return a<b?-1:a>b?1:0}t:{var bt=f.navigator;if(bt){var _t=bt.userAgent;if(_t){at=_t;break t}}at=""}function wt(a){return yt(at,a)}function Et(a,b){for(var t in a)b.call(void 0,a[t],t,a)}function It(a){for(var b in a)return!1;return!0}function Tt(a){var t,b={};for(t in a)b[t]=a[t];return b}var Ot="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function St(a,b){for(var t,e,n=1;n<arguments.length;n++){for(t in e=arguments[n])a[t]=e[t];for(var r=0;r<Ot.length;r++)t=Ot[r],Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}}function Ct(a,b){t:{try{var t=a&&a.ownerDocument,e=t&&(t.defaultView||t.parentWindow);if((e=e||f).Element&&e.Location){var n=e;break t}}catch(t){}n=null}if(n&&void 0!==n[b]&&(!a||!(a instanceof n[b])&&(a instanceof n.Location||a instanceof n.Element))){if(I(a))try{var r=a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a)}catch(t){r="<object could not be stringified>"}else r=void 0===a?"undefined":null===a?"null":typeof a;H("Argument is not a %s (or a non-Element, non-Location mock); got: %s",b,r)}}function Nt(a,b){this.a=a===Pt&&b||"",this.b=jt}function kt(a){return a instanceof Nt&&a.constructor===Nt&&a.b===jt?a.a:(H("expected object of type Const, got '"+a+"'"),"type_error:Const")}Nt.prototype.sa=!0,Nt.prototype.ra=function(){return this.a},Nt.prototype.toString=function(){return"Const{"+this.a+"}"};var At,jt={},Pt={};function xt(){if(void 0===At){var a=null,b=f.trustedTypes;if(b&&b.createPolicy){try{a=b.createPolicy("goog#html",{createHTML:P,createScript:P,createScriptURL:P})}catch(t){f.console&&f.console.error(t.message)}At=a}else At=a}return At}function Rt(a,b){this.a=b===Ut?a:""}function Dt(a){return a instanceof Rt&&a.constructor===Rt?a.a:(H("expected object of type TrustedResourceUrl, got '"+a+"' of type "+_(a)),"type_error:TrustedResourceUrl")}function Lt(a,b){var t=kt(a);if(!Ft.test(t))throw Error("Invalid TrustedResourceUrl format: "+t);return function(a){var b=xt();return new Rt(a=b?b.createScriptURL(a):a,Ut)}(a=t.replace(Mt,(function(e,n){if(!Object.prototype.hasOwnProperty.call(b,n))throw Error('Found marker, "'+n+'", in format string, "'+t+'", but no valid label mapping found in args: '+JSON.stringify(b));return(e=b[n])instanceof Nt?kt(e):encodeURIComponent(String(e))})))}Rt.prototype.sa=!0,Rt.prototype.ra=function(){return this.a.toString()},Rt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Mt=/%{(\w+)}/g,Ft=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ut={};function Vt(a,b){this.a=b===Gt?a:""}function qt(a){return a instanceof Vt&&a.constructor===Vt?a.a:(H("expected object of type SafeUrl, got '"+a+"' of type "+_(a)),"type_error:SafeUrl")}Vt.prototype.sa=!0,Vt.prototype.ra=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Bt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ht=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Kt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function zt(a){if(a instanceof Vt)return a;if(a="object"==typeof a&&a.sa?a.ra():String(a),Kt.test(a))a=new Vt(a,Gt);else{var b=(a=(a=String(a)).replace(/(%0A|%0D)/g,"")).match(Ht);a=b&&Bt.test(b[1])?new Vt(a,Gt):null}return a}function Wt(a){return a instanceof Vt?a:(a="object"==typeof a&&a.sa?a.ra():String(a),Kt.test(a)||(a="about:invalid#zClosurez"),new Vt(a,Gt))}var Gt={},Qt=new Vt("about:invalid#zClosurez",Gt);function Yt(a,b,t){this.a=t===Jt?a:""}Yt.prototype.sa=!0,Yt.prototype.ra=function(){return this.a.toString()},Yt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Jt={};function Xt(a,b,t,e){return a=a instanceof Vt?a:Wt(a),b=b||f,t=t instanceof Nt?kt(t):t||"",b.open(qt(a),t,e,void 0)}function $t(a,b){for(var t=a.split("%s"),e="",n=Array.prototype.slice.call(arguments,1);n.length&&1<t.length;)e+=t.shift()+n.shift();return e+t.join("%s")}function Zt(a){return gt.test(a)&&(-1!=a.indexOf("&")&&(a=a.replace(ct,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(ht,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(lt,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(ft,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(pt,"&#39;")),-1!=a.indexOf("\0")&&(a=a.replace(vt,"&#0;"))),a}function te(a){return te[" "](a),a}te[" "]=m;var ee,a,ne=wt("Opera"),re=wt("Trident")||wt("MSIE"),ie=wt("Edge"),oe=ie||re,se=wt("Gecko")&&!(yt(at.toLowerCase(),"webkit")&&!wt("Edge"))&&!(wt("Trident")||wt("MSIE"))&&!wt("Edge"),ae=yt(at.toLowerCase(),"webkit")&&!wt("Edge");function ue(){var a=f.document;return a?a.documentMode:void 0}t:{var ce="",he=(a=at,se?/rv:([^\);]+)(\)|;)/.exec(a):ie?/Edge\/([\d\.]+)/.exec(a):re?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):ae?/WebKit\/(\S+)/.exec(a):ne?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(he&&(ce=he?he[1]:""),re){var le=ue();if(null!=le&&le>parseFloat(ce)){ee=String(le);break t}}ee=ce}var fe,pe={};function de(a){return function(a,b){var t=pe;return Object.prototype.hasOwnProperty.call(t,a)?t[a]:t[a]=b(a)}(a,(function(){for(var b=0,t=ut(String(ee)).split("."),e=ut(String(a)).split("."),n=Math.max(t.length,e.length),r=0;0==b&&r<n;r++){var g=t[r]||"",o=e[r]||"";do{if(g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==g[0].length&&0==o[0].length)break;b=mt(0==g[1].length?0:parseInt(g[1],10),0==o[1].length?0:parseInt(o[1],10))||mt(0==g[2].length,0==o[2].length)||mt(g[2],o[2]),g=g[3],o=o[3]}while(0==b)}return 0<=b}))}if(f.document&&re){var ve=ue();fe=ve||(parseInt(ee,10)||void 0)}else fe=void 0;var ge=fe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(a){}var ye=!re||9<=Number(ge);function me(a){var b=document;return"string"==typeof a?b.getElementById(a):a}function be(a,b){Et(b,(function(t,e){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==e?a.style.cssText=t:"class"==e?a.className=t:"for"==e?a.htmlFor=t:Ee.hasOwnProperty(e)?a.setAttribute(Ee[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?a.setAttribute(e,t):a[e]=t}))}var _e,we,Ee={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Ie(a,b,t){function e(t){t&&b.appendChild("string"==typeof t?a.createTextNode(t):t)}for(var n=2;n<t.length;n++){var r=t[n];if(!w(r)||I(r)&&0<r.nodeType)e(r);else{t:{if(r&&"number"==typeof r.length){if(I(r)){var g="function"==typeof r.item||"string"==typeof r.item;break t}if(E(r)){g="function"==typeof r.item;break t}}g=!1}X(g?st(r):r,e)}}}function Te(a,b){return b=String(b),"application/xhtml+xml"===a.contentType&&(b=b.toLowerCase()),a.createElement(b)}function Oe(a){f.setTimeout((function(){throw a}),0)}function Se(a,b){we||function(){if(f.Promise&&f.Promise.resolve){var a=f.Promise.resolve(void 0);we=function(){a.then(ke)}}else we=function(){var b=ke;!E(f.setImmediate)||f.Window&&f.Window.prototype&&!wt("Edge")&&f.Window.prototype.setImmediate==f.setImmediate?(_e||(_e=function(){var a=f.MessageChannel;if(void 0===a&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!wt("Presto")&&(a=function(){var t=Te(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var g="callImmediate"+Math.random(),n="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=q((function(t){"*"!=n&&t.origin!=n||t.data!=g||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(g,n)}}}),void 0!==a&&!wt("Trident")&&!wt("MSIE")){var b=new a,t={},e=t;return b.port1.onmessage=function(){if(void 0!==t.next){var e=(t=t.next).Fb;t.Fb=null,e()}},function(t){e.next={Fb:t},e=e.next,b.port2.postMessage(0)}}return function(t){f.setTimeout(t,0)}}()),_e(b)):f.setImmediate(b)}}(),Ce||(we(),Ce=!0),Ne.add(a,b)}var Ce=!1,Ne=new W;function ke(){for(var a;a=Q();){try{a.a.call(a.b)}catch(t){Oe(t)}z(G,a)}Ce=!1}function Ae(a,b){if(this.a=je,this.h=void 0,this.f=this.b=this.c=null,this.g=this.i=!1,a!=m)try{var t=this;a.call(b,(function(e){He(t,Pe,e)}),(function(e){if(!(e instanceof Je))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}He(t,xe,e)}))}catch(t){He(this,xe,t)}}var je=0,Pe=2,xe=3;function Re(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Re.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var De=new K((function(){return new Re}),(function(a){a.reset()}));function Le(a,b,t){var e=De.get();return e.g=a,e.b=b,e.f=t,e}function Me(a){if(a instanceof Ae)return a;var b=new Ae(m);return He(b,Pe,a),b}function Fe(a){return new Ae((function(b,t){t(a)}))}function Ue(a,b,t){Ke(a,b,t,null)||Se(k(b,a))}function Ve(a){return new Ae((function(b){var t=a.length,e=[];if(t)for(var n=function(n,r,p){t--,e[n]=r?{Ob:!0,value:p}:{Ob:!1,reason:p},0==t&&b(e)},r=0;r<a.length;r++)Ue(a[r],k(n,r,!0),k(n,r,!1));else b(e)}))}function qe(a,b){a.b||a.a!=Pe&&a.a!=xe||ze(a),a.f?a.f.next=b:a.b=b,a.f=b}function Be(a,b,t,e){var n=Le(null,null,null);return n.a=new Ae((function(r,g){n.g=b?function(t){try{var n=b.call(e,t);r(n)}catch(t){g(t)}}:r,n.b=t?function(n){try{var o=t.call(e,n);void 0===o&&n instanceof Je?g(n):r(o)}catch(t){g(t)}}:g})),n.a.c=a,qe(a,n),n.a}function He(a,b,t){a.a==je&&(a===t&&(b=xe,t=new TypeError("Promise cannot resolve to itself")),a.a=1,Ke(t,a.Zc,a.$c,a)||(a.h=t,a.a=b,a.c=null,ze(a),b!=xe||t instanceof Je||function(a,b){a.g=!0,Se((function(){a.g&&Ye.call(null,b)}))}(a,t)))}function Ke(a,b,t,e){if(a instanceof Ae)return qe(a,Le(b||m,t||null,e)),!0;if(V(a))return a.then(b,t,e),!0;if(I(a))try{var n=a.then;if(E(n))return function(a,b,t,e,n){function r(t){o||(o=!0,e.call(n,t))}var o=!1;try{b.call(a,(function(e){o||(o=!0,t.call(n,e))}),r)}catch(t){r(t)}}(a,n,b,t,e),!0}catch(n){return t.call(e,n),!0}return!1}function ze(a){a.i||(a.i=!0,Se(a.fc,a))}function We(a){var b=null;return a.b&&(b=a.b,a.b=b.next,b.next=null),a.b||(a.f=null),b}function Ge(a,b,t,e){if(t==xe&&b.b&&!b.c)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Qe(b,t,e);else try{b.c?b.g.call(b.f):Qe(b,t,e)}catch(t){Ye.call(null,t)}z(De,b)}function Qe(a,b,t){b==Pe?a.g.call(a.f,t):a.b&&a.b.call(a.f,t)}Ae.prototype.then=function(a,b,t){return Be(this,E(a)?a:null,E(b)?b:null,t)},Ae.prototype.$goog_Thenable=!0,(n=Ae.prototype).na=function(a,b){return(a=Le(a,a,b)).c=!0,qe(this,a),this},n.o=function(a,b){return Be(this,null,a,b)},n.cancel=function(a){if(this.a==je){var b=new Je(a);Se((function(){!function t(a,b){if(a.a==je)if(a.c){var e=a.c;if(e.b){for(var n=0,r=null,o=null,g=e.b;g&&(g.c||(n++,g.a==a&&(r=g),!(r&&1<n)));g=g.next)r||(o=g);r&&(e.a==je&&1==n?t(e,b):(o?((n=o).next==e.f&&(e.f=n),n.next=n.next.next):We(e),Ge(e,r,xe,b)))}a.c=null}else He(a,xe,b)}(this,b)}),this)}},n.Zc=function(a){this.a=je,He(this,Pe,a)},n.$c=function(a){this.a=je,He(this,xe,a)},n.fc=function(){for(var a;a=We(this);)Ge(this,a,this.a,this.h);this.i=!1};var Ye=Oe;function Je(a){u.call(this,a)}function Xe(){0!=$e&&(Ze[T(this)]=this),this.xa=this.xa,this.oa=this.oa}j(Je,u),Je.prototype.name="cancel";var $e=0,Ze={};function tn(a){if(!a.xa&&(a.xa=!0,a.Da(),0!=$e)){var b=T(a);if(0!=$e&&a.oa&&0<a.oa.length)throw Error(a+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ze[b]}}Xe.prototype.xa=!1,Xe.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var en=Object.freeze||function(a){return a},nn=!re||9<=Number(ge),rn=re&&!de("9"),on=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{f.addEventListener("test",m,b),f.removeEventListener("test",m,b)}catch(t){}return a}();function sn(a,b){this.type=a,this.b=this.target=b,this.defaultPrevented=!1}function an(a,b){if(sn.call(this,a?a.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,a){var t=this.type=a.type,e=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.b=b,b=a.relatedTarget){if(se){t:{try{te(b.nodeName);var n=!0;break t}catch(t){}n=!1}n||(b=null)}}else"mouseover"==t?b=a.fromElement:"mouseout"==t&&(b=a.toElement);this.relatedTarget=b,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:un[a.pointerType]||"",this.a=a,a.defaultPrevented&&this.preventDefault()}}sn.prototype.preventDefault=function(){this.defaultPrevented=!0},j(an,sn);var un=en({2:"touch",3:"pen",4:"mouse"});an.prototype.preventDefault=function(){an.$a.preventDefault.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,rn)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(t){}},an.prototype.g=function(){return this.a};var dd="closure_listenable_"+(1e6*Math.random()|0),cn=0;function hn(a,b,t,e,n){this.listener=a,this.proxy=null,this.src=b,this.type=t,this.capture=!!e,this.Ua=n,this.key=++cn,this.va=this.Oa=!1}function ln(a){a.va=!0,a.listener=null,a.proxy=null,a.src=null,a.Ua=null}function fn(a){this.src=a,this.a={},this.b=0}function pn(a,b){var t=b.type;t in a.a&&nt(a.a[t],b)&&(ln(b),0==a.a[t].length&&(delete a.a[t],a.b--))}function dn(a,b,t,e){for(var n=0;n<a.length;++n){var r=a[n];if(!r.va&&r.listener==b&&r.capture==!!t&&r.Ua==e)return n}return-1}fn.prototype.add=function(a,b,t,e,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var g=dn(a,b,e,n);return-1<g?(b=a[g],t||(b.Oa=!1)):((b=new hn(b,this.src,r,!!e,n)).Oa=t,a.push(b)),b};var vn="closure_lm_"+(1e6*Math.random()|0),gn={};function yn(a,b,t,e,n){if(e&&e.once)bn(a,b,t,e,n);else if(Array.isArray(b))for(var r=0;r<b.length;r++)yn(a,b[r],t,e,n);else t=Nn(t),a&&a[dd]?An(a,b,t,I(e)?!!e.capture:!!e,n):mn(a,b,t,!1,e,n)}function mn(a,b,t,e,n,r){if(!b)throw Error("Invalid event type");var g=I(n)?!!n.capture:!!n,o=Sn(a);if(o||(a[vn]=o=new fn(a)),!(t=o.add(b,t,e,g,r)).proxy){if(e=function(){var a=On,b=nn?function(t){return a.call(b.src,b.listener,t)}:function(t){if(!(t=a.call(b.src,b.listener,t)))return t};return b}(),t.proxy=e,e.src=a,e.listener=t,a.addEventListener)on||(n=g),void 0===n&&(n=!1),a.addEventListener(b.toString(),e,n);else if(a.attachEvent)a.attachEvent(En(b.toString()),e);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(e)}0}}function bn(a,b,t,e,n){if(Array.isArray(b))for(var r=0;r<b.length;r++)bn(a,b[r],t,e,n);else t=Nn(t),a&&a[dd]?jn(a,b,t,I(e)?!!e.capture:!!e,n):mn(a,b,t,!0,e,n)}function _n(a,b,t,e,n){if(Array.isArray(b))for(var r=0;r<b.length;r++)_n(a,b[r],t,e,n);else e=I(e)?!!e.capture:!!e,t=Nn(t),a&&a[dd]?(a=a.v,(b=String(b).toString())in a.a&&(-1<(t=dn(r=a.a[b],t,e,n))&&(ln(r[t]),Array.prototype.splice.call(r,t,1),0==r.length&&(delete a.a[b],a.b--)))):a&&(a=Sn(a))&&(b=a.a[b.toString()],a=-1,b&&(a=dn(b,t,e,n)),(t=-1<a?b[a]:null)&&wn(t))}function wn(a){if("number"!=typeof a&&a&&!a.va){var b=a.src;if(b&&b[dd])pn(b.v,a);else{var t=a.type,e=a.proxy;b.removeEventListener?b.removeEventListener(t,e,a.capture):b.detachEvent?b.detachEvent(En(t),e):b.addListener&&b.removeListener&&b.removeListener(e),(t=Sn(b))?(pn(t,a),0==t.b&&(t.src=null,b[vn]=null)):ln(a)}}}function En(a){return a in gn?gn[a]:gn[a]="on"+a}function In(a,b,t,e){var n=!0;if((a=Sn(a))&&(b=a.a[b.toString()]))for(b=b.concat(),a=0;a<b.length;a++){var r=b[a];r&&r.capture==t&&!r.va&&(r=Tn(r,e),n=n&&!1!==r)}return n}function Tn(a,b){var t=a.listener,e=a.Ua||a.src;return a.Oa&&wn(a),t.call(e,b)}function On(a,b){if(a.va)return!0;if(!nn){if(!b)t:{b=["window","event"];for(var t=f,e=0;e<b.length;e++)if(null==(t=t[b[e]])){b=null;break t}b=t}if(b=new an(e=b,this),t=!0,!(0>e.keyCode||null!=e.returnValue)){t:{var n=!1;if(0==e.keyCode)try{e.keyCode=-1;break t}catch(t){n=!0}(n||null==e.returnValue)&&(e.returnValue=!0)}for(e=[],n=b.b;n;n=n.parentNode)e.push(n);for(a=a.type,n=e.length-1;0<=n;n--){b.b=e[n];var r=In(e[n],a,!0,b);t=t&&r}for(n=0;n<e.length;n++)b.b=e[n],r=In(e[n],a,!1,b),t=t&&r}return t}return Tn(a,new an(b,this))}function Sn(a){return(a=a[vn])instanceof fn?a:null}var Cn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nn(a){return E(a)?a:(a[Cn]||(a[Cn]=function(b){return a.handleEvent(b)}),a[Cn])}function kn(){Xe.call(this),this.v=new fn(this),this.$b=this,this.fb=null}function An(a,b,t,e,n){a.v.add(String(b),t,!1,e,n)}function jn(a,b,t,e,n){a.v.add(String(b),t,!0,e,n)}function Pn(a,b,t,e){if(!(b=a.v.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var g=b[r];if(g&&!g.va&&g.capture==t){var o=g.listener,c=g.Ua||g.src;g.Oa&&pn(a.v,g),n=!1!==o.call(c,e)&&n}}return n&&!e.defaultPrevented}function xn(a,b,t){if(E(a))t&&(a=q(a,t));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=q(a.handleEvent,a)}return 2147483647<Number(b)?-1:f.setTimeout(a,b||0)}function Rn(a){var b=null;return new Ae((function(t,e){-1==(b=xn((function(){t(void 0)}),a))&&e(Error("Failed to schedule timer."))})).o((function(t){throw f.clearTimeout(b),t}))}function Dn(a){if(a.V&&"function"==typeof a.V)return a.V();if("string"==typeof a)return a.split("");if(w(a)){for(var b=[],t=a.length,e=0;e<t;e++)b.push(a[e]);return b}for(e in b=[],t=0,a)b[t++]=a[e];return b}function Ln(a){if(a.Y&&"function"==typeof a.Y)return a.Y();if(!a.V||"function"!=typeof a.V){if(w(a)||"string"==typeof a){var b=[];a=a.length;for(var t=0;t<a;t++)b.push(t);return b}for(var e in b=[],t=0,a)b[t++]=e;return b}}function Mn(a,b){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var e=0;e<t;e+=2)this.set(arguments[e],arguments[e+1])}else if(a)if(a instanceof Mn)for(t=a.Y(),e=0;e<t.length;e++)this.set(t[e],a.get(t[e]));else for(e in a)this.set(e,a[e])}function Fn(a){if(a.c!=a.a.length){for(var b=0,t=0;b<a.a.length;){var e=a.a[b];Un(a.b,e)&&(a.a[t++]=e),b++}a.a.length=t}if(a.c!=a.a.length){var n={};for(t=b=0;b<a.a.length;)Un(n,e=a.a[b])||(a.a[t++]=e,n[e]=1),b++;a.a.length=t}}function Un(a,b){return Object.prototype.hasOwnProperty.call(a,b)}j(kn,Xe),kn.prototype[dd]=!0,kn.prototype.addEventListener=function(a,b,t,e){yn(this,a,b,t,e)},kn.prototype.removeEventListener=function(a,b,t,e){_n(this,a,b,t,e)},kn.prototype.dispatchEvent=function(a){var b,t=this.fb;if(t)for(b=[];t;t=t.fb)b.push(t);t=this.$b;var e=a.type||a;if("string"==typeof a)a=new sn(a,t);else if(a instanceof sn)a.target=a.target||t;else{var n=a;St(a=new sn(e,t),n)}if(n=!0,b)for(var r=b.length-1;0<=r;r--){var g=a.b=b[r];n=Pn(g,e,!0,a)&&n}if(n=Pn(g=a.b=t,e,!0,a)&&n,n=Pn(g,e,!1,a)&&n,b)for(r=0;r<b.length;r++)n=Pn(g=a.b=b[r],e,!1,a)&&n;return n},kn.prototype.Da=function(){if(kn.$a.Da.call(this),this.v){var t,a=this.v;for(t in a.a){for(var e=a.a[t],n=0;n<e.length;n++)ln(e[n]);delete a.a[t],a.b--}}this.fb=null},(n=Mn.prototype).V=function(){Fn(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},n.Y=function(){return Fn(this),this.a.concat()},n.clear=function(){this.b={},this.c=this.a.length=0},n.get=function(a,b){return Un(this.b,a)?this.b[a]:b},n.set=function(a,b){Un(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},n.forEach=function(a,b){for(var t=this.Y(),e=0;e<t.length;e++){var n=t[e],r=this.get(n);a.call(b,r,n,this)}};var Vn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qn(a,b){var t;this.a=this.l=this.f="",this.g=null,this.i=this.c="",this.h=!1,a instanceof qn?(this.h=void 0!==b?b:a.h,Bn(this,a.f),this.l=a.l,this.a=a.a,Hn(this,a.g),this.c=a.c,Kn(this,lr(a.b)),this.i=a.i):a&&(t=String(a).match(Vn))?(this.h=!!b,Bn(this,t[1]||"",!0),this.l=Yn(t[2]||""),this.a=Yn(t[3]||"",!0),Hn(this,t[4]),this.c=Yn(t[5]||"",!0),Kn(this,t[6]||"",!0),this.i=Yn(t[7]||"")):(this.h=!!b,this.b=new ir(null,this.h))}function Bn(a,b,t){a.f=t?Yn(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,""))}function Hn(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.g=b}else a.g=null}function Kn(a,b,t){b instanceof ir?(a.b=b,function(a,b){b&&!a.f&&(or(a),a.c=null,a.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(ar(this,e),cr(this,n,t))}),a)),a.f=b}(a.b,a.h)):(t||(b=Jn(b,nr)),a.b=new ir(b,a.h))}function zn(a,b,t){a.b.set(b,t)}function Wn(a,b){return a.b.get(b)}function Gn(a){return a instanceof qn?new qn(a):new qn(a,void 0)}function Qn(a,b,t,e){var n=new qn(null,void 0);return a&&Bn(n,a),b&&(n.a=b),t&&Hn(n,t),e&&(n.c=e),n}function Yn(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Jn(a,b,t){return"string"==typeof a?(a=encodeURI(a).replace(b,Xn),t&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Xn(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}qn.prototype.toString=function(){var a=[],b=this.f;b&&a.push(Jn(b,$n,!0),":");var t=this.a;return(t||"file"==b)&&(a.push("//"),(b=this.l)&&a.push(Jn(b,$n,!0),"@"),a.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.g)&&a.push(":",String(t))),(t=this.c)&&(this.a&&"/"!=t.charAt(0)&&a.push("/"),a.push(Jn(t,"/"==t.charAt(0)?er:Zn,!0))),(t=this.b.toString())&&a.push("?",t),(t=this.i)&&a.push("#",Jn(t,rr)),a.join("")},qn.prototype.resolve=function(a){var b=new qn(this),t=!!a.f;t?Bn(b,a.f):t=!!a.l,t?b.l=a.l:t=!!a.a,t?b.a=a.a:t=null!=a.g;var e=a.c;if(t)Hn(b,a.g);else if(t=!!a.c){if("/"!=e.charAt(0))if(this.a&&!this.c)e="/"+e;else{var n=b.c.lastIndexOf("/");-1!=n&&(e=b.c.substr(0,n+1)+e)}if(".."==(n=e)||"."==n)e="";else if(yt(n,"./")||yt(n,"/.")){e=0==n.lastIndexOf("/",0),n=n.split("/");for(var r=[],g=0;g<n.length;){var o=n[g++];"."==o?e&&g==n.length&&r.push(""):".."==o?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),e&&g==n.length&&r.push("")):(r.push(o),e=!0)}e=r.join("/")}else e=n}return t?b.c=e:t=""!==a.b.toString(),t?Kn(b,lr(a.b)):t=!!a.i,t&&(b.i=a.i),b};var $n=/[#\/\?@]/g,Zn=/[#\?:]/g,er=/[#\?]/g,nr=/[#\?@]/g,rr=/#/g;function ir(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function or(a){a.a||(a.a=new Mn,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var t=0;t<a.length;t++){var e=a[t].indexOf("="),n=null;if(0<=e){var r=a[t].substring(0,e);n=a[t].substring(e+1)}else r=a[t];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,(function(b,t){a.add(decodeURIComponent(b.replace(/\+/g," ")),t)})))}function sr(a){var b=Ln(a);if(void 0===b)throw Error("Keys are undefined");var t=new ir(null,void 0);a=Dn(a);for(var e=0;e<b.length;e++){var n=b[e],r=a[e];Array.isArray(r)?cr(t,n,r):t.add(n,r)}return t}function ar(a,b){or(a),b=fr(a,b),Un(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,Un((a=a.a).b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Fn(a)))}function ur(a,b){return or(a),b=fr(a,b),Un(a.a.b,b)}function cr(a,b,t){ar(a,b),0<t.length&&(a.c=null,a.a.set(fr(a,b),st(t)),a.b+=t.length)}function lr(a){var b=new ir;return b.c=a.c,a.a&&(b.a=new Mn(a.a),b.b=a.b),b}function fr(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function pr(a){var b=[];return function t(a,b,e){if(null==b)e.push("null");else{if("object"==typeof b){if(Array.isArray(b)){var n=b;b=n.length,e.push("[");for(var r="",o=0;o<b;o++)e.push(r),t(a,n[o],e),r=",";return void e.push("]")}if(!(b instanceof String||b instanceof Number||b instanceof Boolean)){for(n in e.push("{"),r="",b)Object.prototype.hasOwnProperty.call(b,n)&&("function"!=typeof(o=b[n])&&(e.push(r),yr(n,e),e.push(":"),t(a,o,e),r=","));return void e.push("}")}b=b.valueOf()}switch(typeof b){case"string":yr(b,e);break;case"number":e.push(isFinite(b)&&!isNaN(b)?String(b):"null");break;case"boolean":e.push(String(b));break;case"function":e.push("null");break;default:throw Error("Unknown type: "+typeof b)}}}(new dr,a,b),b.join("")}function dr(){}(n=ir.prototype).add=function(a,b){or(this),this.c=null,a=fr(this,a);var t=this.a.get(a);return t||this.a.set(a,t=[]),t.push(b),this.b+=1,this},n.clear=function(){this.a=this.c=null,this.b=0},n.forEach=function(a,b){or(this),this.a.forEach((function(t,e){X(t,(function(t){a.call(b,t,e,this)}),this)}),this)},n.Y=function(){or(this);for(var a=this.a.V(),b=this.a.Y(),t=[],e=0;e<b.length;e++)for(var n=a[e],r=0;r<n.length;r++)t.push(b[e]);return t},n.V=function(a){or(this);var b=[];if("string"==typeof a)ur(this,a)&&(b=ot(b,this.a.get(fr(this,a))));else{a=this.a.V();for(var t=0;t<a.length;t++)b=ot(b,a[t])}return b},n.set=function(a,b){return or(this),this.c=null,ur(this,a=fr(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},n.get=function(a,b){return a&&0<(a=this.V(a)).length?String(a[0]):b},n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.Y(),t=0;t<b.length;t++){var e=b[t],n=encodeURIComponent(String(e));e=this.V(e);for(var r=0;r<e.length;r++){var g=n;""!==e[r]&&(g+="="+encodeURIComponent(String(e[r]))),a.push(g)}}return this.c=a.join("&")};var vr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},gr=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function yr(a,b){b.push('"',a.replace(gr,(function(t){var e=vr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),vr[t]=e),e})),'"')}function mr(){var a=Fr();return re&&!!ge&&11==ge||/Edge\/\d+/.test(a)}function _r(){return f.window&&f.window.location.href||self&&self.location&&self.location.href||""}function wr(a,b){b=b||f.window;var t="about:blank";a&&(t=qt(zt(a)||Qt)),b.location.href=t}function Er(a){return!!((a=(a||Fr()).toLowerCase()).match(/android/)||a.match(/webos/)||a.match(/iphone|ipad|ipod/)||a.match(/blackberry/)||a.match(/windows phone/)||a.match(/iemobile/))}function Ir(a){a=a||f.window;try{a.close()}catch(t){}}function Tr(a,b,t){var e=Math.floor(1e9*Math.random()).toString();b=b||500,t=t||600;var n=(window.screen.availHeight-t)/2,r=(window.screen.availWidth-b)/2;for(g in b={width:b,height:t,top:0<n?n:0,left:0<r?r:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},t=Fr().toLowerCase(),e&&(b.target=e,yt(t,"crios/")&&(b.target="_blank")),Dr(Fr())==xr&&(a=a||"http://localhost",b.scrollbars=!0),t=a||"",(a=b)||(a={}),e=window,b=t instanceof Vt?t:zt(void 0!==t.href?t.href:String(t))||Qt,t=a.target||t.target,n=[],a)switch(g){case"width":case"height":case"top":case"left":n.push(g+"="+a[g]);break;case"target":case"noopener":case"noreferrer":break;default:n.push(g+"="+(a[g]?1:0))}var g=n.join(",");if((wt("iPhone")&&!wt("iPod")&&!wt("iPad")||wt("iPad")||wt("iPod"))&&e.navigator&&e.navigator.standalone&&t&&"_self"!=t?(Ct(g=Te(document,"A"),"HTMLAnchorElement"),b=b instanceof Vt?b:Wt(b),g.href=qt(b),g.setAttribute("target",t),a.noreferrer&&g.setAttribute("rel","noreferrer"),(a=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,e,1),g.dispatchEvent(a),g={}):a.noreferrer?(g=Xt("",e,t,g),a=qt(b),g&&(oe&&yt(a,";")&&(a="'"+a.replace(/'/g,"%27")+"'"),g.opener=null,a='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Zt(a)+'">',a=new Yt(a=(e=xt())?e.createHTML(a):a,null,Jt),e=g.document)&&(e.write(function(a){return a instanceof Yt&&a.constructor===Yt?a.a:(H("expected object of type SafeHtml, got '"+a+"' of type "+_(a)),"type_error:SafeHtml")}(a)),e.close())):(g=Xt(b,e,t,g))&&a.noopener&&(g.opener=null),g)try{g.focus()}catch(t){}return g}var Or=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sr=/^[^@]+@[^@]+$/;function Cr(){var a=null;return new Ae((function(b){"complete"==f.document.readyState?b():(a=function(){b()},bn(window,"load",a))})).o((function(b){throw _n(window,"load",a),b}))}function Nr(a){return a=a||Fr(),!("file:"!==Hr()&&"ionic:"!==Hr()||!a.toLowerCase().match(/iphone|ipad|ipod|android/))}function kr(){var a=f.window;try{return!(!a||a==a.top)}catch(t){return!1}}function Ar(){return void 0!==f.WorkerGlobalScope&&"function"==typeof f.importScripts}function jr(){return e.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.a.INTERNAL.hasOwnProperty("node")?"Node":Ar()?"Worker":"Browser"}function Pr(){var a=jr();return"ReactNative"===a||"Node"===a}var xr="Firefox",Rr="Chrome";function Dr(a){var b=a.toLowerCase();return yt(b,"opera/")||yt(b,"opr/")||yt(b,"opios/")?"Opera":yt(b,"iemobile")?"IEMobile":yt(b,"msie")||yt(b,"trident/")?"IE":yt(b,"edge/")?"Edge":yt(b,"firefox/")?xr:yt(b,"silk/")?"Silk":yt(b,"blackberry")?"Blackberry":yt(b,"webos")?"Webos":!yt(b,"safari/")||yt(b,"chrome/")||yt(b,"crios/")||yt(b,"android")?!yt(b,"chrome/")&&!yt(b,"crios/")||yt(b,"edge/")?yt(b,"android")?"Android":(a=a.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==a.length?a[1]:"Other":Rr:"Safari"}var Lr={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Mr(a,b){b=b||[];var t,e=[],n={};for(t in Lr)n[Lr[t]]=!0;for(t=0;t<b.length;t++)void 0!==n[b[t]]&&(delete n[b[t]],e.push(b[t]));return e.sort(),(b=e).length||(b=["FirebaseCore-web"]),"Browser"===(e=jr())?e=Dr(n=Fr()):"Worker"===e&&(e=Dr(n=Fr())+"-"+e),e+"/JsCore/"+a+"/"+b.join(",")}function Fr(){return f.navigator&&f.navigator.userAgent||""}function Ur(a,b){a=a.split("."),b=b||f;for(var t=0;t<a.length&&"object"==typeof b&&null!=b;t++)b=b[a[t]];return t!=a.length&&(b=void 0),b}function Vr(){try{var a=f.localStorage,b=Qr();if(a)return a.setItem(b,"1"),a.removeItem(b),!mr()||!!f.indexedDB}catch(t){return Ar()&&!!f.indexedDB}return!1}function qr(){return(Br()||"chrome-extension:"===Hr()||Nr())&&!Pr()&&Vr()&&!Ar()}function Br(){return"http:"===Hr()||"https:"===Hr()}function Hr(){return f.location&&f.location.protocol||null}function Kr(a){return!Er(a=a||Fr())&&Dr(a)!=xr}function zr(a){return void 0===a?null:pr(a)}function Wr(a){var t,b={};for(t in a)a.hasOwnProperty(t)&&null!==a[t]&&void 0!==a[t]&&(b[t]=a[t]);return b}function Gr(a){if(null!==a)return JSON.parse(a)}function Qr(a){return a||Math.floor(1e9*Math.random()).toString()}function Yr(a){return"Safari"!=Dr(a=a||Fr())&&!a.toLowerCase().match(/iphone|ipad|ipod/)}function Jr(){var a=f.___jsl;if(a&&a.H)for(var b in a.H)if(a.H[b].r=a.H[b].r||[],a.H[b].L=a.H[b].L||[],a.H[b].r=a.H[b].L.concat(),a.CP)for(var t=0;t<a.CP.length;t++)a.CP[t]=null}function Xr(a,b){if(a>b)throw Error("Short delay should be less than long delay!");this.a=a,this.c=b,a=Fr(),b=jr(),this.b=Er(a)||"ReactNative"===b}function $r(){var a=f.document;return!a||void 0===a.visibilityState||"visible"==a.visibilityState}function Zr(a){try{var b=new Date(parseInt(a,10));if(!isNaN(b.getTime())&&!/[^0-9]/.test(a))return b.toUTCString()}catch(t){}return null}function ti(){return!(!Ur("fireauth.oauthhelper",f)&&!Ur("fireauth.iframe",f))}Xr.prototype.get=function(){var a=f.navigator;return!a||"boolean"!=typeof a.onLine||!Br()&&"chrome-extension:"!==Hr()&&void 0===a.connection||a.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var ei,ni={};function ri(a){ni[a]||(ni[a]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(a))}try{var ii={};Object.defineProperty(ii,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(ii,"abcd",{configurable:!0,enumerable:!0,value:2}),ei=2==ii.abcd}catch(a){ei=!1}function oi(a,b,t){ei?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,value:t}):a[b]=t}function si(a,b){if(b)for(var t in b)b.hasOwnProperty(t)&&oi(a,t,b[t])}function ai(a){var b={};return si(b,a),b}function ui(a){var b=a;if("object"==typeof a&&null!=a)for(var t in b="length"in a?[]:{},a)oi(b,t,ui(a[t]));return b}function ci(a){var b=a&&(a[vi]?"phone":null);if(!(b&&a&&a[di]))throw new x("internal-error","Internal assert: invalid MultiFactorInfo object");oi(this,"uid",a[di]),oi(this,"displayName",a[fi]||null);var t=null;a[pi]&&(t=new Date(a[pi]).toUTCString()),oi(this,"enrollmentTime",t),oi(this,"factorId",b)}function hi(a){try{var b=new gi(a)}catch(t){b=null}return b}ci.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var fi="displayName",pi="enrolledAt",di="mfaEnrollmentId",vi="phoneInfo";function gi(a){ci.call(this,a),oi(this,"phoneNumber",a[vi])}function yi(a){var b={},t=a[wi],e=a[Ii],n=a[Ti];if(a=hi(a[Ei]),!n||n!=bi&&n!=_i&&!t||n==_i&&!e||n==mi&&!a)throw Error("Invalid checkActionCode response!");n==_i?(b[Si]=t||null,b[Ni]=t||null,b[Oi]=e):(b[Si]=e||null,b[Ni]=e||null,b[Oi]=t||null),b[Ci]=a||null,oi(this,Ai,n),oi(this,ki,ui(b))}j(gi,ci),gi.prototype.w=function(){var a=gi.$a.w.call(this);return a.phoneNumber=this.phoneNumber,a};var mi="REVERT_SECOND_FACTOR_ADDITION",bi="EMAIL_SIGNIN",_i="VERIFY_AND_CHANGE_EMAIL",wi="email",Ei="mfaInfo",Ii="newEmail",Ti="requestType",Oi="email",Si="fromEmail",Ci="multiFactorInfo",Ni="previousEmail",ki="data",Ai="operation";function ji(a){var b=Wn(a=Gn(a),Pi)||null,t=Wn(a,xi)||null,e=Wn(a,Li)||null;if(e=e&&Fi[e]||null,!b||!t||!e)throw new x("argument-error",Pi+", "+xi+"and "+Li+" are required in a valid action code URL.");si(this,{apiKey:b,operation:e,code:t,continueUrl:Wn(a,Ri)||null,languageCode:Wn(a,Di)||null,tenantId:Wn(a,Mi)||null})}var Pi="apiKey",xi="oobCode",Ri="continueUrl",Di="languageCode",Li="mode",Mi="tenantId",Fi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:mi,signIn:bi,verifyAndChangeEmail:_i,verifyEmail:"VERIFY_EMAIL"};function Ui(a){try{return new ji(a)}catch(t){return null}}function Vi(a){var b=a[zi];if(void 0===b)throw new x("missing-continue-uri");if("string"!=typeof b||"string"==typeof b&&!b.length)throw new x("invalid-continue-uri");this.i=b,this.b=this.a=null,this.g=!1;var t=a[qi];if(t&&"object"==typeof t){b=t[Qi];var e=t[Wi];if(t=t[Gi],"string"==typeof b&&b.length){if(this.a=b,void 0!==e&&"boolean"!=typeof e)throw new x("argument-error",Wi+" property must be a boolean when specified.");if(this.g=!!e,void 0!==t&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new x("argument-error",Gi+" property must be a non empty string when specified.");this.b=t||null}else{if(void 0!==b)throw new x("argument-error",Qi+" property must be a non empty string when specified.");if(void 0!==e||void 0!==t)throw new x("missing-android-pkg-name")}}else if(void 0!==t)throw new x("argument-error",qi+" property must be a non null object when specified.");if(this.f=null,(b=a[Ki])&&"object"==typeof b){if("string"==typeof(b=b[Yi])&&b.length)this.f=b;else if(void 0!==b)throw new x("argument-error",Yi+" property must be a non empty string when specified.")}else if(void 0!==b)throw new x("argument-error",Ki+" property must be a non null object when specified.");if(void 0!==(b=a[Hi])&&"boolean"!=typeof b)throw new x("argument-error",Hi+" property must be a boolean when specified.");if(this.c=!!b,void 0!==(a=a[Bi])&&("string"!=typeof a||"string"==typeof a&&!a.length))throw new x("argument-error",Bi+" property must be a non empty string when specified.");this.h=a||null}var qi="android",Bi="dynamicLinkDomain",Hi="handleCodeInApp",Ki="iOS",zi="url",Wi="installApp",Gi="minimumVersion",Qi="packageName",Yi="bundleId";function Ji(a){var b={};for(var t in b.continueUrl=a.i,b.canHandleCodeInApp=a.c,(b.androidPackageName=a.a)&&(b.androidMinimumVersion=a.b,b.androidInstallApp=a.g),b.iOSBundleId=a.f,b.dynamicLinkDomain=a.h,b)null===b[t]&&delete b[t];return b}var Xi=null;function $i(a){var b="";return function(a,b){function t(t){for(;e<a.length;){var p=a.charAt(e++),n=Xi[p];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(p))throw Error("Unknown base64 encoding at char: "+p)}return t}!function(){if(!Xi){Xi={};for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),b=["+/=","+/","-_=","-_.","-_"],t=0;5>t;t++)for(var e=a.concat(b[t].split("")),n=0;n<e.length;n++){var r=e[n];void 0===Xi[r]&&(Xi[r]=n)}}}();for(var e=0;;){var n=t(-1),r=t(0),g=t(64),o=t(64);if(64===o&&-1===n)break;b(n<<2|r>>4),64!=g&&(b(r<<4&240|g>>2),64!=o&&b(g<<6&192|o))}}(a,(function(t){b+=String.fromCharCode(t)})),b}function Zi(a){var b=eo(a);if(!(b&&b.sub&&b.iss&&b.aud&&b.exp))throw Error("Invalid JWT");this.i=a,this.a=b.exp,this.h=b.sub,a=Date.now()/1e3,this.g=b.iat||(a>this.a?this.a:a),this.b=b.provider_id||b.firebase&&b.firebase.sign_in_provider||null,this.f=b.firebase&&b.firebase.tenant||null,this.c=!!b.is_anonymous||"anonymous"==this.b}function to(a){try{return new Zi(a)}catch(t){return null}}function eo(a){if(!a)return null;if(3!=(a=a.split(".")).length)return null;for(var b=(4-(a=a[1]).length%4)%4,t=0;t<b;t++)a+=".";try{return JSON.parse($i(a))}catch(t){}return null}Zi.prototype.S=function(){return this.f},Zi.prototype.l=function(){return this.c},Zi.prototype.toString=function(){return this.i};var no="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),ro=["client_id","response_type","scope","redirect_uri","state"],io={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:ro},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:ro},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:ro},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:no},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function oo(a){for(var b in io)if(io[b].fa==a)return io[b];return null}function so(a){var b={};b["facebook.com"]=lo,b["google.com"]=po,b["github.com"]=fo,b["twitter.com"]=vo;var t=a&&a[uo];try{if(t)return b[t]?new b[t](a):new ho(a);if(void 0!==a[ao])return new co(a)}catch(t){}return null}var ao="idToken",uo="providerId";function co(a){var b=a[uo];if(!b&&a[ao]){var t=to(a[ao]);t&&t.b&&(b=t.b)}if(!b)throw Error("Invalid additional user info!");"anonymous"!=b&&"custom"!=b||(b=null),t=!1,void 0!==a.isNewUser?t=!!a.isNewUser:"identitytoolkit#SignupNewUserResponse"===a.kind&&(t=!0),oi(this,"providerId",b),oi(this,"isNewUser",t)}function ho(a){co.call(this,a),oi(this,"profile",ui((a=Gr(a.rawUserInfo||"{}"))||{}))}function lo(a){if(ho.call(this,a),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function fo(a){if(ho.call(this,a),"github.com"!=this.providerId)throw Error("Invalid provider ID!");oi(this,"username",this.profile&&this.profile.login||null)}function po(a){if(ho.call(this,a),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function vo(a){if(ho.call(this,a),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");oi(this,"username",a.screenName||null)}function go(a){var b=Gn(a),t=Wn(b,"link"),e=Wn(Gn(t),"link");return b=Wn(b,"deep_link_id"),Wn(Gn(b),"link")||b||e||t||a}function yo(a,b){if(!a&&!b)throw new x("internal-error","Internal assert: no raw session string available");if(a&&b)throw new x("internal-error","Internal assert: unable to determine the session type");this.a=a||null,this.b=b||null,this.type=this.a?mo:bo}j(ho,co),j(lo,ho),j(fo,ho),j(po,ho),j(vo,ho);var mo="enroll",bo="signin";function _o(){}function wo(a,b){return a.then((function(t){if(t[sa]){var e=to(t[sa]);if(!e||b!=e.h)throw new x("user-mismatch");return t}throw new x("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==L+"user-not-found"?new x("user-mismatch"):t}))}function Eo(a,b){if(!b)throw new x("internal-error","failed to construct a credential");this.a=b,oi(this,"providerId",a),oi(this,"signInMethod",a)}function Io(a){return{pendingToken:a.a,requestUri:"http://localhost"}}function To(a){if(a&&a.providerId&&a.signInMethod&&0==a.providerId.indexOf("saml.")&&a.pendingToken)try{return new Eo(a.providerId,a.pendingToken)}catch(t){}return null}function Oo(a,b,t){if(this.a=null,b.idToken||b.accessToken)b.idToken&&oi(this,"idToken",b.idToken),b.accessToken&&oi(this,"accessToken",b.accessToken),b.nonce&&!b.pendingToken&&oi(this,"nonce",b.nonce),b.pendingToken&&(this.a=b.pendingToken);else{if(!b.oauthToken||!b.oauthTokenSecret)throw new x("internal-error","failed to construct a credential");oi(this,"accessToken",b.oauthToken),oi(this,"secret",b.oauthTokenSecret)}oi(this,"providerId",a),oi(this,"signInMethod",t)}function So(a){var b={};return a.idToken&&(b.id_token=a.idToken),a.accessToken&&(b.access_token=a.accessToken),a.secret&&(b.oauth_token_secret=a.secret),b.providerId=a.providerId,a.nonce&&!a.a&&(b.nonce=a.nonce),b={postBody:sr(b).toString(),requestUri:"http://localhost"},a.a&&(delete b.postBody,b.pendingToken=a.a),b}function Co(a){if(a&&a.providerId&&a.signInMethod){var b={idToken:a.oauthIdToken,accessToken:a.oauthTokenSecret?null:a.oauthAccessToken,oauthTokenSecret:a.oauthTokenSecret,oauthToken:a.oauthTokenSecret&&a.oauthAccessToken,nonce:a.nonce,pendingToken:a.pendingToken};try{return new Oo(a.providerId,b,a.signInMethod)}catch(t){}}return null}function No(a,b){this.Pc=b||[],si(this,{providerId:a,isOAuthProvider:!0}),this.Hb={},this.ob=(oo(a)||{}).Ja||null,this.nb=null}function ko(a){if("string"!=typeof a||0!=a.indexOf("saml."))throw new x("argument-error",'SAML provider IDs must be prefixed with "saml."');No.call(this,a,[])}function Ao(a){No.call(this,a,ro),this.a=[]}function jo(){Ao.call(this,"facebook.com")}function Po(a){if(!a)throw new x("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;return I(a)&&(b=a.accessToken),(new jo).credential({accessToken:b})}function xo(){Ao.call(this,"github.com")}function Ro(a){if(!a)throw new x("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;return I(a)&&(b=a.accessToken),(new xo).credential({accessToken:b})}function Do(){Ao.call(this,"google.com"),this.Ca("profile")}function Lo(a,b){var t=a;return I(a)&&(t=a.idToken,b=a.accessToken),(new Do).credential({idToken:t,accessToken:b})}function Mo(){No.call(this,"twitter.com",no)}function Fo(a,b){var t=a;if(I(t)||(t={oauthToken:a,oauthTokenSecret:b}),!t.oauthToken||!t.oauthTokenSecret)throw new x("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Oo("twitter.com",t,"twitter.com")}function Uo(a,b,t){this.a=a,this.f=b,oi(this,"providerId","password"),oi(this,"signInMethod",t===qo.EMAIL_LINK_SIGN_IN_METHOD?qo.EMAIL_LINK_SIGN_IN_METHOD:qo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Vo(a){return a&&a.email&&a.password?new Uo(a.email,a.password,a.signInMethod):null}function qo(){si(this,{providerId:"password",isOAuthProvider:!1})}function Bo(a,b){if(!(b=Ho(b)))throw new x("argument-error","Invalid email link!");return new Uo(a,b.code,qo.EMAIL_LINK_SIGN_IN_METHOD)}function Ho(a){return(a=Ui(a=go(a)))&&a.operation===bi?a:null}function Ko(a){if(!(a.cb&&a.bb||a.La&&a.ea))throw new x("internal-error");this.a=a,oi(this,"providerId","phone"),this.fa="phone",oi(this,"signInMethod","phone")}function zo(a){if(a&&"phone"===a.providerId&&(a.verificationId&&a.verificationCode||a.temporaryProof&&a.phoneNumber)){var b={};return X(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(t){a[t]&&(b[t]=a[t])})),new Ko(b)}return null}function Wo(a){return a.a.La&&a.a.ea?{temporaryProof:a.a.La,phoneNumber:a.a.ea}:{sessionInfo:a.a.cb,code:a.a.bb}}function Go(a){try{this.a=a||e.a.auth()}catch(t){throw new x("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}si(this,{providerId:"phone",isOAuthProvider:!1})}function Qo(a,b){if(!a)throw new x("missing-verification-id");if(!b)throw new x("missing-verification-code");return new Ko({cb:a,bb:b})}function Yo(a){if(a.temporaryProof&&a.phoneNumber)return new Ko({La:a.temporaryProof,ea:a.phoneNumber});var b=a&&a.providerId;if(!b||"password"===b)return null;var t=a&&a.oauthAccessToken,e=a&&a.oauthTokenSecret,n=a&&a.nonce,r=a&&a.oauthIdToken,g=a&&a.pendingToken;try{switch(b){case"google.com":return Lo(r,t);case"facebook.com":return Po(t);case"github.com":return Ro(t);case"twitter.com":return Fo(t,e);default:return t||e||r||g?g?0==b.indexOf("saml.")?new Eo(b,g):new Oo(b,{pendingToken:g,idToken:a.oauthIdToken,accessToken:a.oauthAccessToken},b):new Ao(b).credential({idToken:r,accessToken:t,rawNonce:n}):null}}catch(t){return null}}function Jo(a){if(!a.isOAuthProvider)throw new x("invalid-oauth-provider")}function Xo(a,b,t,e,n,r,g){if(this.c=a,this.b=b||null,this.g=t||null,this.f=e||null,this.h=r||null,this.i=g||null,this.a=n||null,!this.g&&!this.a)throw new x("invalid-auth-event");if(this.g&&this.a)throw new x("invalid-auth-event");if(this.g&&!this.f)throw new x("invalid-auth-event")}function th(a){return(a=a||{}).type?new Xo(a.type,a.eventId,a.urlResponse,a.sessionId,a.error&&R(a.error),a.postBody,a.tenantId):null}function $o(){this.b=null,this.a=[]}yo.prototype.Ha=function(){return this.a?Me(this.a):Me(this.b)},yo.prototype.w=function(){return this.type==mo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},_o.prototype.ja=function(){},_o.prototype.b=function(){},_o.prototype.c=function(){},_o.prototype.w=function(){},Eo.prototype.ja=function(a){return Na(a,Io(this))},Eo.prototype.b=function(a,b){var t=Io(this);return t.idToken=b,ka(a,t)},Eo.prototype.c=function(a,b){return wo(Aa(a,Io(this)),b)},Eo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Oo.prototype.ja=function(a){return Na(a,So(this))},Oo.prototype.b=function(a,b){var t=So(this);return t.idToken=b,ka(a,t)},Oo.prototype.c=function(a,b){return wo(Aa(a,So(this)),b)},Oo.prototype.w=function(){var a={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(a.oauthIdToken=this.idToken),this.accessToken&&(a.oauthAccessToken=this.accessToken),this.secret&&(a.oauthTokenSecret=this.secret),this.nonce&&(a.nonce=this.nonce),this.a&&(a.pendingToken=this.a),a},No.prototype.Ka=function(a){return this.Hb=Tt(a),this},j(ko,No),j(Ao,No),Ao.prototype.Ca=function(a){return et(this.a,a)||this.a.push(a),this},Ao.prototype.Pb=function(){return st(this.a)},Ao.prototype.credential=function(a,b){var t;if(!(t=I(a)?{idToken:a.idToken||null,accessToken:a.accessToken||null,nonce:a.rawNonce||null}:{idToken:a||null,accessToken:b||null}).idToken&&!t.accessToken)throw new x("argument-error","credential failed: must provide the ID token and/or the access token.");return new Oo(this.providerId,t,this.providerId)},j(jo,Ao),oi(jo,"PROVIDER_ID","facebook.com"),oi(jo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),j(xo,Ao),oi(xo,"PROVIDER_ID","github.com"),oi(xo,"GITHUB_SIGN_IN_METHOD","github.com"),j(Do,Ao),oi(Do,"PROVIDER_ID","google.com"),oi(Do,"GOOGLE_SIGN_IN_METHOD","google.com"),j(Mo,No),oi(Mo,"PROVIDER_ID","twitter.com"),oi(Mo,"TWITTER_SIGN_IN_METHOD","twitter.com"),Uo.prototype.ja=function(a){return this.signInMethod==qo.EMAIL_LINK_SIGN_IN_METHOD?lu(a,Fa,{email:this.a,oobCode:this.f}):lu(a,su,{email:this.a,password:this.f})},Uo.prototype.b=function(a,b){return this.signInMethod==qo.EMAIL_LINK_SIGN_IN_METHOD?lu(a,Ua,{idToken:b,email:this.a,oobCode:this.f}):lu(a,$a,{idToken:b,email:this.a,password:this.f})},Uo.prototype.c=function(a,b){return wo(this.ja(a),b)},Uo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},si(qo,{PROVIDER_ID:"password"}),si(qo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),si(qo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ko.prototype.ja=function(a){return a.eb(Wo(this))},Ko.prototype.b=function(a,b){var t=Wo(this);return t.idToken=b,lu(a,uu,t)},Ko.prototype.c=function(a,b){var t=Wo(this);return t.operation="REAUTH",wo(a=lu(a,cu,t),b)},Ko.prototype.w=function(){var a={providerId:"phone"};return this.a.cb&&(a.verificationId=this.a.cb),this.a.bb&&(a.verificationCode=this.a.bb),this.a.La&&(a.temporaryProof=this.a.La),this.a.ea&&(a.phoneNumber=this.a.ea),a},Go.prototype.eb=function(a,b){var t=this.a.a;return Me(b.verify()).then((function(e){if("string"!=typeof e)throw new x("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(b.type){case"recaptcha":var n=I(a)?a.session:null,r=I(a)?a.phoneNumber:a;return(n&&n.type==mo?n.Ha().then((function(n){return function(a,b){return lu(a,tu,b).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(t,{idToken:n,phoneEnrollmentInfo:{phoneNumber:r,recaptchaToken:e}})})):n&&n.type==bo?n.Ha().then((function(n){return function(a,b){return lu(a,eu,b).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(t,{mfaPendingCredential:n,mfaEnrollmentId:a.multiFactorHint&&a.multiFactorHint.uid||a.multiFactorUid,phoneSignInInfo:{recaptchaToken:e}})})):function(a,b){return lu(a,Ja,b)}(t,{phoneNumber:r,recaptchaToken:e})).then((function(t){return"function"==typeof b.reset&&b.reset(),t}),(function(t){throw"function"==typeof b.reset&&b.reset(),t}));default:throw new x("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},si(Go,{PROVIDER_ID:"phone"}),si(Go,{PHONE_SIGN_IN_METHOD:"phone"}),Xo.prototype.getUid=function(){var a=[];return a.push(this.c),this.b&&a.push(this.b),this.f&&a.push(this.f),this.i&&a.push(this.i),a.join("-")},Xo.prototype.S=function(){return this.i},Xo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.h,tenantId:this.i,error:this.a&&this.a.w()}};var Zo,ts=null;function es(a){var b="unauthorized-domain",t=void 0,e=Gn(a);a=e.a,"chrome-extension"==(e=e.f)?t=$t("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):"http"==e||"https"==e?t=$t("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):b="operation-not-supported-in-this-environment",x.call(this,b,t)}function ns(a,b,t){x.call(this,a,t),(a=b||{}).Ib&&oi(this,"email",a.Ib),a.ea&&oi(this,"phoneNumber",a.ea),a.credential&&oi(this,"credential",a.credential),a.Yb&&oi(this,"tenantId",a.Yb)}function rs(a){if(a.code){var b=a.code||"";0==b.indexOf(L)&&(b=b.substring(L.length));var t={credential:Yo(a),Yb:a.tenantId};if(a.email)t.Ib=a.email;else if(a.phoneNumber)t.ea=a.phoneNumber;else if(!t.credential)return new x(b,a.message||void 0);return new ns(b,t,a.message)}return null}function is(){}function os(a){return a.c||(a.c=a.b())}function ss(){}function as(a){if(!a.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t=0;t<b.length;t++){var e=b[t];try{return new ActiveXObject(e),a.f=e}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return a.f}function us(){}function cs(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=q(this.pc,this),this.a.onerror=q(this.Rb,this),this.a.onprogress=q(this.qc,this),this.a.ontimeout=q(this.uc,this)}function hs(a,b){a.readyState=b,a.onreadystatechange&&a.onreadystatechange()}function ls(a,b,t){this.reset(a,b,t,void 0,void 0)}j(es,x),j(ns,x),ns.prototype.w=function(){var a={code:this.code,message:this.message};this.email&&(a.email=this.email),this.phoneNumber&&(a.phoneNumber=this.phoneNumber),this.tenantId&&(a.tenantId=this.tenantId);var b=this.credential&&this.credential.w();return b&&St(a,b),a},ns.prototype.toJSON=function(){return this.w()},is.prototype.c=null,j(ss,is),ss.prototype.a=function(){var a=as(this);return a?new ActiveXObject(a):new XMLHttpRequest},ss.prototype.b=function(){var a={};return as(this)&&(a[0]=!0,a[1]=!0),a},Zo=new ss,j(us,is),us.prototype.a=function(){var a=new XMLHttpRequest;if("withCredentials"in a)return a;if("undefined"!=typeof XDomainRequest)return new cs;throw Error("Unsupported browser")},us.prototype.b=function(){return{}},(n=cs.prototype).open=function(a,b,t){if(null!=t&&!t)throw Error("Only async requests are supported.");this.a.open(a,b)},n.send=function(a){if(a){if("string"!=typeof a)throw Error("Only string data is supported");this.a.send(a)}else this.a.send()},n.abort=function(){this.a.abort()},n.setRequestHeader=function(){},n.getResponseHeader=function(a){return"content-type"==a.toLowerCase()?this.a.contentType:""},n.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,hs(this,4)},n.Rb=function(){this.status=500,this.response=this.responseText="",hs(this,4)},n.uc=function(){this.Rb()},n.qc=function(){this.status=200,hs(this,1)},n.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ls.prototype.a=null;function fs(a){this.f=a,this.b=this.c=this.a=null}function ps(a,b){this.name=a,this.value=b}ls.prototype.reset=function(a,b,t,e,n){"number"==typeof n||0,e||A(),delete this.a},ps.prototype.toString=function(){return this.name};var ds=new ps("SEVERE",1e3),vs=new ps("WARNING",900),gs=new ps("CONFIG",700),ys=new ps("FINE",500);fs.prototype.log=function(a,b,t){if(a.value>=function t(a){return a.c?a.c:a.a?t(a.a):(H("Root logger has no level set."),null)}(this).value)for(E(b)&&(b=b()),a=new ls(a,String(b),this.f),t&&(a.a=t),t=this;t;)t=t.a};var ms={},bs=null;function _s(a){var b;if(bs||(bs=new fs(""),ms[""]=bs,bs.c=gs),!(b=ms[a])){b=new fs(a);var t=a.lastIndexOf("."),e=a.substr(t+1);(t=_s(a.substr(0,t))).b||(t.b={}),t.b[e]=b,b.a=t,ms[a]=b}return b}function ws(a,b){a&&a.log(ys,b,void 0)}function Es(a){this.f=a}function Is(a){kn.call(this),this.u=a,this.i=void 0,this.readyState=Ts,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.h=_s("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}j(Es,is),Es.prototype.a=function(){return new Is(this.f)},Es.prototype.b=function(a){return function(){return a}}({}),j(Is,kn);var Ts=0;function Os(a){a.c.read().then(a.oc.bind(a)).catch(a.Ta.bind(a))}function Ss(a){a.readyState=4,a.g=null,a.c=null,a.m=null,Cs(a)}function Cs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}function Ns(a){kn.call(this),this.headers=new Mn,this.O=a||null,this.c=!1,this.A=this.a=null,this.i=this.P=this.l="",this.f=this.N=this.h=this.G=!1,this.g=0,this.s=null,this.m=ks,this.u=this.R=!1}(n=Is.prototype).open=function(a,b){if(this.readyState!=Ts)throw this.abort(),Error("Error reopening a connection");this.s=a,this.f=b,this.readyState=1,Cs(this)},n.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var b={headers:this.l,method:this.s,credentials:this.i,cache:void 0};a&&(b.body=a),this.u.fetch(new Request(this.f,b)).then(this.tc.bind(this),this.Ta.bind(this))},n.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Ss(this)),this.readyState=Ts},n.tc=function(a){this.a&&(this.g=a,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=a.headers,this.readyState=2,Cs(this)),this.a&&(this.readyState=3,Cs(this),this.a&&("arraybuffer"===this.responseType?a.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==f.ReadableStream&&"body"in a?(this.response=this.responseText="",this.c=a.body.getReader(),this.m=new TextDecoder,Os(this)):a.text().then(this.sc.bind(this),this.Ta.bind(this)))))},n.oc=function(a){if(this.a){var b=this.m.decode(a.value?a.value:new Uint8Array(0),{stream:!a.done});b&&(this.response=this.responseText+=b),a.done?Ss(this):Cs(this),3==this.readyState&&Os(this)}},n.sc=function(a){this.a&&(this.response=this.responseText=a,Ss(this))},n.rc=function(a){this.a&&(this.response=a,Ss(this))},n.Ta=function(a){var b=this.h;b&&b.log(vs,"Failed to fetch url "+this.f,a instanceof Error?a:Error(a)),this.a&&Ss(this)},n.setRequestHeader=function(a,b){this.l.append(a,b)},n.getResponseHeader=function(a){return this.b?this.b.get(a.toLowerCase())||"":((a=this.h)&&a.log(vs,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},n.getAllResponseHeaders=function(){if(!this.b){var a=this.h;return a&&a.log(vs,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}a=[];for(var b=this.b.entries(),t=b.next();!t.done;)t=t.value,a.push(t[0]+": "+t[1]),t=b.next();return a.join("\r\n")},Object.defineProperty(Is.prototype,"withCredentials",{get:function(){return"include"===this.i},set:function(a){this.i=a?"include":"same-origin"}}),j(Ns,kn);var ks="";Ns.prototype.b=_s("goog.net.XhrIo");var As=/^https?$/i,js=["POST","PUT"];function Ps(a,b,t,e,n){if(a.a)throw Error("[goog.net.XhrIo] Object is active with another request="+a.l+"; newUri="+b);t=t?t.toUpperCase():"GET",a.l=b,a.i="",a.P=t,a.G=!1,a.c=!0,a.a=a.O?a.O.a():Zo.a(),a.A=a.O?os(a.O):os(Zo),a.a.onreadystatechange=q(a.Ub,a);try{ws(a.b,Vs(a,"Opening Xhr")),a.N=!0,a.a.open(t,String(b),!0),a.N=!1}catch(t){return ws(a.b,Vs(a,"Error opening Xhr: "+t.message)),void Rs(a,t)}b=e||"";var r=new Mn(a.headers);n&&function(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(w(a)||"string"==typeof a)X(a,b,void 0);else for(var t=Ln(a),e=Dn(a),n=e.length,r=0;r<n;r++)b.call(void 0,e[r],t&&t[r],a)}(n,(function(g,t){r.set(t,g)})),n=function(a){t:{for(var b=xs,t=a.length,e="string"==typeof a?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a)){b=n;break t}b=-1}return 0>b?null:"string"==typeof a?a.charAt(b):a[b]}(r.Y()),e=f.FormData&&b instanceof f.FormData,!et(js,t)||n||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(g,t){this.a.setRequestHeader(t,g)}),a),a.m&&(a.a.responseType=a.m),"withCredentials"in a.a&&a.a.withCredentials!==a.R&&(a.a.withCredentials=a.R);try{Ms(a),0<a.g&&(a.u=function(a){return re&&de(9)&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(a.a),ws(a.b,Vs(a,"Will abort after "+a.g+"ms if incomplete, xhr2 "+a.u)),a.u?(a.a.timeout=a.g,a.a.ontimeout=q(a.Ma,a)):a.s=xn(a.Ma,a.g,a)),ws(a.b,Vs(a,"Sending request")),a.h=!0,a.a.send(b),a.h=!1}catch(t){ws(a.b,Vs(a,"Send error: "+t.message)),Rs(a,t)}}function xs(a){return"content-type"==a.toLowerCase()}function Rs(a,b){a.c=!1,a.a&&(a.f=!0,a.a.abort(),a.f=!1),a.i=b,Ds(a),Ls(a)}function Ds(a){a.G||(a.G=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function li(a){if(a.c&&void 0!==l)if(a.A[1]&&4==Fs(a)&&2==Us(a))ws(a.b,Vs(a,"Local request error detected and ignored"));else if(a.h&&4==Fs(a))xn(a.Ub,0,a);else if(a.dispatchEvent("readystatechange"),4==Fs(a)){ws(a.b,Vs(a,"Request complete")),a.c=!1;try{var t,b=Us(a);t:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}if(!(t=e)){var n;if(n=0===b){var r=String(a.l).match(Vn)[1]||null;if(!r&&f.self&&f.self.location){var g=f.self.location.protocol;r=g.substr(0,g.length-1)}n=!As.test(r?r.toLowerCase():"")}t=n}if(t)a.dispatchEvent("complete"),a.dispatchEvent("success");else{try{var o=2<Fs(a)?a.a.statusText:""}catch(t){ws(a.b,"Can not get status: "+t.message),o=""}a.i=o+" ["+Us(a)+"]",Ds(a)}}finally{Ls(a)}}}function Ls(a,b){if(a.a){Ms(a);var t=a.a,e=a.A[0]?m:null;a.a=null,a.A=null,b||a.dispatchEvent("ready");try{t.onreadystatechange=e}catch(t){(a=a.b)&&a.log(ds,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function Ms(a){a.a&&a.u&&(a.a.ontimeout=null),a.s&&(f.clearTimeout(a.s),a.s=null)}function Fs(a){return a.a?a.a.readyState:0}function Us(a){try{return 2<Fs(a)?a.a.status:-1}catch(t){return-1}}function Vs(a,b){return b+" ["+a.P+" "+a.l+" "+Us(a)+"]"}function qs(a){var b=$s;this.g=[],this.u=b,this.s=a||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.h=!1,this.i=0,this.b=null,this.l=0}function Bs(a,b,t){a.a=!0,a.c=t,a.f=!b,Ws(a)}function Hs(a){if(a.a){if(!a.m)throw new Gs(a);a.m=!1}}function Ks(a,b,t,e){a.g.push([b,t,e]),a.a&&Ws(a)}function zs(a){return tt(a.g,(function(b){return E(b[1])}))}function Ws(a){if(a.i&&a.a&&zs(a)){var b=a.i,t=Js[b];t&&(f.clearTimeout(t.a),delete Js[b]),a.i=0}a.b&&(a.b.l--,delete a.b),b=a.c;for(var e=t=!1;a.g.length&&!a.h;){var n=a.g.shift(),r=n[0],g=n[1];if(n=n[2],r=a.f?g:r)try{var o=r.call(n||a.s,b);void 0!==o&&(a.f=a.f&&(o==b||o instanceof Error),a.c=b=o),(V(b)||"function"==typeof f.Promise&&b instanceof f.Promise)&&(e=!0,a.h=!0)}catch(e){b=e,a.f=!0,zs(a)||(t=!0)}}a.c=b,e&&(o=q(a.v,a,!0),e=q(a.v,a,!1),b instanceof qs?(Ks(b,o,e),b.A=!0):b.then(o,e)),t&&(b=new Ys(b),Js[b.a]=b,a.i=b.a)}function Gs(){u.call(this)}function Qs(){u.call(this)}function Ys(a){this.a=f.setTimeout(q(this.c,this),0),this.b=a}(n=Ns.prototype).Ma=function(){void 0!==l&&this.a&&(this.i="Timed out after "+this.g+"ms, aborting",ws(this.b,Vs(this,this.i)),this.dispatchEvent("timeout"),this.abort(8))},n.abort=function(){this.a&&this.c&&(ws(this.b,Vs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ls(this))},n.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ls(this,!0)),Ns.$a.Da.call(this)},n.Ub=function(){this.xa||(this.N||this.h||this.f?li(this):this.Ic())},n.Ic=function(){li(this)},n.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ks:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var a=this.b;return a&&a.log(ds,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ws(this.b,"Can not get response: "+t.message),null}},qs.prototype.cancel=function(a){if(this.a)this.c instanceof qs&&this.c.cancel();else{if(this.b){var b=this.b;delete this.b,a?b.cancel(a):(b.l--,0>=b.l&&b.cancel())}this.u?this.u.call(this.s,this):this.m=!0,this.a||(a=new Qs(this),Hs(this),Bs(this,!1,a))}},qs.prototype.v=function(a,b){this.h=!1,Bs(this,a,b)},qs.prototype.then=function(a,b,t){var e,n,r=new Ae((function(g,t){e=g,n=t}));return Ks(this,e,(function(g){g instanceof Qs?r.cancel():n(g)})),r.then(a,b,t)},qs.prototype.$goog_Thenable=!0,j(Gs,u),Gs.prototype.message="Deferred has already fired",Gs.prototype.name="AlreadyCalledError",j(Qs,u),Qs.prototype.message="Deferred was canceled",Qs.prototype.name="CanceledError",Ys.prototype.c=function(){throw delete Js[this.a],this.b};var Js={};function Xs(a){var b={},t=b.document||document,e=Dt(a).toString(),n=Te(document,"SCRIPT"),r={Vb:n,Ma:void 0},g=new qs(r),o=null,c=null!=b.timeout?b.timeout:5e3;return 0<c&&(o=window.setTimeout((function(){Zs(n,!0);var p=new na(ea,"Timeout reached for loading script "+e);Hs(g),Bs(g,!1,p)}),c),r.Ma=o),n.onload=n.onreadystatechange=function(){n.readyState&&"loaded"!=n.readyState&&"complete"!=n.readyState||(Zs(n,b.wd||!1,o),Hs(g),Bs(g,!0,null))},n.onerror=function(){Zs(n,!0,o);var p=new na(ta,"Error while loading script "+e);Hs(g),Bs(g,!1,p)},St(r=b.attributes||{},{type:"text/javascript",charset:"UTF-8"}),be(n,r),function(a,b){Ct(a,"HTMLScriptElement"),a.src=Dt(b),(b=a.ownerDocument&&a.ownerDocument.defaultView)&&b!=f?b=y(b.document):(null===v&&(v=y(f.document)),b=v),b&&a.setAttribute("nonce",b)}(n,a),function(a){var b;return(b=(a||document).getElementsByTagName("HEAD"))&&0!=b.length?b[0]:a.documentElement}(t).appendChild(n),g}function $s(){if(this&&this.Vb){var a=this.Vb;a&&"SCRIPT"==a.tagName&&Zs(a,!0,this.Ma)}}function Zs(a,b,t){null!=t&&f.clearTimeout(t),a.onload=m,a.onerror=m,a.onreadystatechange=m,b&&window.setTimeout((function(){a&&a.parentNode&&a.parentNode.removeChild(a)}),0)}var ta=0,ea=1;function na(a,b){var t="Jsloader error (code #"+a+")";b&&(t+=": "+b),u.call(this,t),this.code=a}function ra(a){this.f=a}function ia(a,b,t){if(this.c=a,a=b||{},this.l=a.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=a.secureTokenTimeout||aa,this.g=Tt(a.secureTokenHeaders||ua),this.i=a.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=a.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=a.firebaseTimeout||ca,this.a=Tt(a.firebaseHeaders||ha),t&&(this.a["X-Client-Version"]=t,this.g["X-Client-Version"]=t),t="Node"==jr(),!(t=f.XMLHttpRequest||t&&e.a.INTERNAL.node&&e.a.INTERNAL.node.XMLHttpRequest)&&!Ar())throw new x("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Ar()?this.f=new Es(self):Pr()?this.f=new ra(t):this.f=new us,this.b=null}j(na,u),j(ra,is),ra.prototype.a=function(){return new this.f},ra.prototype.b=function(){return{}};var oa,sa="idToken",aa=new Xr(3e4,6e4),ua={"Content-Type":"application/x-www-form-urlencoded"},ca=new Xr(3e4,6e4),ha={"Content-Type":"application/json"};function la(a,b){b?a.a["X-Firebase-Locale"]=b:delete a.a["X-Firebase-Locale"]}function fa(a,b){b&&(a.l=pa("https://securetoken.googleapis.com/v1/token",b),a.i=pa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",b),a.h=pa("https://identitytoolkit.googleapis.com/v2/",b))}function pa(a,b){return a=Gn(a),b=Gn(b.url),a.c=a.a+a.c,Bn(a,b.f),a.a=b.a,Hn(a,b.g),a.toString()}function da(a,b){b?(a.a["X-Client-Version"]=b,a.g["X-Client-Version"]=b):(delete a.a["X-Client-Version"],delete a.g["X-Client-Version"])}function va(a,b,t,e,n,r,g){(function(){var a=Fr();return!((a=Dr(a)!=Rr?null:(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&30>a)&&(!re||!ge||9<ge)})()||Ar()?a=q(a.u,a):(oa||(oa=new Ae((function(t,e){!function(a,b){if(((window.gapi||{}).client||{}).request)a();else{f[ya]=function(){((window.gapi||{}).client||{}).request?a():b(Error("CORS_UNSUPPORTED"))},function(a,b){Ks(a,null,b,void 0)}(Xs(Lt(ga,{onload:ya})),(function(){b(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),a=q(a.s,a)),a(b,t,e,n,r,g)}ia.prototype.S=function(){return this.b},ia.prototype.u=function(a,b,t,e,n,r){if(Ar()&&(void 0===f.fetch||void 0===f.Headers||void 0===f.Request))throw new x("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var g=new Ns(this.f);if(r){g.g=Math.max(0,r);var o=setTimeout((function(){g.dispatchEvent("timeout")}),r)}An(g,"complete",(function(){o&&clearTimeout(o);var t=null;try{t=JSON.parse(function(a){try{return a.a?a.a.responseText:""}catch(t){return ws(a.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(e){t=null}b&&b(t)})),jn(g,"ready",(function(){o&&clearTimeout(o),tn(this)})),jn(g,"timeout",(function(){o&&clearTimeout(o),tn(this),b&&b(null)})),Ps(g,a,t,e,n)};var ga=new Nt(Pt,"https://apis.google.com/js/client.js?onload=%{onload}"),ya="__fcb"+Math.floor(1e6*Math.random()).toString();function ma(a,b,t,e,n,r,g){var o=Gn(b+t);zn(o,"key",a.c),g&&zn(o,"cb",A().toString());var c="GET"==e;if(c)for(var p in n)n.hasOwnProperty(p)&&zn(o,p,n[p]);return new Ae((function(t,h){va(a,o.toString(),(function(e){e?e.error?h(pu(e,r||{})):t(e):h(new x("network-request-failed"))}),e,c?void 0:pr(Wr(n)),a.a,a.m.get())}))}function ba(a){if("string"!=typeof(a=a.email)||!Sr.test(a))throw new x("invalid-email")}function _a(a){"email"in a&&ba(a)}function wa(a){if(!a[sa]){if(a.mfaPendingCredential)throw new x("multi-factor-auth-required",null,Tt(a));throw new x("internal-error")}}function Ea(a){if(a.phoneNumber||a.temporaryProof){if(!a.phoneNumber||!a.temporaryProof)throw new x("internal-error")}else{if(!a.sessionInfo)throw new x("missing-verification-id");if(!a.code)throw new x("missing-verification-code")}}ia.prototype.s=function(a,b,t,e,n){var r=this;oa.then((function(){window.gapi.client.setApiKey(r.c);var g=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:a,method:t,body:e,headers:n,authType:"none",callback:function(t){window.gapi.auth.setToken(g),b&&b(t)}})})).o((function(g){b&&b({error:{message:g&&g.message||"CORS_UNSUPPORTED"}})}))},ia.prototype.yb=function(){return lu(this,Za,{})},ia.prototype.Ab=function(a,b){return lu(this,Xa,{idToken:a,email:b})},ia.prototype.Bb=function(a,b){return lu(this,$a,{idToken:a,password:b})};var Ia={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ta(a){if(!a.phoneVerificationInfo)throw new x("internal-error");if(!a.phoneVerificationInfo.sessionInfo)throw new x("missing-verification-id");if(!a.phoneVerificationInfo.code)throw new x("missing-verification-code")}function Oa(a){if(!a.requestUri||!a.sessionId&&!a.postBody&&!a.pendingToken)throw new x("internal-error")}function Sa(a,b){return b.oauthIdToken&&b.providerId&&0==b.providerId.indexOf("oidc.")&&!b.pendingToken&&(a.sessionId?b.nonce=a.sessionId:a.postBody&&(ur(a=new ir(a.postBody),"nonce")&&(b.nonce=a.get("nonce")))),b}function Ca(a){var b=null;if(a.needConfirmation?(a.code="account-exists-with-different-credential",b=rs(a)):"FEDERATED_USER_ID_ALREADY_LINKED"==a.errorMessage?(a.code="credential-already-in-use",b=rs(a)):"EMAIL_EXISTS"==a.errorMessage?(a.code="email-already-in-use",b=rs(a)):a.errorMessage&&(b=fu(a.errorMessage)),b)throw b;wa(a)}function Na(a,b){return b.returnIdpCredential=!0,lu(a,nu,b)}function ka(a,b){return b.returnIdpCredential=!0,lu(a,iu,b)}function Aa(a,b){return b.returnIdpCredential=!0,b.autoCreate=!1,lu(a,ru,b)}function ja(a){if(!a.oobCode)throw new x("invalid-action-code")}(n=ia.prototype).Cb=function(a,b){var t={idToken:a},e=[];return Et(Ia,(function(n,r){var g=b[r];null===g?e.push(n):r in b&&(t[r]=g)})),e.length&&(t.deleteAttribute=e),lu(this,Xa,t)},n.ub=function(a,b){return St(a={requestType:"PASSWORD_RESET",email:a},b),lu(this,Wa,a)},n.vb=function(a,b){return St(a={requestType:"EMAIL_SIGNIN",email:a},b),lu(this,Ha,a)},n.tb=function(a,b){return St(a={requestType:"VERIFY_EMAIL",idToken:a},b),lu(this,Ka,a)},n.Db=function(a,b,t){return St(a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:b},t),lu(this,za,a)},n.eb=function(a){return lu(this,au,a)},n.mb=function(a,b){return lu(this,Ya,{oobCode:a,newPassword:b})},n.Qa=function(a){return lu(this,xa,{oobCode:a})},n.ib=function(a){return lu(this,Pa,{oobCode:a})};var Pa={endpoint:"setAccountInfo",B:ja,Z:"email",C:!0},xa={endpoint:"resetPassword",B:ja,F:function(a){var b=a.requestType;if(!b||!a.email&&"EMAIL_SIGNIN"!=b&&"VERIFY_AND_CHANGE_EMAIL"!=b)throw new x("internal-error")},C:!0},Ra={endpoint:"signupNewUser",B:function(a){if(ba(a),!a.password)throw new x("weak-password")},F:wa,U:!0,C:!0},Da={endpoint:"createAuthUri",C:!0},La={endpoint:"deleteAccount",M:["idToken"]},Ma={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(a){if(!Array.isArray(a.deleteProvider))throw new x("internal-error")}},Fa={endpoint:"emailLinkSignin",M:["email","oobCode"],B:ba,F:wa,U:!0,C:!0},Ua={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:ba,F:wa,U:!0},Va={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:Ta,F:wa,C:!0,Na:!0},qa={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:Ta,F:wa,C:!0,Na:!0},Ba={endpoint:"getAccountInfo"},Ha={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(a){if("EMAIL_SIGNIN"!=a.requestType)throw new x("internal-error");ba(a)},Z:"email",C:!0},Ka={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(a){if("VERIFY_EMAIL"!=a.requestType)throw new x("internal-error")},Z:"email",C:!0},za={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(a){if("VERIFY_AND_CHANGE_EMAIL"!=a.requestType)throw new x("internal-error")},Z:"email",C:!0},Wa={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(a){if("PASSWORD_RESET"!=a.requestType)throw new x("internal-error");ba(a)},Z:"email",C:!0},Ga={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Qa={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(a){if(!a.recaptchaSiteKey)throw new x("internal-error")}},Ya={endpoint:"resetPassword",B:ja,Z:"email",C:!0},Ja={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Xa={endpoint:"setAccountInfo",M:["idToken"],B:_a,U:!0},$a={endpoint:"setAccountInfo",M:["idToken"],B:function(a){if(_a(a),!a.password)throw new x("weak-password")},F:wa,U:!0},Za={endpoint:"signupNewUser",F:wa,U:!0,C:!0},tu={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(a){if(!a.phoneEnrollmentInfo)throw new x("internal-error");if(!a.phoneEnrollmentInfo.phoneNumber)throw new x("missing-phone-number");if(!a.phoneEnrollmentInfo.recaptchaToken)throw new x("missing-app-credential")},F:function(a){if(!a.phoneSessionInfo||!a.phoneSessionInfo.sessionInfo)throw new x("internal-error")},C:!0,Na:!0},eu={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(a){if(!a.phoneSignInInfo||!a.phoneSignInInfo.recaptchaToken)throw new x("missing-app-credential")},F:function(a){if(!a.phoneResponseInfo||!a.phoneResponseInfo.sessionInfo)throw new x("internal-error")},C:!0,Na:!0},nu={endpoint:"verifyAssertion",B:Oa,Xa:Sa,F:Ca,U:!0,C:!0},ru={endpoint:"verifyAssertion",B:Oa,Xa:Sa,F:function(a){if(a.errorMessage&&"USER_NOT_FOUND"==a.errorMessage)throw new x("user-not-found");if(a.errorMessage)throw fu(a.errorMessage);wa(a)},U:!0,C:!0},iu={endpoint:"verifyAssertion",B:function(a){if(Oa(a),!a.idToken)throw new x("internal-error")},Xa:Sa,F:Ca,U:!0},ou={endpoint:"verifyCustomToken",B:function(a){if(!a.token)throw new x("invalid-custom-token")},F:wa,U:!0,C:!0},su={endpoint:"verifyPassword",B:function(a){if(ba(a),!a.password)throw new x("wrong-password")},F:wa,U:!0,C:!0},au={endpoint:"verifyPhoneNumber",B:Ea,F:wa,C:!0},uu={endpoint:"verifyPhoneNumber",B:function(a){if(!a.idToken)throw new x("internal-error");Ea(a)},F:function(a){if(a.temporaryProof)throw a.code="credential-already-in-use",rs(a);wa(a)}},cu={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:Ea,F:wa,C:!0},hu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(a){if(!!a[sa]^!!a.refreshToken)throw new x("internal-error")},C:!0,Na:!0};function lu(a,b,t){if(!function(a,b){if(!b||!b.length)return!0;if(!a)return!1;for(var t=0;t<b.length;t++){var e=a[b[t]];if(null==e||""===e)return!1}return!0}(t,b.M))return Fe(new x("internal-error"));var e,n=!!b.Na,r=b.Tb||"POST";return Me(t).then(b.B).then((function(){return b.U&&(t.returnSecureToken=!0),b.C&&a.b&&void 0===t.tenantId&&(t.tenantId=a.b),ma(a,n?a.h:a.i,b.endpoint,r,t,b.Gb,b.kb||!1)})).then((function(g){return e=g,b.Xa?b.Xa(t,e):e})).then(b.F).then((function(){if(!b.Z)return e;if(!(b.Z in e))throw new x("internal-error");return e[b.Z]}))}function fu(a){return pu({error:{errors:[{message:a}],code:400,message:a}})}function pu(a,b){var t=(a.error&&a.error.errors&&a.error.errors[0]||{}).reason||"",e={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(t=e[t]?new x(e[t]):null)return t;for(var n in t=a.error&&a.error.message||"",St(e={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},b||{}),b=(b=t.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<b.length?b[1]:void 0,e)if(0===t.indexOf(n))return new x(e[n],b);return!b&&a&&(b=zr(a)),new x("internal-error",b)}function du(a){this.b=a,this.a=null,this.qb=function(a){return(mu||(mu=new Ae((function(a,b){function t(){Jr(),Ur("gapi.load")("gapi.iframes",{callback:a,ontimeout:function(){Jr(),b(Error("Network Error"))},timeout:gu.get()})}if(Ur("gapi.iframes.Iframe"))a();else if(Ur("gapi.load"))t();else{var e="__iframefcb"+Math.floor(1e6*Math.random()).toString();f[e]=function(){Ur("gapi.load")?t():b(Error("Network Error"))},Me(Xs(e=Lt(vu,{onload:e}))).o((function(){b(Error("Network Error"))}))}})).o((function(a){throw mu=null,a})))).then((function(){return new Ae((function(b,t){Ur("gapi.iframes.getContext")().open({where:document.body,url:a.b,messageHandlersFilter:Ur("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(e){function n(){clearTimeout(r),b()}a.a=e,a.a.restyle({setHideOnLeave:!1});var r=setTimeout((function(){t(Error("Network Error"))}),yu.get());e.ping(n).then(n,(function(){t(Error("Network Error"))}))}))}))}))}(this)}var vu=new Nt(Pt,"https://apis.google.com/js/api.js?onload=%{onload}"),gu=new Xr(3e4,6e4),yu=new Xr(5e3,15e3),mu=null;function bu(a,b,t,e){this.l=a,this.i=b,this.h=t,this.g=e,this.f=null,this.g?a=Qn((a=Gn(this.g.url)).f,a.a,a.g,"/emulator/auth/iframe"):a=Qn("https",this.l,null,"/__/auth/iframe"),this.a=a,zn(this.a,"apiKey",this.i),zn(this.a,"appName",this.h),this.b=null,this.c=[]}function _u(a,b,t,e,n,r){this.u=a,this.s=b,this.c=t,this.v=e,this.m=r,this.h=this.g=this.l=null,this.a=n,this.i=this.f=null}function wu(a){try{return e.a.app(a).auth().Ga()}catch(t){return[]}}function Eu(a,b,t,e,n,r){this.s=a,this.g=b,this.b=t,this.f=r,this.c=e||null,this.h=n||null,this.l=this.u=this.A=null,this.i=[],this.v=this.a=null}function Iu(a){var b=_r();return function(a){return lu(a,Ga,{}).then((function(b){return b.authorizedDomains||[]}))}(a).then((function(t){t:{var e=Gn(b),n=e.f;e=e.a;for(var r=0;r<t.length;r++){var g=t[r],o=e,c=n;if(0==g.indexOf("chrome-extension://")?o=Gn(g).a==o&&"chrome-extension"==c:"http"!=c&&"https"!=c?o=!1:Or.test(g)?o=o==g:(g=g.split(".").join("\\."),o=new RegExp("^(.+\\."+g+"|"+g+")$","i").test(o)),o){t=!0;break t}}t=!1}if(!t)throw new es(_r())}))}function Tu(a){return a.v||(a.v=Cr().then((function(){if(!a.u){var b=a.c,t=a.h,e=wu(a.b),n=new bu(a.s,a.g,a.b,a.f);n.f=b,n.b=t,n.c=st(e||[]),a.u=n.toString()}a.m=new du(a.u),function(a){if(!a.m)throw Error("IfcHandler must be initialized!");!function(a,b){a.qb.then((function(){a.a.register("authEvent",b,Ur("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(a.m,(function(b){var t={};if(b&&b.authEvent){var e=!1;for(b=th(b.authEvent),t=0;t<a.i.length;t++)e=a.i[t](b)||e;return(t={}).status=e?"ACK":"ERROR",Me(t)}return t.status="ERROR",Me(t)}))}(a)}))),a.v}function Ou(a){return a.l||(a.A=a.c?Mr(a.c,wu(a.b)):null,a.l=new ia(a.g,U(a.h),a.A),a.f&&fa(a.l,a.f)),a.l}function Su(a,b,t,e,n,r,g,o,c,p,h,l){return(a=new _u(a,b,t,e,n,l)).l=r,a.g=g,a.h=o,a.b=Tt(c||null),a.f=p,a.xb(h).toString()}function Cu(a){if(this.a=a||e.a.INTERNAL.reactNative&&e.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new x("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Nu(a){this.b=a,this.a={},this.f=q(this.c,this)}bu.prototype.toString=function(){return this.f?zn(this.a,"v",this.f):ar(this.a.b,"v"),this.b?zn(this.a,"eid",this.b):ar(this.a.b,"eid"),this.c.length?zn(this.a,"fw",this.c.join(",")):ar(this.a.b,"fw"),this.a.toString()},_u.prototype.xb=function(a){return this.i=a,this},_u.prototype.toString=function(){if(this.m){var a=Gn(this.m.url);a=Qn(a.f,a.a,a.g,"/emulator/auth/handler")}else a=Qn("https",this.u,null,"/__/auth/handler");if(zn(a,"apiKey",this.s),zn(a,"appName",this.c),zn(a,"authType",this.v),this.a.isOAuthProvider){var b=this.a;try{var t=e.a.app(this.c).auth().ka()}catch(e){t=null}for(var n in b.nb=t,zn(a,"providerId",this.a.providerId),b=Wr((t=this.a).Hb))b[n]=b[n].toString();n=t.Pc,b=Tt(b);for(var r=0;r<n.length;r++){var o=n[r];o in b&&delete b[o]}t.ob&&t.nb&&!b[t.ob]&&(b[t.ob]=t.nb),It(b)||zn(a,"customParameters",zr(b))}if("function"==typeof this.a.Pb&&((t=this.a.Pb()).length&&zn(a,"scopes",t.join(","))),this.l?zn(a,"redirectUrl",this.l):ar(a.b,"redirectUrl"),this.g?zn(a,"eventId",this.g):ar(a.b,"eventId"),this.h?zn(a,"v",this.h):ar(a.b,"v"),this.b)for(var g in this.b)this.b.hasOwnProperty(g)&&!Wn(a,g)&&zn(a,g,this.b[g]);return this.i?zn(a,"tid",this.i):ar(a.b,"tid"),this.f?zn(a,"eid",this.f):ar(a.b,"eid"),(g=wu(this.c)).length&&zn(a,"fw",g.join(",")),a.toString()},(n=Eu.prototype).Nb=function(a,b,t){var e=new x("popup-closed-by-user"),n=new x("web-storage-unsupported"),r=this,g=!1;return this.la().then((function(){(function(a){var b={type:"webStorageSupport"};return Tu(a).then((function(){return function(a,b){return a.qb.then((function(){return new Ae((function(t){a.a.send(b.type,b,t,Ur("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(a.m,b)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(r).then((function(t){t||(a&&Ir(a),b(n),g=!0)}))})).o((function(){})).then((function(){if(!g)return function(a){return new Ae((function(b){return function t(){Rn(2e3).then((function(){if(a&&!a.closed)return t();b()}))}()}))}(a)})).then((function(){if(!g)return Rn(t).then((function(){b(e)}))}))},n.Wb=function(){var a=Fr();return!Kr(a)&&!Yr(a)},n.Sb=function(){return!1},n.Lb=function(a,b,t,e,n,r,g,o){if(!a)return Fe(new x("popup-blocked"));if(g&&!Kr())return this.la().o((function(p){Ir(a),n(p)})),e(),Me();this.a||(this.a=Iu(Ou(this)));var c=this;return this.a.then((function(){var p=c.la().o((function(t){throw Ir(a),n(t),t}));return e(),p})).then((function(){(Jo(t),g)||wr(Su(c.s,c.g,c.b,b,t,null,r,c.c,void 0,c.h,o,c.f),a)})).o((function(p){throw"auth/network-request-failed"==p.code&&(c.a=null),p}))},n.Mb=function(a,b,t,e){this.a||(this.a=Iu(Ou(this)));var n=this;return this.a.then((function(){Jo(b),wr(Su(n.s,n.g,n.b,a,b,_r(),t,n.c,void 0,n.h,e,n.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(n.a=null),t}))},n.la=function(){var a=this;return Tu(this).then((function(){return a.m.qb})).o((function(){throw a.a=null,new x("network-request-failed")}))},n.Zb=function(){return!0},n.Ea=function(a){this.i.push(a)},n.Ra=function(a){it(this.i,(function(b){return b==a}))},(n=Cu.prototype).get=function(a){return Me(this.a.getItem(a)).then((function(b){return b&&Gr(b)}))},n.set=function(a,b){return Me(this.a.setItem(a,zr(b)))},n.T=function(a){return Me(this.a.removeItem(a))},n.ca=function(){},n.ia=function(){};var ku,Au=[];function ju(a,b,t){It(a.a)&&a.b.addEventListener("message",a.f),void 0===a.a[b]&&(a.a[b]=[]),a.a[b].push(t)}function Pu(a){this.a=a}function xu(a){this.c=a,this.b=!1,this.a=[]}function Ru(a,b,t,e){var n,g,r,o,c=t||{},p=null;if(a.b)return Fe(Error("connection_unavailable"));var h=e?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ae((function(t,e){l?(n=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),r=setTimeout((function(){e(Error("unsupported_event"))}),h),p={messageChannel:l,onMessage:g=function(c){c.data.eventId===n&&("ack"===c.data.status?(clearTimeout(r),o=setTimeout((function(){e(Error("timeout"))}),3e3)):"done"===c.data.status?(clearTimeout(o),void 0!==c.data.response?t(c.data.response):e(Error("unknown_error"))):(clearTimeout(r),clearTimeout(o),e(Error("invalid_response"))))}},a.a.push(p),l.port1.addEventListener("message",g),a.c.postMessage({eventType:b,eventId:n,data:c},[l.port2])):e(Error("connection_unavailable"))})).then((function(t){return Du(a,p),t})).o((function(t){throw Du(a,p),t}))}function Du(a,b){if(b){var t=b.messageChannel,e=b.onMessage;t&&(t.port1.removeEventListener("message",e),t.port1.close()),it(a.a,(function(t){return t==b}))}}function Lu(){if(!Vu())throw new x("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.v=f.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.l=null,this.s=!1,this.i=null;var a=this;Ar()&&self?(this.m=function(){var a=Ar()?self:null;if(X(Au,(function(t){t.b==a&&(b=t)})),!b){var b=new Nu(a);Au.push(b)}return b}(),ju(this.m,"keyChanged",(function(b,t){return zu(a).then((function(e){return 0<e.length&&X(a.a,(function(t){t(e)})),{keyProcessed:et(e,t.key)}}))})),ju(this.m,"ping",(function(){return Me(["keyChanged"])}))):function(){var a=f.navigator;return a&&a.serviceWorker?Me().then((function(){return a.serviceWorker.ready})).then((function(b){return b.active||null})).o((function(){return null})):Me(null)}().then((function(b){(a.i=b)&&(a.g=new xu(new Pu(b)),Ru(a.g,"ping",null,!0).then((function(t){t[0].fulfilled&&et(t[0].value,"keyChanged")&&(a.s=!0)})).o((function(){})))}))}function Mu(a){return new Ae((function(b,t){var e=a.v.open("firebaseLocalStorageDb",1);e.onerror=function(e){try{e.preventDefault()}catch(t){}t(Error(e.target.error))},e.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){t(e)}},e.onsuccess=function(e){(e=e.target.result).objectStoreNames.contains("firebaseLocalStorage")?b(e):function(a){return new Ae((function(b,t){var e=a.v.deleteDatabase("firebaseLocalStorageDb");e.onsuccess=function(){b()},e.onerror=function(e){t(Error(e.target.error))}}))}(a).then((function(){return Mu(a)})).then((function(t){b(t)})).o((function(e){t(e)}))}}))}function Fu(a){return a.h||(a.h=Mu(a)),a.h}function Uu(a,b){var t=0;return new Ae((function e(n,r){Fu(a).then(b).then(n).o((function(g){if(!(3<++t))return Fu(a).then((function(t){return t.close(),a.h=void 0,e(n,r)})).o((function(t){r(t)}));r(g)}))}))}function Vu(){try{return!!f.indexedDB}catch(t){return!1}}function qu(a){return a.objectStore("firebaseLocalStorage")}function Bu(a,b){return a.transaction(["firebaseLocalStorage"],b?"readwrite":"readonly")}function Hu(a){return new Ae((function(b,t){a.onsuccess=function(t){t&&t.target?b(t.target.result):b()},a.onerror=function(e){t(e.target.error)}}))}function Ku(a,b){return a.g&&a.i&&function(){var a=f.navigator;return a&&a.serviceWorker&&a.serviceWorker.controller||null}()===a.i?Ru(a.g,"keyChanged",{key:b},a.s).then((function(){})).o((function(){})):Me()}function zu(a){return Fu(a).then((function(b){var t=qu(Bu(b,!1));return t.getAll?Hu(t.getAll()):new Ae((function(e,n){var r=[],g=t.openCursor();g.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},g.onerror=function(t){n(t.target.error)}}))})).then((function(b){var t={},e=[];if(0==a.b){for(e=0;e<b.length;e++)t[b[e].fbase_key]=b[e].value;e=function t(a,b){var e,n=[];for(e in a)e in b?typeof a[e]!=typeof b[e]?n.push(e):"object"==typeof a[e]&&null!=a[e]&&null!=b[e]?0<t(a[e],b[e]).length&&n.push(e):a[e]!==b[e]&&n.push(e):n.push(e);for(e in b)e in a||n.push(e);return n}(a.c,t),a.c=t}return e}))}function Wu(a){a.l&&a.l.cancel("STOP_EVENT"),a.f&&(clearTimeout(a.f),a.f=null)}function Gu(a){var b=this,t=null;this.a=[],this.type="indexedDB",this.c=a,this.b=Me().then((function(){if(Vu()){var e=Qr(),n="__sak"+e;return ku||(ku=new Lu),(t=ku).set(n,e).then((function(){return t.get(n)})).then((function(r){if(r!==e)throw Error("indexedDB not supported!");return t.T(n)})).then((function(){return t})).o((function(){return b.c}))}return b.c})).then((function(t){return b.type=t.type,t.ca((function(t){X(b.a,(function(e){e(t)}))})),t}))}function Qu(){this.a={},this.type="inMemory"}function Yu(){if(!function(){var a="Node"==jr();if(!(a=Ju()||a&&e.a.INTERNAL.node&&e.a.INTERNAL.node.localStorage))return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==jr())throw new x("internal-error","The LocalStorage compatibility library was not found.");throw new x("web-storage-unsupported")}this.a=Ju()||e.a.INTERNAL.node.localStorage,this.type="localStorage"}function Ju(){try{var a=f.localStorage,b=Qr();return a&&(a.setItem(b,"1"),a.removeItem(b)),a}catch(t){return null}}function Xu(){this.type="nullStorage"}function $u(){if(!function(){var a="Node"==jr();if(!(a=Zu()||a&&e.a.INTERNAL.node&&e.a.INTERNAL.node.sessionStorage))return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==jr())throw new x("internal-error","The SessionStorage compatibility library was not found.");throw new x("web-storage-unsupported")}this.a=Zu()||e.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Zu(){try{var a=f.sessionStorage,b=Qr();return a&&(a.setItem(b,"1"),a.removeItem(b)),a}catch(t){return null}}function tc(){var a={};a.Browser=rc,a.Node=ic,a.ReactNative=oc,a.Worker=sc,this.a=a[jr()]}Nu.prototype.c=function(a){var b=a.data.eventType,t=a.data.eventId,e=this.a[b];if(e&&0<e.length){a.ports[0].postMessage({status:"ack",eventId:t,eventType:b,response:null});var n=[];X(e,(function(t){n.push(Me().then((function(){return t(a.origin,a.data.data)})))})),Ve(n).then((function(e){var g=[];X(e,(function(t){g.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})})),X(g,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),a.ports[0].postMessage({status:"done",eventId:t,eventType:b,response:g})}))}},Pu.prototype.postMessage=function(a,b){this.a.postMessage(a,b)},xu.prototype.close=function(){for(;0<this.a.length;)Du(this,this.a[0]);this.b=!0},(n=Lu.prototype).set=function(a,b){var t=this,e=!1;return Uu(this,(function(t){return Hu((t=qu(Bu(t,!0))).get(a))})).then((function(n){return Uu(t,(function(r){if(r=qu(Bu(r,!0)),n)return n.value=b,Hu(r.put(n));t.b++,e=!0;var g={};return g.fbase_key=a,g.value=b,Hu(r.add(g))}))})).then((function(){return t.c[a]=b,Ku(t,a)})).na((function(){e&&t.b--}))},n.get=function(a){return Uu(this,(function(b){return Hu(qu(Bu(b,!1)).get(a))})).then((function(b){return b&&b.value}))},n.T=function(a){var b=this,t=!1;return Uu(this,(function(e){return t=!0,b.b++,Hu(qu(Bu(e,!0)).delete(a))})).then((function(){return delete b.c[a],Ku(b,a)})).na((function(){t&&b.b--}))},n.ca=function(a){0==this.a.length&&function(a){Wu(a),function b(){a.f=setTimeout((function(){a.l=zu(a).then((function(t){0<t.length&&X(a.a,(function(e){e(t)}))})).then((function(){b()})).o((function(t){"STOP_EVENT"!=t.message&&b()}))}),800)}()}(this),this.a.push(a)},n.ia=function(a){it(this.a,(function(b){return b==a})),0==this.a.length&&Wu(this)},(n=Gu.prototype).get=function(a){return this.b.then((function(b){return b.get(a)}))},n.set=function(a,b){return this.b.then((function(t){return t.set(a,b)}))},n.T=function(a){return this.b.then((function(b){return b.T(a)}))},n.ca=function(a){this.a.push(a)},n.ia=function(a){it(this.a,(function(b){return b==a}))},(n=Qu.prototype).get=function(a){return Me(this.a[a])},n.set=function(a,b){return this.a[a]=b,Me()},n.T=function(a){return delete this.a[a],Me()},n.ca=function(){},n.ia=function(){},(n=Yu.prototype).get=function(a){var b=this;return Me().then((function(){return Gr(b.a.getItem(a))}))},n.set=function(a,b){var t=this;return Me().then((function(){var e=zr(b);null===e?t.T(a):t.a.setItem(a,e)}))},n.T=function(a){var b=this;return Me().then((function(){b.a.removeItem(a)}))},n.ca=function(a){f.window&&yn(f.window,"storage",a)},n.ia=function(a){f.window&&_n(f.window,"storage",a)},(n=Xu.prototype).get=function(){return Me(null)},n.set=function(){return Me()},n.T=function(){return Me()},n.ca=function(){},n.ia=function(){},(n=$u.prototype).get=function(a){var b=this;return Me().then((function(){return Gr(b.a.getItem(a))}))},n.set=function(a,b){var t=this;return Me().then((function(){var e=zr(b);null===e?t.T(a):t.a.setItem(a,e)}))},n.T=function(a){var b=this;return Me().then((function(){b.a.removeItem(a)}))},n.ca=function(){},n.ia=function(){};var ec,nc,rc={D:Yu,ab:$u},ic={D:Yu,ab:$u},oc={D:Cu,ab:Xu},sc={D:Yu,ab:Xu},ac={qd:"local",NONE:"none",sd:"session"};function uc(){var a=!(Yr(Fr())||!kr()),b=Kr(),t=Vr();this.v=a,this.i=b,this.l=t,this.a={},ec||(ec=new tc),a=ec;try{this.g=!mr()&&ti()||!f.indexedDB?new a.a.D:new Gu(Ar()?new Qu:new a.a.D)}catch(t){this.g=new Qu,this.i=!0}try{this.h=new a.a.ab}catch(t){this.h=new Qu}this.m=new Qu,this.f=q(this.Xb,this),this.b={}}function cc(){return nc||(nc=new uc),nc}function hc(a,b){switch(b){case"session":return a.h;case"none":return a.m;default:return a.g}}function lc(a,b){return"firebase:"+a.name+(b?":"+b:"")}function fc(a,b,t){return t=lc(b,t),"local"==b.D&&(a.b[t]=null),hc(a,b.D).T(t)}function pc(a){a.c&&(clearInterval(a.c),a.c=null)}function dc(a){this.a=a,this.b=cc()}(n=uc.prototype).get=function(a,b){return hc(this,a.D).get(lc(a,b))},n.set=function(a,b,t){var e=lc(a,t),n=this,r=hc(this,a.D);return r.set(e,b).then((function(){return r.get(e)})).then((function(g){"local"==a.D&&(n.b[e]=g)}))},n.addListener=function(a,b,t){a=lc(a,b),this.l&&(this.b[a]=f.localStorage.getItem(a)),It(this.a)&&(hc(this,"local").ca(this.f),this.i||(mr()||!ti())&&f.indexedDB||!this.l||function(a){pc(a),a.c=setInterval((function(){for(var b in a.a){var t=f.localStorage.getItem(b),e=a.b[b];t!=e&&(a.b[b]=t,t=new an({type:"storage",key:b,target:window,oldValue:e,newValue:t,a:!0}),a.Xb(t))}}),1e3)}(this)),this.a[a]||(this.a[a]=[]),this.a[a].push(t)},n.removeListener=function(a,b,t){a=lc(a,b),this.a[a]&&(it(this.a[a],(function(e){return e==t})),0==this.a[a].length&&delete this.a[a]),It(this.a)&&(hc(this,"local").ia(this.f),pc(this))},n.Xb=function(a){if(a&&a.g){var b=a.a.key;if(null==b)for(var t in this.a){var e=this.b[t];void 0===e&&(e=null);var n=f.localStorage.getItem(t);n!==e&&(this.b[t]=n,this.lb(t))}else if(0==b.indexOf("firebase:")&&this.a[b]){if(void 0!==a.a.a?hc(this,"local").ia(this.f):pc(this),this.v)if(t=f.localStorage.getItem(b),(e=a.a.newValue)!==t)null!==e?f.localStorage.setItem(b,e):f.localStorage.removeItem(b);else if(this.b[b]===e&&void 0===a.a.a)return;var r=this;t=function(){void 0===a.a.a&&r.b[b]===f.localStorage.getItem(b)||(r.b[b]=f.localStorage.getItem(b),r.lb(b))},re&&ge&&10==ge&&f.localStorage.getItem(b)!==a.a.newValue&&a.a.newValue!==a.a.oldValue?setTimeout(t,10):t()}}else X(a,q(this.lb,this))},n.lb=function(a){this.a[a]&&X(this.a[a],(function(b){b()}))};var vc,gc={name:"authEvent",D:"local"};function yc(){this.a=cc()}function mc(a,b){this.b=bc,this.f=f.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.h=a,this.i=b,this.l=f.Int32Array?new Int32Array(64):Array(64),void 0===vc&&(vc=f.Int32Array?new Int32Array(Oc):Oc),this.reset()}j(mc,(function(){this.b=-1}));for(var bc=64,_c=bc-1,wc=[],Ec=0;Ec<_c;Ec++)wc[Ec]=0;var Ic=ot(128,wc);function ol(a){for(var b=a.f,t=a.l,e=0,n=0;n<b.length;)t[e++]=b[n]<<24|b[n+1]<<16|b[n+2]<<8|b[n+3],n=4*e;for(b=16;64>b;b++){n=0|t[b-15],e=0|t[b-2];var r=(0|t[b-16])+((n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3)|0,g=(0|t[b-7])+((e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)|0;t[b]=r+g|0}e=0|a.a[0],n=0|a.a[1];var o=0|a.a[2],c=0|a.a[3],p=0|a.a[4],h=0|a.a[5],l=0|a.a[6];for(r=0|a.a[7],b=0;64>b;b++){var f=((e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10))+(e&n^e&o^n&o)|0;g=(r=r+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))|0)+((g=(g=p&h^~p&l)+(0|vc[b])|0)+(0|t[b])|0)|0,r=l,l=h,h=p,p=c+g|0,c=o,o=n,n=e,e=g+f|0}a.a[0]=a.a[0]+e|0,a.a[1]=a.a[1]+n|0,a.a[2]=a.a[2]+o|0,a.a[3]=a.a[3]+c|0,a.a[4]=a.a[4]+p|0,a.a[5]=a.a[5]+h|0,a.a[6]=a.a[6]+l|0,a.a[7]=a.a[7]+r|0}function Tc(a,b,t){void 0===t&&(t=b.length);var e=0,n=a.c;if("string"==typeof b)for(;e<t;)a.f[n++]=b.charCodeAt(e++),n==a.b&&(ol(a),n=0);else{if(!w(b))throw Error("message must be string or array");for(;e<t;){var r=b[e++];if(!("number"==typeof r&&0<=r&&255>=r&&r==(0|r)))throw Error("message must be a byte array");a.f[n++]=r,n==a.b&&(ol(a),n=0)}}a.c=n,a.g+=t}mc.prototype.reset=function(){this.g=this.c=0,this.a=f.Int32Array?new Int32Array(this.i):st(this.i)};var Oc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Sc(){mc.call(this,8,Cc)}j(Sc,mc);var Cc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Nc(a,b,t,e,n,r){this.m=a,this.h=b,this.l=t,this.v=e||null,this.u=n||null,this.s=r,this.i=b+":"+t,this.A=new yc,this.g=new dc(this.i),this.f=null,this.b=[],this.a=this.c=null}function kc(a){return new x("invalid-cordova-configuration",a)}function Ac(a){var b=new Sc;Tc(b,a),a=[];var t=8*b.g;56>b.c?Tc(b,Ic,56-b.c):Tc(b,Ic,b.b-(b.c-56));for(var e=63;56<=e;e--)b.f[e]=255&t,t/=256;for(ol(b),e=t=0;e<b.h;e++)for(var n=24;0<=n;n-=8)a[t++]=b.a[e]>>n&255;return function(a){return Z(a,(function(b){return 1<(b=b.toString(16)).length?b:"0"+b})).join("")}(a)}function jc(a,b){for(var t=0;t<a.b.length;t++)try{a.b[t](b)}catch(t){}}function Pc(a){return a.f||(a.f=a.la().then((function(){return new Ae((function(b){a.Ea((function t(e){return b(e),a.Ra(t),!1})),function(a){function b(g){e=!0,n&&n.cancel(),xc(a).then((function(e){var n=t;if(e&&g&&g.url){var p=null;-1!=(n=go(g.url)).indexOf("/__/auth/callback")&&(p=(p="object"==typeof(p=Gr(Wn(p=Gn(n),"firebaseError")||null))?R(p):null)?new Xo(e.c,e.b,null,null,p,null,e.S()):new Xo(e.c,e.b,n,e.f,null,null,e.S())),n=p||t}jc(a,n)}))}var t=new Xo("unknown",null,null,null,new x("no-auth-event")),e=!1,n=Rn(500).then((function(){return xc(a).then((function(){e||jc(a,t)}))})),r=f.handleOpenURL;f.handleOpenURL=function(g){if(0==g.toLowerCase().indexOf(Ur("BuildInfo.packageName",f).toLowerCase()+"://")&&b({url:g}),"function"==typeof r)try{r(g)}catch(t){console.error(t)}},ts||(ts=new $o),function(a){var b=ts;b.a.push(a),b.b||(b.b=function(t){for(var e=0;e<b.a.length;e++)b.a[e](t)},"function"==typeof(a=Ur("universalLinks.subscribe",f))&&a(null,b.b))}(b)}(a)}))}))),a.f}function xc(a){var b=null;return function(a){return a.b.get(gc,a.a).then((function(b){return th(b)}))}(a.g).then((function(t){return b=t,fc((t=a.g).b,gc,t.a)})).then((function(){return b}))}function Rc(a){this.a=a,this.b=cc()}(n=Nc.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(Nr(void 0)?Cr().then((function(){return new Ae((function(a,b){var t=f.document,e=setTimeout((function(){b(Error("Cordova framework is not ready."))}),1e3);t.addEventListener("deviceready",(function(){clearTimeout(e),a()}),!1)}))})):Fe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Ur("universalLinks.subscribe",f))throw kc("cordova-universal-links-plugin-fix is not installed");if(void 0===Ur("BuildInfo.packageName",f))throw kc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ur("cordova.plugins.browsertab.openUrl",f))throw kc("cordova-plugin-browsertab is not installed");if("function"!=typeof Ur("cordova.InAppBrowser.open",f))throw kc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new x("cordova-not-ready")}))},n.Nb=function(a,b){return b(new x("operation-not-supported-in-this-environment")),Me()},n.Lb=function(){return Fe(new x("operation-not-supported-in-this-environment"))},n.Zb=function(){return!1},n.Wb=function(){return!0},n.Sb=function(){return!0},n.Mb=function(a,b,t,e){if(this.c)return Fe(new x("redirect-operation-pending"));var n=this,r=f.document,g=null,o=null,c=null,p=null;return this.c=Me().then((function(){return Jo(b),Pc(n)})).then((function(){return function(a,b,t,e,n){var r=function(){for(var a=20,b=[];0<a;)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return b.join("")}(),g=new Xo(b,e,null,r,new x("no-auth-event"),null,n),o=Ur("BuildInfo.packageName",f);if("string"!=typeof o)throw new x("invalid-cordova-configuration");var c=Ur("BuildInfo.displayName",f),p={};if(Fr().toLowerCase().match(/iphone|ipad|ipod/))p.ibi=o;else{if(!Fr().toLowerCase().match(/android/))return Fe(new x("operation-not-supported-in-this-environment"));p.apn=o}c&&(p.appDisplayName=c),r=Ac(r),p.sessionId=r;var h=Su(a.m,a.h,a.l,b,t,null,e,a.v,p,a.u,n,a.s);return a.la().then((function(){var t=a.i;return a.A.a.set(gc,g.w(),t)})).then((function(){var t=Ur("cordova.plugins.browsertab.isAvailable",f);if("function"!=typeof t)throw new x("invalid-cordova-configuration");var e=null;t((function(t){if(t){if("function"!=typeof(e=Ur("cordova.plugins.browsertab.openUrl",f)))throw new x("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=Ur("cordova.InAppBrowser.open",f)))throw new x("invalid-cordova-configuration");t=Fr(),a.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(n,a,b,t,e)})).then((function(){return new Ae((function(t,e){o=function(){var e=Ur("cordova.plugins.browsertab.close",f);return t(),"function"==typeof e&&e(),n.a&&"function"==typeof n.a.close&&(n.a.close(),n.a=null),!1},n.Ea(o),c=function(){g||(g=Rn(2e3).then((function(){e(new x("redirect-cancelled-by-user"))})))},p=function(){$r()&&c()},r.addEventListener("resume",c,!1),Fr().toLowerCase().match(/android/)||r.addEventListener("visibilitychange",p,!1)})).o((function(t){return xc(n).then((function(){throw t}))}))})).na((function(){c&&r.removeEventListener("resume",c,!1),p&&r.removeEventListener("visibilitychange",p,!1),g&&g.cancel(),o&&n.Ra(o),n.c=null}))},n.Ea=function(a){this.b.push(a),Pc(this).o((function(b){"auth/invalid-cordova-configuration"===b.code&&(b=new Xo("unknown",null,null,null,new x("no-auth-event")),a(b))}))},n.Ra=function(a){it(this.b,(function(b){return b==a}))};var Dc={name:"pendingRedirect",D:"session"};function Lc(a){return fc(a.b,Dc,a.a)}function Mc(a,b,t,e){this.h={},this.u=0,this.O=a,this.m=b,this.v=t,this.G=e,this.i=[],this.f=!1,this.l=q(this.s,this),this.b=new $c,this.A=new ih,this.g=new Rc(Jc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Fc(this.O,this.m,this.v,D,this.G)}function Fc(a,b,t,n,r){var o=e.a.SDK_VERSION||null;return Nr()?new Nc(a,b,t,o,n,r):new Eu(a,b,t,o,n,r)}function Uc(a){a.f||(a.f=!0,a.a.Ea(a.l));var b=a.a;return a.a.la().o((function(t){throw a.a==b&&a.reset(),t}))}function Vc(a){a.a.Wb()&&Uc(a).o((function(b){var t=new Xo("unknown",null,null,null,new x("operation-not-supported-in-this-environment"));Wc(b)&&a.s(t)})),a.a.Sb()||Zc(a.b)}function qc(a,b){et(a.i,b)||a.i.push(b),a.f||function(a){return a.b.get(Dc,a.a).then((function(b){return"pending"==b}))}(a.g).then((function(t){t?Lc(a.g).then((function(){Uc(a).o((function(t){var e=new Xo("unknown",null,null,null,new x("operation-not-supported-in-this-environment"));Wc(t)&&a.s(e)}))})):Vc(a)})).o((function(){Vc(a)}))}function Bc(a,b){it(a.i,(function(t){return t==b}))}Mc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Fc(this.O,this.m,this.v,null,this.G),this.h={}},Mc.prototype.s=function(a){if(!a)throw new x("invalid-auth-event");if(6e5<=A()-this.u&&(this.h={},this.u=0),a&&a.getUid()&&this.h.hasOwnProperty(a.getUid()))return!1;for(var b=!1,t=0;t<this.i.length;t++){var e=this.i[t];if(e.Eb(a.c,a.b)){(b=this.c[a.c])&&(b.i(a,e),a&&(a.f||a.b)&&(this.h[a.getUid()]=!0,this.u=A())),b=!0;break}}return Zc(this.b),b};var Hc=new Xr(2e3,1e4),Kc=new Xr(3e4,6e4);function zc(a,b,t,e,n,r,g){return a.a.Lb(b,t,e,(function(){a.f||(a.f=!0,a.a.Ea(a.l))}),(function(){a.reset()}),n,r,g)}function Wc(a){return!(!a||"auth/cordova-not-ready"!=a.code)}function Gc(a,b,t,e,n){var r;return function(a){return a.b.set(Dc,"pending",a.a)}(a.g).then((function(){return a.a.Mb(b,t,e,n).o((function(g){if(Wc(g))throw new x("operation-not-supported-in-this-environment");return r=g,Lc(a.g).then((function(){throw r}))})).then((function(){return a.a.Zb()?new Ae((function(){})):Lc(a.g).then((function(){return a.qa()})).then((function(){})).o((function(){}))}))}))}function Qc(a,b,t,e,n){return a.a.Nb(e,(function(e){b.ma(t,null,e,n)}),Hc.get())}Mc.prototype.qa=function(){return this.b.qa()};var Yc={};function Jc(a,b,t){return a=a+":"+b,t&&(a=a+":"+t.url),a}function Xc(a,b,t,e){var n=Jc(b,t,e);return Yc[n]||(Yc[n]=new Mc(a,b,t,e)),Yc[n]}function $c(){this.b=null,this.f=[],this.c=[],this.a=null,this.h=this.g=!1}function Zc(a){a.g||(a.g=!0,rh(a,!1,null,null))}function eh(a){a.g&&!a.h&&rh(a,!1,null,null)}function nh(a,b){if(a.b=function(){return Me(b)},a.f.length)for(var t=0;t<a.f.length;t++)a.f[t](b)}function rh(a,b,t,e){b?e?function(a,b){if(a.b=function(){return Fe(b)},a.c.length)for(var t=0;t<a.c.length;t++)a.c[t](b)}(a,e):nh(a,t):nh(a,{user:null}),a.f=[],a.c=[]}function ih(){}function em(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(a){this.hb=a},enumerable:!1})}function oh(a,b){this.a=b,oi(this,"verificationId",a)}function sh(a,b,t,e){return new Go(a).eb(b,t).then((function(t){return new oh(t,e)}))}function ah(a){var b=eo(a);if(!(b&&b.exp&&b.auth_time&&b.iat))throw new x("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");si(this,{token:a,expirationTime:Zr(1e3*b.exp),authTime:Zr(1e3*b.auth_time),issuedAtTime:Zr(1e3*b.iat),signInProvider:b.firebase&&b.firebase.sign_in_provider?b.firebase.sign_in_provider:null,signInSecondFactor:b.firebase&&b.firebase.sign_in_second_factor?b.firebase.sign_in_second_factor:null,claims:b})}function uh(a,b,t){var e=b&&b[hh];if(!e)throw new x("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=a,this.f=Tt(b),this.g=t,this.c=new yo(null,e),this.b=[];var n=this;X(b[ch]||[],(function(t){(t=hi(t))&&n.b.push(t)})),oi(this,"auth",this.a),oi(this,"session",this.c),oi(this,"hints",this.b)}$c.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},$c.prototype.i=function(a,b){if(a){this.reset(),this.g=!0;var t=a.c,e=a.b,n=a.a&&"auth/web-storage-unsupported"==a.a.code,r=a.a&&"auth/operation-not-supported-in-this-environment"==a.a.code;this.h=!(!n&&!r),"unknown"!=t||n||r?a.a?(rh(this,!0,null,a.a),Me()):b.Fa(t,e)?function(a,b,t){t=t.Fa(b.c,b.b);var e=b.g,n=b.f,r=b.h,g=b.S(),o=!!b.c.match(/Redirect$/);t(e,n,g,r).then((function(t){rh(a,o,t,null)})).o((function(t){rh(a,o,null,t)}))}(this,a,b):Fe(new x("invalid-auth-event")):(rh(this,!1,null,null),Me())}else Fe(new x("invalid-auth-event"))},$c.prototype.qa=function(){var a=this;return new Ae((function(b,t){a.b?a.b().then(b,t):(a.f.push(b),a.c.push(t),function(a){var b=new x("timeout");a.a&&a.a.cancel(),a.a=Rn(Kc.get()).then((function(){a.b||(a.g=!0,rh(a,!0,null,b))}))}(a))}))},ih.prototype.i=function(a,b){if(a){var t=a.c,e=a.b;a.a?(b.ma(a.c,null,a.a,a.b),Me()):b.Fa(t,e)?function(a,b){var t=a.b,e=a.c;b.Fa(e,t)(a.g,a.f,a.S(),a.h).then((function(n){b.ma(e,n,null,t)})).o((function(n){b.ma(e,null,n,t)}))}(a,b):Fe(new x("invalid-auth-event"))}else Fe(new x("invalid-auth-event"))},oh.prototype.confirm=function(a){return a=Qo(this.verificationId,a),this.a(a)};var ch="mfaInfo",hh="mfaPendingCredential";function lh(a,b,t,e){x.call(this,"multi-factor-auth-required",e,b),this.b=new uh(a,b,t),oi(this,"resolver",this.b)}function fh(a,b,t){if(a&&I(a.serverResponse)&&"auth/multi-factor-auth-required"===a.code)try{return new lh(b,a.serverResponse,t,a.message)}catch(t){}return null}function ph(){}function dh(a){oi(this,"factorId",a.fa),this.a=a}function vh(a){if(dh.call(this,a),this.a.fa!=Go.PROVIDER_ID)throw new x("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function gh(a,b){for(var t in sn.call(this,a),b)this[t]=b[t]}function yh(a,b){this.a=a,this.b=[],this.c=q(this.xc,this),yn(this.a,"userReloaded",this.c);var t=[];b&&b.multiFactor&&b.multiFactor.enrolledFactors&&X(b.multiFactor.enrolledFactors,(function(e){var n=null,r={};if(e){e.uid&&(r[di]=e.uid),e.displayName&&(r[fi]=e.displayName),e.enrollmentTime&&(r[pi]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[vi]=e.phoneNumber);try{n=new gi(r)}catch(t){}e=n}else e=null;e&&t.push(e)})),mh(this,t)}function mh(a,b){a.b=b,oi(a,"enrolledFactors",b)}function bh(a,b,t){if(this.i=a,this.h=b,this.g=t,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function _h(a){this.f=a,this.b=this.a=null,this.c=Date.now()}function wh(a,b){void 0===b&&(a.b?b=(b=a.b).a-b.g:b=0),a.c=Date.now()+1e3*b}function Eh(a,b){a.b=to(b[sa]||""),a.a=b.refreshToken,wh(a,void 0!==(b=b.expiresIn)?Number(b):void 0)}function Ih(a,b){return function(a,b){return new Ae((function(t,e){"refresh_token"==b.grant_type&&b.refresh_token||"authorization_code"==b.grant_type&&b.code?va(a,a.l+"?key="+encodeURIComponent(a.c),(function(n){n?n.error?e(pu(n)):n.access_token&&n.refresh_token?t(n):e(new x("internal-error")):e(new x("network-request-failed"))}),"POST",sr(b).toString(),a.g,a.v.get()):e(new x("internal-error"))}))}(a.f,b).then((function(t){return a.b=to(t.access_token),a.a=t.refresh_token,wh(a,t.expires_in),{accessToken:a.b.toString(),refreshToken:a.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(a.a=null),t}))}function Th(a,b){this.a=a||null,this.b=b||null,si(this,{lastSignInTime:Zr(b||null),creationTime:Zr(a||null)})}function Oh(a,b,t,e,n,r){si(this,{uid:a,displayName:e||null,photoURL:n||null,email:t||null,phoneNumber:r||null,providerId:b})}function Sh(a,b,t){this.G=[],this.l=a.apiKey,this.m=a.appName,this.s=a.authDomain||null;var n=e.a.SDK_VERSION?Mr(e.a.SDK_VERSION):null;this.a=new ia(this.l,U(D),n),a.emulatorConfig&&fa(this.a,a.emulatorConfig),this.b=new _h(this.a),Rh(this,b[sa]),Eh(this.b,b),oi(this,"refreshToken",this.b.a),Mh(this,t||{}),kn.call(this),this.P=!1,this.s&&qr()&&(this.h=Xc(this.s,this.l,this.m)),this.R=[],this.f=null,this.u=function(a){return new bh((function(){return a.I(!0)}),(function(b){return!(!b||"auth/network-request-failed"!=b.code)}),(function(){var b=a.b.c-Date.now()-3e5;return 0<b?b:0}))}(this),this.$=q(this.gb,this);var r=this;this.pa=null,this.Ba=function(t){r.wa(t.i)},this.ba=null,this.za=function(t){fa(r.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){kh(r,t.f)},this.aa=null,this.N=new yh(this,t),oi(this,"multiFactor",this.N)}function Ch(a,b){a.ba&&_n(a.ba,"languageCodeChanged",a.Ba),(a.ba=b)&&yn(b,"languageCodeChanged",a.Ba)}function Nh(a,b){a.W&&_n(a.W,"emulatorConfigChanged",a.za),(a.W=b)&&yn(b,"emulatorConfigChanged",a.za)}function kh(a,b){a.X=b,da(a.a,e.a.SDK_VERSION?Mr(e.a.SDK_VERSION,a.X):null)}function Ah(a,b){a.aa&&_n(a.aa,"frameworkChanged",a.Aa),(a.aa=b)&&yn(b,"frameworkChanged",a.Aa)}function jh(a){try{return e.a.app(a.m).auth()}catch(t){throw new x("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+a.m+"'!")}}function Ph(a){a.A||a.u.b||(a.u.start(),_n(a,"tokenChanged",a.$),yn(a,"tokenChanged",a.$))}function xh(a){_n(a,"tokenChanged",a.$),a.u.stop()}function Rh(a,b){a.ya=b,oi(a,"_lat",b)}function Dh(a){for(var b=[],t=0;t<a.R.length;t++)b.push(a.R[t](a));return Ve(b).then((function(){return a}))}function Lh(a){a.h&&!a.P&&(a.P=!0,qc(a.h,a))}function Mh(a,b){si(a,{uid:b.uid,displayName:b.displayName||null,photoURL:b.photoURL||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,isAnonymous:b.isAnonymous||!1,tenantId:b.tenantId||null,metadata:new Th(b.createdAt,b.lastLoginAt),providerData:[]}),a.a.b=a.tenantId}function Fh(){}function Uh(a){return Me().then((function(){if(a.A)throw new x("app-deleted")}))}function Vh(a){return Z(a.providerData,(function(b){return b.providerId}))}function qh(a,b){b&&(Bh(a,b.providerId),a.providerData.push(b))}function Bh(a,b){it(a.providerData,(function(t){return t.providerId==b}))}function Hh(a,b,t){("uid"!=b||t)&&a.hasOwnProperty(b)&&oi(a,b,t)}function Kh(a,b){a!=b&&(si(a,{uid:b.uid,displayName:b.displayName,photoURL:b.photoURL,email:b.email,emailVerified:b.emailVerified,phoneNumber:b.phoneNumber,isAnonymous:b.isAnonymous,tenantId:b.tenantId,providerData:[]}),b.metadata?oi(a,"metadata",function(a){return new Th(a.a,a.b)}(b.metadata)):oi(a,"metadata",new Th),X(b.providerData,(function(t){qh(a,t)})),function(a,b){a.b=b.b,a.a=b.a,a.c=b.c}(a.b,b.b),oi(a,"refreshToken",a.b.a),mh(a.N,b.N.b))}function zh(a){return a.I().then((function(b){var t=a.isAnonymous;return function(a,b){return lu(a.a,Ba,{idToken:b}).then(q(a.Jc,a))}(a,b).then((function(){return t||Hh(a,"isAnonymous",!1),b}))}))}function Wh(a,b){b[sa]&&a.ya!=b[sa]&&(Eh(a.b,b),a.dispatchEvent(new gh("tokenChanged")),Rh(a,b[sa]),Hh(a,"refreshToken",a.b.a))}function Gh(a,b){return zh(a).then((function(){if(et(Vh(a),b))return Dh(a).then((function(){throw new x("provider-already-linked")}))}))}function Qh(a,b,t){return ai({user:a,credential:Yo(b),additionalUserInfo:b=so(b),operationType:t})}function Yh(a,b){return Wh(a,b),a.reload().then((function(){return a}))}function Jh(a,b,t,n,r){if(!qr())return Fe(new x("operation-not-supported-in-this-environment"));if(a.f&&!r)return Fe(a.f);var o=oo(t.providerId),g=Qr(a.uid+":::"),c=null;(!Kr()||kr())&&a.s&&t.isOAuthProvider&&(c=Su(a.s,a.l,a.m,b,t,null,g,e.a.SDK_VERSION||null,null,null,a.tenantId));var h=Tr(c,o&&o.ua,o&&o.ta);return n=n().then((function(){if($h(a),!r)return a.I().then((function(){}))})).then((function(){return zc(a.h,h,b,t,g,!!c,a.tenantId)})).then((function(){return new Ae((function(p,t){a.ma(b,null,new x("cancelled-popup-request"),a.i||null),a.g=p,a.O=t,a.i=g,a.c=Qc(a.h,a,b,h,g)}))})).then((function(p){return h&&Ir(h),p?ai(p):null})).o((function(p){throw h&&Ir(h),p})),Zh(a,n,r)}function Xh(a,b,t,e,n){if(!qr())return Fe(new x("operation-not-supported-in-this-environment"));if(a.f&&!n)return Fe(a.f);var r=null,g=Qr(a.uid+":::");return e=e().then((function(){if($h(a),!n)return a.I().then((function(){}))})).then((function(){return a.ga=g,Dh(a)})).then((function(t){return a.ha&&(t=(t=a.ha).b.set(nl,a.w(),t.a)),t})).then((function(){return Gc(a.h,b,t,g,a.tenantId)})).o((function(t){if(r=t,a.ha)return rl(a.ha);throw r})).then((function(){if(r)throw r})),Zh(a,e,n)}function $h(a){if(!a.h||!a.P){if(a.h&&!a.P)throw new x("internal-error");throw new x("auth-domain-config-required")}}function Zh(a,b,t){var e=function(a,b,t){return a.f&&!t?(b.cancel(),Fe(a.f)):b.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(a.f||a.dispatchEvent(new gh("userInvalidated")),a.f=t),t}))}(a,b,t);return a.G.push(e),e.na((function(){nt(a.G,e)})),e.o((function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=fh(t.w(),jh(a),q(a.ic,a))),e||t}))}function tl(a){if(!a.apiKey)return null;var b={apiKey:a.apiKey,authDomain:a.authDomain,appName:a.appName,emulatorConfig:a.emulatorConfig},t={};if(!a.stsTokenManager||!a.stsTokenManager.accessToken)return null;t[sa]=a.stsTokenManager.accessToken,t.refreshToken=a.stsTokenManager.refreshToken||null;var e=a.stsTokenManager.expirationTime;e&&(t.expiresIn=(e-Date.now())/1e3);var n=new Sh(b,t,a);return a.providerData&&X(a.providerData,(function(t){t&&qh(n,ai(t))})),a.redirectEventId&&(n.ga=a.redirectEventId),n}function el(a){this.a=a,this.b=cc()}uh.prototype.Qc=function(a){var b=this;return a.rb(this.a.a,this.c).then((function(t){var e=Tt(b.f);return delete e[ch],delete e[hh],St(e,t),b.g(e)}))},j(lh,x),ph.prototype.rb=function(a,b,t){return b.type==mo?function(a,b,t,e){return t.Ha().then((function(t){return t={idToken:t},void 0!==e&&(t.displayName=e),St(t,{phoneVerificationInfo:Wo(a.a)}),lu(b,Va,t)}))}(this,a,b,t):function(a,b,t){return t.Ha().then((function(t){return St(t={mfaPendingCredential:t},{phoneVerificationInfo:Wo(a.a)}),lu(b,qa,t)}))}(this,a,b)},j(dh,ph),j(vh,dh),j(gh,sn),(n=yh.prototype).xc=function(a){mh(this,function(a){var b=[];return X(a.mfaInfo||[],(function(t){(t=hi(t))&&b.push(t)})),b}(a.gd))},n.Qb=function(){return this.a.I().then((function(a){return new yo(a,null)}))},n.ec=function(a,b){var t=this,e=this.a.a;return this.Qb().then((function(t){return a.rb(e,t,b)})).then((function(e){return Wh(t.a,e),t.a.reload()}))},n.ad=function(a){var b=this,t="string"==typeof a?a:a.uid,e=this.a.a;return this.a.I().then((function(n){return lu(e,hu,{idToken:n,mfaEnrollmentId:t})})).then((function(e){var n=$(b.b,(function(g){return g.uid!=t}));return mh(b,n),Wh(b.a,e),b.a.reload().o((function(g){if("auth/user-token-expired"!=g.code)throw g}))}))},n.w=function(){return{multiFactor:{enrolledFactors:Z(this.b,(function(a){return a.w()}))}}},bh.prototype.start=function(){this.a=this.c,function t(a,b){a.stop(),a.b=Rn(function(a,b){return b?(a.a=a.c,a.g()):(b=a.a,a.a*=2,a.a>a.f&&(a.a=a.f),b)}(a,b)).then((function(){return function(){var a=f.document,b=null;return $r()||!a?Me():new Ae((function(t){b=function(){$r()&&(a.removeEventListener("visibilitychange",b,!1),t())},a.addEventListener("visibilitychange",b,!1)})).o((function(t){throw a.removeEventListener("visibilitychange",b,!1),t}))}()})).then((function(){return a.i()})).then((function(){t(a,!0)})).o((function(e){a.h(e)&&t(a,!1)}))}(this,!0)},bh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},_h.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},_h.prototype.getToken=function(a){return a=!!a,this.b&&!this.a?Fe(new x("user-token-expired")):a||!this.b||Date.now()>this.c-3e4?this.a?Ih(this,{grant_type:"refresh_token",refresh_token:this.a}):Me(null):Me({accessToken:this.b.toString(),refreshToken:this.a})},Th.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},j(Sh,kn),Sh.prototype.wa=function(a){this.pa=a,la(this.a,a)},Sh.prototype.ka=function(){return this.pa},Sh.prototype.Ga=function(){return st(this.X)},Sh.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},oi(Sh.prototype,"providerId","firebase"),(n=Sh.prototype).reload=function(){var a=this;return Zh(this,Uh(this).then((function(){return zh(a).then((function(){return Dh(a)})).then(Fh)})))},n.nc=function(a){return this.I(a).then((function(b){return new ah(b)}))},n.I=function(a){var b=this;return Zh(this,Uh(this).then((function(){return b.b.getToken(a)})).then((function(t){if(!t)throw new x("internal-error");return t.accessToken!=b.ya&&(Rh(b,t.accessToken),b.dispatchEvent(new gh("tokenChanged"))),Hh(b,"refreshToken",t.refreshToken),t.accessToken})))},n.Jc=function(a){if(!(a=a.users)||!a.length)throw new x("internal-error");Mh(this,{uid:(a=a[0]).localId,displayName:a.displayName,photoURL:a.photoUrl,email:a.email,emailVerified:!!a.emailVerified,phoneNumber:a.phoneNumber,lastLoginAt:a.lastLoginAt,createdAt:a.createdAt,tenantId:a.tenantId});for(var b=function(a){return(a=a.providerUserInfo)&&a.length?Z(a,(function(b){return new Oh(b.rawId,b.providerId,b.email,b.displayName,b.photoUrl,b.phoneNumber)})):[]}(a),t=0;t<b.length;t++)qh(this,b[t]);Hh(this,"isAnonymous",!(this.email&&a.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new gh("userReloaded",{gd:a}))},n.Kc=function(a){return ri("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(a)},n.sb=function(a){var b=this,t=null;return Zh(this,a.c(this.a,this.uid).then((function(e){return Wh(b,e),t=Qh(b,e,"reauthenticate"),b.f=null,b.reload()})).then((function(){return t})),!0)},n.Bc=function(a){return ri("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(a)},n.pb=function(a){var b=this,t=null;return Zh(this,Gh(this,a.providerId).then((function(){return b.I()})).then((function(t){return a.b(b.a,t)})).then((function(e){return t=Qh(b,e,"link"),Yh(b,e)})).then((function(){return t})))},n.Cc=function(a,b){var t=this;return Zh(this,Gh(this,"phone").then((function(){return sh(jh(t),a,b,q(t.pb,t))})))},n.Lc=function(a,b){var t=this;return Zh(this,Me().then((function(){return sh(jh(t),a,b,q(t.sb,t))})),!0)},n.Ab=function(a){var b=this;return Zh(this,this.I().then((function(t){return b.a.Ab(t,a)})).then((function(t){return Wh(b,t),b.reload()})))},n.dd=function(a){var b=this;return Zh(this,this.I().then((function(t){return a.b(b.a,t)})).then((function(t){return Wh(b,t),b.reload()})))},n.Bb=function(a){var b=this;return Zh(this,this.I().then((function(t){return b.a.Bb(t,a)})).then((function(t){return Wh(b,t),b.reload()})))},n.Cb=function(a){if(void 0===a.displayName&&void 0===a.photoURL)return Uh(this);var b=this;return Zh(this,this.I().then((function(t){return b.a.Cb(t,{displayName:a.displayName,photoUrl:a.photoURL})})).then((function(t){return Wh(b,t),Hh(b,"displayName",t.displayName||null),Hh(b,"photoURL",t.photoUrl||null),X(b.providerData,(function(t){"password"===t.providerId&&(oi(t,"displayName",b.displayName),oi(t,"photoURL",b.photoURL))})),Dh(b)})).then(Fh))},n.bd=function(a){var b=this;return Zh(this,zh(this).then((function(t){return et(Vh(b),a)?function(a,b,t){return lu(a,Ma,{idToken:b,deleteProvider:t})}(b.a,t,[a]).then((function(t){var e={};return X(t.providerUserInfo||[],(function(t){e[t.providerId]=!0})),X(Vh(b),(function(t){e[t]||Bh(b,t)})),e[Go.PROVIDER_ID]||oi(b,"phoneNumber",null),Dh(b)})):Dh(b).then((function(){throw new x("no-such-provider")}))})))},n.delete=function(){var a=this;return Zh(this,this.I().then((function(b){return lu(a.a,La,{idToken:b})})).then((function(){a.dispatchEvent(new gh("userDeleted"))}))).then((function(){for(var b=0;b<a.G.length;b++)a.G[b].cancel("app-deleted");Ch(a,null),Nh(a,null),Ah(a,null),a.G=[],a.A=!0,xh(a),oi(a,"refreshToken",null),a.h&&Bc(a.h,a)}))},n.Eb=function(a,b){return!!("linkViaPopup"==a&&(this.i||null)==b&&this.g||"reauthViaPopup"==a&&(this.i||null)==b&&this.g||"linkViaRedirect"==a&&(this.ga||null)==b||"reauthViaRedirect"==a&&(this.ga||null)==b)},n.ma=function(a,b,t,e){"linkViaPopup"!=a&&"reauthViaPopup"!=a||e!=(this.i||null)||(t&&this.O?this.O(t):b&&!t&&this.g&&this.g(b),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},n.Fa=function(a,b){return"linkViaPopup"==a&&b==(this.i||null)?q(this.Jb,this):"reauthViaPopup"==a&&b==(this.i||null)?q(this.Kb,this):"linkViaRedirect"==a&&(this.ga||null)==b?q(this.Jb,this):"reauthViaRedirect"==a&&(this.ga||null)==b?q(this.Kb,this):null},n.Dc=function(a){var b=this;return Jh(this,"linkViaPopup",a,(function(){return Gh(b,a.providerId).then((function(){return Dh(b)}))}),!1)},n.Mc=function(a){return Jh(this,"reauthViaPopup",a,(function(){return Me()}),!0)},n.Ec=function(a){var b=this;return Xh(this,"linkViaRedirect",a,(function(){return Gh(b,a.providerId)}),!1)},n.Nc=function(a){return Xh(this,"reauthViaRedirect",a,(function(){return Me()}),!0)},n.Jb=function(a,b,t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return Zh(this,this.I().then((function(g){return ka(n.a,{requestUri:a,postBody:e,sessionId:b,idToken:g})})).then((function(g){return r=Qh(n,g,"link"),Yh(n,g)})).then((function(){return r})))},n.Kb=function(a,b,t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return Zh(this,Me().then((function(){return wo(Aa(n.a,{requestUri:a,sessionId:b,postBody:e,tenantId:t}),n.uid)})).then((function(t){return r=Qh(n,t,"reauthenticate"),Wh(n,t),n.f=null,n.reload()})).then((function(){return r})),!0)},n.tb=function(a){var b=this,t=null;return Zh(this,this.I().then((function(e){return t=e,void 0===a||It(a)?{}:Ji(new Vi(a))})).then((function(e){return b.a.tb(t,e)})).then((function(t){if(b.email!=t)return b.reload()})).then((function(){})))},n.Db=function(a,b){var t=this,e=null;return Zh(this,this.I().then((function(t){return e=t,void 0===b||It(b)?{}:Ji(new Vi(b))})).then((function(n){return t.a.Db(e,a,n)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},n.ic=function(a){var b=null,t=this;return Zh(this,a=wo(Me(a),t.uid).then((function(e){return b=Qh(t,e,"reauthenticate"),Wh(t,e),t.f=null,t.reload()})).then((function(){return b})),!0)},n.toJSON=function(){return this.w()},n.w=function(){var a={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&St(a,this.metadata.w()),X(this.providerData,(function(b){a.providerData.push(function(a){var t,b={};for(t in a)a.hasOwnProperty(t)&&(b[t]=a[t]);return b}(b))})),St(a,this.N.w()),a};var nl={name:"redirectUser",D:"session"};function rl(a){return fc(a.b,nl,a.a)}function il(a){this.a=a,this.b=cc(),this.c=null,this.f=function(a){var b=cl("local"),t=cl("session"),e=cl("none");return function(a,b,t){var e=lc(b,t),n=hc(a,b.D);return a.get(b,t).then((function(r){var g=null;try{g=Gr(f.localStorage.getItem(e))}catch(t){}if(g&&!r)return f.localStorage.removeItem(e),a.set(b,g,t);g&&r&&"localStorage"!=n.type&&f.localStorage.removeItem(e)}))}(a.b,b,a.a).then((function(){return a.b.get(t,a.a)})).then((function(n){return n?t:a.b.get(e,a.a).then((function(t){return t?e:a.b.get(b,a.a).then((function(g){return g?b:a.b.get(al,a.a).then((function(t){return t?cl(t):b}))}))}))})).then((function(t){return a.c=t,sl(a,t.D)})).o((function(){a.c||(a.c=b)}))}(this),this.b.addListener(cl("local"),this.a,q(this.g,this))}function sl(a,b){var t,e=[];for(t in ac)ac[t]!==b&&e.push(fc(a.b,cl(ac[t]),a.a));return e.push(fc(a.b,al,a.a)),function(a){return new Ae((function(b,t){var e=a.length,n=[];if(e)for(var r=function(p,t){e--,n[p]=t,0==e&&b(n)},g=function(p){t(p)},o=0;o<a.length;o++)Ue(a[o],k(r,o),g);else b(n)}))}(e)}il.prototype.g=function(){var a=this,b=cl("local");pl(this,(function(){return Me().then((function(){return a.c&&"local"!=a.c.D?a.b.get(b,a.a):null})).then((function(t){if(t)return sl(a,"local").then((function(){a.c=b}))}))}))};var al={name:"persistence",D:"session"};function cl(a){return{name:"authUser",D:a}}function hl(a,b){return pl(a,(function(){return a.b.set(a.c,b.w(),a.a)}))}function ll(a){return pl(a,(function(){return fc(a.b,a.c,a.a)}))}function fl(a,b,t){return pl(a,(function(){return a.b.get(a.c,a.a).then((function(e){return e&&b&&(e.authDomain=b),e&&t&&(e.emulatorConfig=t),tl(e||{})}))}))}function pl(a,b){return a.f=a.f.then(b,b),a.f}function vl(a){if(this.m=!1,oi(this,"settings",new em),oi(this,"app",a),!Tl(this).options||!Tl(this).options.apiKey)throw new x("invalid-api-key");a=e.a.SDK_VERSION?Mr(e.a.SDK_VERSION):null,this.a=new ia(Tl(this).options&&Tl(this).options.apiKey,U(D),a),this.R=[],this.u=[],this.P=[],this.ac=e.a.INTERNAL.createSubscribe(q(this.yc,this)),this.X=void 0,this.bc=e.a.INTERNAL.createSubscribe(q(this.zc,this)),El(this,null),this.l=new il(Tl(this).options.apiKey+":"+Tl(this).name),this.G=new el(Tl(this).options.apiKey+":"+Tl(this).name),this.$=Nl(this,function(a){var b=Tl(a).options.authDomain,t=function(a){var b=function(a,b){return a.b.get(nl,a.a).then((function(t){return t&&b&&(t.authDomain=b),tl(t||{})}))}(a.G,Tl(a).options.authDomain).then((function(t){return(a.s=t)&&(t.ha=a.G),rl(a.G)}));return Nl(a,b)}(a).then((function(){return fl(a.l,b,a.f)})).then((function(t){return t?(t.ha=a.G,a.s&&(a.s.ga||null)==(t.ga||null)?t:t.reload().then((function(){return hl(a.l,t).then((function(){return t}))})).o((function(e){return"auth/network-request-failed"==e.code?t:ll(a.l)}))):null})).then((function(t){El(a,t||null)}));return Nl(a,t)}(this)),this.h=Nl(this,function(a){return a.$.then((function(){return _l(a)})).o((function(){})).then((function(){if(!a.m)return a.pa()})).o((function(){})).then((function(){if(!a.m){a.ba=!0;var b=a.l;b.b.addListener(cl("local"),b.a,a.pa)}}))}(this)),this.ba=!1,this.pa=q(this.Yc,this),this.Ba=q(this.da,this),this.ya=q(this.kc,this),this.za=q(this.vc,this),this.Aa=q(this.wc,this),this.b=null,function(a){var b=Tl(a).options.authDomain,t=Tl(a).options.apiKey;b&&qr()&&(a.gb=a.$.then((function(){if(!a.m){if(a.b=Xc(b,t,Tl(a).name,a.f),qc(a.b,a),Ol(a)&&Lh(Ol(a)),a.s){Lh(a.s);var e=a.s;e.wa(a.ka()),Ch(e,a),kh(e=a.s,a.N),Ah(e,a),fa((e=a.s).a,a.f),Nh(e,a),a.s=null}return a.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=q(this.delete,this),this.INTERNAL.logFramework=q(this.Fc,this),this.A=0,kn.call(this),function(a){Object.defineProperty(a,"lc",{get:function(){return this.ka()},set:function(b){this.wa(b)},enumerable:!1}),a.aa=null,Object.defineProperty(a,"ti",{get:function(){return this.S()},set:function(b){this.xb(b)},enumerable:!1}),a.W=null}(this),this.N=[],this.f=null}function gl(a){sn.call(this,"languageCodeChanged"),this.i=a}function yl(a){sn.call(this,"emulatorConfigChanged"),this.c=a}function ml(a){sn.call(this,"frameworkChanged"),this.f=a}function bl(a){return a.gb||Fe(new x("auth-domain-config-required"))}function _l(a){if(!qr())return Fe(new x("operation-not-supported-in-this-environment"));var b=bl(a).then((function(){return a.b.qa()})).then((function(t){return t?ai(t):null}));return Nl(a,b)}function wl(a,b){var t={};return t.apiKey=Tl(a).options.apiKey,t.authDomain=Tl(a).options.authDomain,t.appName=Tl(a).name,a.f&&(t.emulatorConfig=a.f),a.$.then((function(){return function(a,b,t,e){var n=new Sh(a,b);return t&&(n.ha=t),e&&kh(n,e),n.reload().then((function(){return n}))}(t,b,a.G,a.Ga())})).then((function(t){return Ol(a)&&t.uid==Ol(a).uid?(Kh(Ol(a),t),a.da(t)):(El(a,t),Lh(t),a.da(t))})).then((function(){Cl(a)}))}function El(a,b){Ol(a)&&(function(a,b){it(a.R,(function(t){return t==b}))}(Ol(a),a.Ba),_n(Ol(a),"tokenChanged",a.ya),_n(Ol(a),"userDeleted",a.za),_n(Ol(a),"userInvalidated",a.Aa),xh(Ol(a))),b&&(b.R.push(a.Ba),yn(b,"tokenChanged",a.ya),yn(b,"userDeleted",a.za),yn(b,"userInvalidated",a.Aa),0<a.A&&Ph(b)),oi(a,"currentUser",b),b&&(b.wa(a.ka()),Ch(b,a),kh(b,a.N),Ah(b,a),fa(b.a,a.f),Nh(b,a))}function Il(a,b){var t=null,e=null;return Nl(a,b.then((function(n){return t=Yo(n),e=so(n),wl(a,n)}),(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=fh(t.w(),a,q(a.jc,a))),e||t})).then((function(){return ai({user:Ol(a),credential:t,additionalUserInfo:e,operationType:"signIn"})})))}function Tl(a){return a.app}function Ol(a){return a.currentUser}function Sl(a){return Ol(a)&&Ol(a)._lat||null}function Cl(a){if(a.ba){for(var b=0;b<a.u.length;b++)a.u[b]&&a.u[b](Sl(a));if(a.X!==a.getUid()&&a.P.length)for(a.X=a.getUid(),b=0;b<a.P.length;b++)a.P[b]&&a.P[b](Sl(a))}}function Nl(a,b){return a.R.push(b),b.na((function(){nt(a.R,b)})),b}function kl(){}function Al(){this.a={},this.b=1e12}il.prototype.wb=function(a){var b=null,t=this;return function(a){var b=new x("invalid-persistence-type"),t=new x("unsupported-persistence-type");t:{for(e in ac)if(ac[e]==a){var e=!0;break t}e=!1}if(!e||"string"!=typeof a)throw b;switch(jr()){case"ReactNative":if("session"===a)throw t;break;case"Node":if("none"!==a)throw t;break;case"Worker":if("session"===a||!Vu()&&"none"!==a)throw t;break;default:if(!Vr()&&"none"!==a)throw t}}(a),pl(this,(function(){return a!=t.c.D?t.b.get(t.c,t.a).then((function(e){return b=e,sl(t,a)})).then((function(){if(t.c=cl(a),b)return t.b.set(t.c,b,t.a)})):Me()}))},j(vl,kn),j(gl,sn),j(yl,sn),j(ml,sn),(n=vl.prototype).wb=function(a){return Nl(this,a=this.l.wb(a))},n.wa=function(a){this.aa===a||this.m||(this.aa=a,la(this.a,this.aa),this.dispatchEvent(new gl(this.ka())))},n.ka=function(){return this.aa},n.ed=function(){var a=f.navigator;this.wa(a&&(a.languages&&a.languages[0]||a.language||a.userLanguage)||null)},n.fd=function(a,b){if(!this.f){if(!/^https?:\/\//.test(a))throw new x("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");!function(a){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),f.document&&!a&&Cr().then((function(){var b=f.document.createElement("div");b.innerText="Running in emulator mode. Do not use with production credentials.",b.style.position="fixed",b.style.width="100%",b.style.backgroundColor="#ffffff",b.style.border=".1em solid #000000",b.style.color="#ff0000",b.style.bottom="0px",b.style.left="0px",b.style.margin="0px",b.style.zIndex=1e4,b.style.textAlign="center",b.classList.add("firebase-emulator-warning"),f.document.body.appendChild(b)}))}(!!b&&!!b.disableWarnings),this.f={url:a},this.settings.hb=!0,fa(this.a,this.f),this.dispatchEvent(new yl(this.f))}},n.Fc=function(a){this.N.push(a),da(this.a,e.a.SDK_VERSION?Mr(e.a.SDK_VERSION,this.N):null),this.dispatchEvent(new ml(this.N))},n.Ga=function(){return st(this.N)},n.xb=function(a){this.W===a||this.m||(this.W=a,this.a.b=this.W)},n.S=function(){return this.W},n.toJSON=function(){return{apiKey:Tl(this).options.apiKey,authDomain:Tl(this).options.authDomain,appName:Tl(this).name,currentUser:Ol(this)&&Ol(this).w()}},n.Eb=function(a,b){switch(a){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.i==b&&!!this.g;default:return!1}},n.ma=function(a,b,t,e){"signInViaPopup"==a&&this.i==e&&(t&&this.O?this.O(t):b&&!t&&this.g&&this.g(b),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},n.Fa=function(a,b){return"signInViaRedirect"==a||"signInViaPopup"==a&&this.i==b&&this.g?q(this.hc,this):null},n.hc=function(a,b,t,e){var n=this,r={requestUri:a,postBody:e,sessionId:b,tenantId:t};return this.c&&(this.c.cancel(),this.c=null),n.$.then((function(){return Il(n,Na(n.a,r))}))},n.Wc=function(a){if(!qr())return Fe(new x("operation-not-supported-in-this-environment"));var b=this,t=oo(a.providerId),n=Qr(),r=null;(!Kr()||kr())&&Tl(this).options.authDomain&&a.isOAuthProvider&&(r=Su(Tl(this).options.authDomain,Tl(this).options.apiKey,Tl(this).name,"signInViaPopup",a,null,n,e.a.SDK_VERSION||null,null,null,this.S(),this.f));var o=Tr(r,t&&t.ua,t&&t.ta);return Nl(this,t=bl(this).then((function(g){return zc(g,o,"signInViaPopup",a,n,!!r,b.S())})).then((function(){return new Ae((function(g,t){b.ma("signInViaPopup",null,new x("cancelled-popup-request"),b.i),b.g=g,b.O=t,b.i=n,b.c=Qc(b.b,b,"signInViaPopup",o,n)}))})).then((function(g){return o&&Ir(o),g?ai(g):null})).o((function(g){throw o&&Ir(o),g})))},n.Xc=function(a){if(!qr())return Fe(new x("operation-not-supported-in-this-environment"));var b=this;return Nl(this,bl(this).then((function(){return function(a){return pl(a,(function(){return a.b.set(al,a.c.D,a.a)}))}(b.l)})).then((function(){return Gc(b.b,"signInViaRedirect",a,void 0,b.S())})))},n.qa=function(){var a=this;return _l(this).then((function(b){return a.b&&eh(a.b.b),b})).o((function(b){throw a.b&&eh(a.b.b),b}))},n.cd=function(a){if(!a)return Fe(new x("null-user"));if(this.W!=a.tenantId)return Fe(new x("tenant-id-mismatch"));var b=this,t={};t.apiKey=Tl(this).options.apiKey,t.authDomain=Tl(this).options.authDomain,t.appName=Tl(this).name;var e=function(a,b,t,e){var n=a.b,r={};return r[sa]=n.b&&n.b.toString(),r.refreshToken=n.a,b=new Sh(b||{apiKey:a.l,authDomain:a.s,appName:a.m},r),t&&(b.ha=t),e&&kh(b,e),Kh(b,a),b}(a,t,b.G,b.Ga());return Nl(this,this.h.then((function(){if(Tl(b).options.apiKey!=a.l)return e.reload()})).then((function(){return Ol(b)&&a.uid==Ol(b).uid?(Kh(Ol(b),a),b.da(a)):(El(b,e),Lh(e),b.da(e))})).then((function(){Cl(b)})))},n.zb=function(){var a=this;return Nl(this,this.h.then((function(){return a.b&&eh(a.b.b),Ol(a)?(El(a,null),ll(a.l).then((function(){Cl(a)}))):Me()})))},n.Yc=function(){var a=this;return fl(this.l,Tl(this).options.authDomain).then((function(b){if(!a.m){var t;if(t=Ol(a)&&b){t=Ol(a).uid;var e=b.uid;t=null!=t&&""!==t&&null!=e&&""!==e&&t==e}if(t)return Kh(Ol(a),b),Ol(a).I();(Ol(a)||b)&&(El(a,b),b&&(Lh(b),b.ha=a.G),a.b&&qc(a.b,a),Cl(a))}}))},n.da=function(a){return hl(this.l,a)},n.kc=function(){Cl(this),this.da(Ol(this))},n.vc=function(){this.zb()},n.wc=function(){this.zb()},n.jc=function(a){var b=this;return this.h.then((function(){return Il(b,Me(a))}))},n.yc=function(a){var b=this;this.addAuthTokenListener((function(){a.next(Ol(b))}))},n.zc=function(a){var b=this;!function(a,b){a.P.push(b),Nl(a,a.h.then((function(){!a.m&&et(a.P,b)&&a.X!==a.getUid()&&(a.X=a.getUid(),b(Sl(a)))})))}(this,(function(){a.next(Ol(b))}))},n.Hc=function(a,b,t){var e=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof a?a(Ol(e)):"function"==typeof a.next&&a.next(Ol(e))})),this.ac(a,b,t)},n.Gc=function(a,b,t){var e=this;return this.ba&&Promise.resolve().then((function(){e.X=e.getUid(),"function"==typeof a?a(Ol(e)):"function"==typeof a.next&&a.next(Ol(e))})),this.bc(a,b,t)},n.mc=function(a){var b=this;return Nl(this,this.h.then((function(){return Ol(b)?Ol(b).I(a).then((function(t){return{accessToken:t}})):null})))},n.Sc=function(a){var b=this;return this.h.then((function(){return Il(b,lu(b.a,ou,{token:a}))})).then((function(t){var e=t.user;return Hh(e,"isAnonymous",!1),b.da(e),t}))},n.Tc=function(a,b){var t=this;return this.h.then((function(){return Il(t,lu(t.a,su,{email:a,password:b}))}))},n.dc=function(a,b){var t=this;return this.h.then((function(){return Il(t,lu(t.a,Ra,{email:a,password:b}))}))},n.Za=function(a){var b=this;return this.h.then((function(){return Il(b,a.ja(b.a))}))},n.Rc=function(a){return ri("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(a)},n.yb=function(){var a=this;return this.h.then((function(){var b=Ol(a);if(b&&b.isAnonymous){var t=ai({providerId:null,isNewUser:!1});return ai({user:b,credential:null,additionalUserInfo:t,operationType:"signIn"})}return Il(a,a.a.yb()).then((function(t){var e=t.user;return Hh(e,"isAnonymous",!0),a.da(e),t}))}))},n.getUid=function(){return Ol(this)&&Ol(this).uid||null},n.cc=function(a){this.addAuthTokenListener(a),this.A++,0<this.A&&Ol(this)&&Ph(Ol(this))},n.Oc=function(a){var b=this;X(this.u,(function(t){t==a&&b.A--})),0>this.A&&(this.A=0),0==this.A&&Ol(this)&&xh(Ol(this)),this.removeAuthTokenListener(a)},n.addAuthTokenListener=function(a){var b=this;this.u.push(a),Nl(this,this.h.then((function(){b.m||et(b.u,a)&&a(Sl(b))})))},n.removeAuthTokenListener=function(a){it(this.u,(function(b){return b==a}))},n.delete=function(){this.m=!0;for(var a=0;a<this.R.length;a++)this.R[a].cancel("app-deleted");return this.R=[],this.l&&(a=this.l).b.removeListener(cl("local"),a.a,this.pa),this.b&&(Bc(this.b,this),eh(this.b.b)),Promise.resolve()},n.gc=function(a){return Nl(this,function(a,b){return lu(a,Da,{identifier:b,continueUri:Br()?_r():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,a))},n.Ac=function(a){return!!Ho(a)},n.vb=function(a,b){var t=this;return Nl(this,Me().then((function(){var t=new Vi(b);if(!t.c)throw new x("argument-error",Hi+" must be true when sending sign in link to email");return Ji(t)})).then((function(e){return t.a.vb(a,e)})).then((function(){})))},n.hd=function(a){return this.Qa(a).then((function(b){return b.data.email}))},n.mb=function(a,b){return Nl(this,this.a.mb(a,b).then((function(){})))},n.Qa=function(a){return Nl(this,this.a.Qa(a).then((function(b){return new yi(b)})))},n.ib=function(a){return Nl(this,this.a.ib(a).then((function(){})))},n.ub=function(a,b){var t=this;return Nl(this,Me().then((function(){return void 0===b||It(b)?{}:Ji(new Vi(b))})).then((function(e){return t.a.ub(a,e)})).then((function(){})))},n.Vc=function(a,b){return Nl(this,sh(this,a,b,q(this.Za,this)))},n.Uc=function(a,b){var t=this;return Nl(this,Me().then((function(){var e=b||_r(),n=Bo(a,e);if(!(e=Ho(e)))throw new x("argument-error","Invalid email link!");if(e.tenantId!==t.S())throw new x("tenant-id-mismatch");return t.Za(n)})))},kl.prototype.render=function(){},kl.prototype.reset=function(){},kl.prototype.getResponse=function(){},kl.prototype.execute=function(){};var jl=null;function Pl(a,b){return(b=xl(b))&&a.a[b]||null}function xl(a){return(a=void 0===a?1e12:a)?a.toString():null}function Rl(a,b){this.g=!1,this.c=b,this.a=this.b=null,this.i="invisible"!==this.c.size,this.f=me(a);var t=this;this.h=function(){t.execute()},this.i?this.execute():yn(this.f,"click",this.h)}function Dl(a){if(a.g)throw Error("reCAPTCHA mock was already deleted!")}function Ll(){}function Ml(){}Al.prototype.render=function(a,b){return this.a[this.b.toString()]=new Rl(a,b),this.b++},Al.prototype.reset=function(a){var b=Pl(this,a);a=xl(a),b&&a&&(b.delete(),delete this.a[a])},Al.prototype.getResponse=function(a){return(a=Pl(this,a))?a.getResponse():null},Al.prototype.execute=function(a){(a=Pl(this,a))&&a.execute()},Rl.prototype.getResponse=function(){return Dl(this),this.b},Rl.prototype.execute=function(){Dl(this);var a=this;this.a||(this.a=setTimeout((function(){a.b=function(){for(var a=50,b=[];0<a;)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return b.join("")}();var b=a.c.callback,t=a.c["expired-callback"];if(b)try{b(a.b)}catch(t){}a.a=setTimeout((function(){if(a.a=null,a.b=null,t)try{t()}catch(t){}a.i&&a.execute()}),6e4)}),500))},Rl.prototype.delete=function(){Dl(this),this.g=!0,clearTimeout(this.a),this.a=null,_n(this.f,"click",this.h)},oi(Ll,"FACTOR_ID","phone"),Ml.prototype.g=function(){return jl||(jl=new Al),Me(jl)},Ml.prototype.c=function(){};var Fl=null;function Ul(){this.b=f.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Vl=new Nt(Pt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),ql=new Xr(3e4,6e4);Ul.prototype.g=function(a){var b=this;return new Ae((function(t,e){var n=setTimeout((function(){e(new x("network-request-failed"))}),ql.get());!f.grecaptcha||a!==b.f&&!b.b?(f[b.a]=function(){if(f.grecaptcha){b.f=a;var g=f.grecaptcha.render;f.grecaptcha.render=function(t,e){return t=g(t,e),b.b++,t},clearTimeout(n),t(f.grecaptcha)}else clearTimeout(n),e(new x("internal-error"));delete f[b.a]},Me(Xs(Lt(Vl,{onload:b.a,hl:a||""}))).o((function(){clearTimeout(n),e(new x("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(n),t(f.grecaptcha))}))},Ul.prototype.c=function(){this.b--};var Bl=null;function Hl(a,b,t,e,n,r,g){if(oi(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=b,this.g=null,g?(Fl||(Fl=new Ml),g=Fl):(Bl||(Bl=new Ul),g=Bl),this.v=g,this.a=t||{theme:"light",type:"image"},this.i=[],this.a[Wl])throw new x("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[Gl],!f.document)throw new x("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!me(b)||!this.h&&me(b).hasChildNodes())throw new x("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ia(a,r||null,n||null),this.u=e||function(){return null};var o=this;this.l=[];var c=this.a[Kl];this.a[Kl]=function(t){if(Ql(o,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ur(c,f);"function"==typeof e&&e(t)}};var p=this.a[zl];this.a[zl]=function(){if(Ql(o,null),"function"==typeof p)p();else if("string"==typeof p){var t=Ur(p,f);"function"==typeof t&&t()}}}var Kl="callback",zl="expired-callback",Wl="sitekey",Gl="size";function Ql(a,b){for(var t=0;t<a.l.length;t++)try{a.l[t](b)}catch(t){}}function Yl(a,b){return a.i.push(b),b.na((function(){nt(a.i,b)})),b}function Jl(a){if(a.A)throw new x("internal-error","RecaptchaVerifier instance has been destroyed.")}function Xl(a,b,t){var n=!1;try{this.b=t||e.a.app()}catch(t){throw new x("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new x("invalid-api-key");t=this.b.options.apiKey;var r=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{n=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=e.a.SDK_VERSION?Mr(e.a.SDK_VERSION,o):null,Hl.call(this,t,a,b,(function(){try{var g=r.b.auth().ka()}catch(t){g=null}return g}),o,U(D),n)}function $l(a,b,t,e){t:{t=Array.prototype.slice.call(t);for(var n=0,r=!1,g=0;g<b.length;g++)if(b[g].optional)r=!0;else{if(r)throw new x("internal-error","Argument validator encountered a required argument after an optional argument.");n++}if(r=b.length,t.length<n||r<t.length)e="Expected "+(n==r?1==n?"1 argument":n+" arguments":n+"-"+r+" arguments")+" but got "+t.length+".";else{for(n=0;n<t.length;n++)if(r=b[n].optional&&void 0===t[n],!b[n].K(t[n])&&!r){if(b=b[n],0>n||n>=Zl.length)throw new x("internal-error","Argument validator received an unsupported number of arguments.");t=Zl[n],e=(e?"":t+" argument ")+(b.name?'"'+b.name+'" ':"")+"must be "+b.J+".";break t}e=null}}if(e)throw new x("argument-error",a+" failed: "+e)}(n=Hl.prototype).Ia=function(){var a=this;return this.f?this.f:this.f=Yl(this,Me().then((function(){if(Br()&&!Ar())return Cr();throw new x("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return a.v.g(a.u())})).then((function(b){return a.g=b,lu(a.s,Qa,{})})).then((function(b){a.a[Wl]=b.recaptchaSiteKey})).o((function(b){throw a.f=null,b})))},n.render=function(){Jl(this);var a=this;return Yl(this,this.Ia().then((function(){if(null===a.c){var b=a.m;if(!a.h){var t=me(b);b=function(a,b,t){var e=arguments,n=document,r=String(e[0]),g=e[1];if(!ye&&g&&(g.name||g.type)){if(r=["<",r],g.name&&r.push(' name="',Zt(g.name),'"'),g.type){r.push(' type="',Zt(g.type),'"');var o={};St(o,g),delete o.type,g=o}r.push(">"),r=r.join("")}return r=Te(n,r),g&&("string"==typeof g?r.className=g:Array.isArray(g)?r.className=g.join(" "):be(r,g)),2<e.length&&Ie(n,r,e),r}("DIV"),t.appendChild(b)}a.c=a.g.render(b,a.a)}return a.c})))},n.verify=function(){Jl(this);var a=this;return Yl(this,this.render().then((function(b){return new Ae((function(t){var e=a.g.getResponse(b);if(e)t(e);else{var n=function(e){e&&(function(a,b){it(a.l,(function(t){return t==b}))}(a,n),t(e))};a.l.push(n),a.h&&a.g.execute(a.c)}}))})))},n.reset=function(){Jl(this),null!==this.c&&this.g.reset(this.c)},n.clear=function(){Jl(this),this.A=!0,this.v.c();for(var a=0;a<this.i.length;a++)this.i[a].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){a=me(this.m);for(var b;b=a.firstChild;)a.removeChild(b)}},j(Xl,Hl);var Zl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function tf(a,b){return{name:a||"",J:"a valid string",optional:!!b,K:function(t){return"string"==typeof t}}}function ef(a,b){return{name:a||"",J:"a boolean",optional:!!b,K:function(t){return"boolean"==typeof t}}}function nf(a,b){return{name:a||"",J:"a valid object",optional:!!b,K:I}}function rf(a,b){return{name:a||"",J:"a function",optional:!!b,K:function(t){return"function"==typeof t}}}function of(a,b){return{name:a||"",J:"null",optional:!!b,K:function(t){return null===t}}}function sf(a){return{name:a?a+"Credential":"credential",J:a?"a valid "+a+" credential":"a valid credential",optional:!1,K:function(b){if(!b)return!1;var t=!a||b.providerId===a;return!(!b.ja||!t)}}}function af(a,b){return I(a)&&"string"==typeof a.type&&a.type===b&&"function"==typeof a.Ha}function uf(a){return I(a)&&"string"==typeof a.uid}function cf(a,b,t,e){return{name:t||"",J:a.J+" or "+b.J,optional:!!e,K:function(t){return a.K(t)||b.K(t)}}}function hf(a,b){for(var t in b){var e=b[t].name;a[e]=pf(e,a[t],b[t].j)}}function lf(a,b){for(var t in b){var e=b[t].name;e!==t&&Object.defineProperty(a,e,{get:k((function(t){return this[t]}),t),set:k((function(t,e,g,n){$l(t,[g],[n],!0),this[e]=n}),e,t,b[t].jb),enumerable:!0})}}function ff(a,b,t,e){a[b]=pf(b,t,e)}function pf(a,b,t){function e(){var g=Array.prototype.slice.call(arguments);return $l(r,t,g),b.apply(this,g)}if(!t)return b;var n,r=function(a){return(a=a.split("."))[a.length-1]}(a);for(n in b)e[n]=b[n];for(n in b.prototype)e.prototype[n]=b.prototype[n];return e}hf(vl.prototype,{ib:{name:"applyActionCode",j:[tf("code")]},Qa:{name:"checkActionCode",j:[tf("code")]},mb:{name:"confirmPasswordReset",j:[tf("code"),tf("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[tf("email"),tf("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[tf("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[tf("emailLink")]},Gc:{name:"onAuthStateChanged",j:[cf(nf(),rf(),"nextOrObserver"),rf("opt_error",!0),rf("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[cf(nf(),rf(),"nextOrObserver"),rf("opt_error",!0),rf("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[tf("email"),cf(nf("opt_actionCodeSettings",!0),of(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[tf("email"),nf("actionCodeSettings")]},wb:{name:"setPersistence",j:[tf("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[sf()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[sf()]},Sc:{name:"signInWithCustomToken",j:[tf("token")]},Tc:{name:"signInWithEmailAndPassword",j:[tf("email"),tf("password")]},Uc:{name:"signInWithEmailLink",j:[tf("email"),tf("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[tf("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(a){return!(!a||"string"!=typeof a.type||"function"!=typeof a.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[cf({name:"user",J:"an instance of Firebase User",optional:!1,K:function(b){return!!(b&&b instanceof Sh)}},of(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[tf(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[tf("url"),nf("options",!0)]},hd:{name:"verifyPasswordResetCode",j:[tf("code")]}}),lf(vl.prototype,{lc:{name:"languageCode",jb:cf(tf(),of(),"languageCode")},ti:{name:"tenantId",jb:cf(tf(),of(),"tenantId")}}),vl.Persistence=ac,vl.Persistence.LOCAL="local",vl.Persistence.SESSION="session",vl.Persistence.NONE="none",hf(Sh.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[ef("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[ef("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[sf()]},pb:{name:"linkWithCredential",j:[sf()]},Cc:{name:"linkWithPhoneNumber",j:[tf("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(a){return!(!a||"string"!=typeof a.type||"function"!=typeof a.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[sf()]},sb:{name:"reauthenticateWithCredential",j:[sf()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[tf("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(a){return!(!a||"string"!=typeof a.type||"function"!=typeof a.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[cf(nf("opt_actionCodeSettings",!0),of(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[tf(null,!0)]},bd:{name:"unlink",j:[tf("provider")]},Ab:{name:"updateEmail",j:[tf("email")]},Bb:{name:"updatePassword",j:[tf("password")]},dd:{name:"updatePhoneNumber",j:[sf("phone")]},Cb:{name:"updateProfile",j:[nf("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[tf("email"),cf(nf("opt_actionCodeSettings",!0),of(null,!0),"opt_actionCodeSettings",!0)]}}),hf(Al.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),hf(kl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),hf(Ae.prototype,{na:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),lf(em.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:ef("appVerificationDisabledForTesting")}}),hf(oh.prototype,{confirm:{name:"confirm",j:[tf("verificationCode")]}}),ff(_o,"fromJSON",(function(a){a="string"==typeof a?JSON.parse(a):a;for(var b,t=[Co,Vo,zo,To],e=0;e<t.length;e++)if(b=t[e](a))return b;return null}),[cf(tf(),nf(),"json")]),ff(qo,"credential",(function(a,b){return new Uo(a,b)}),[tf("email"),tf("password")]),hf(Uo.prototype,{w:{name:"toJSON",j:[tf(null,!0)]}}),hf(jo.prototype,{Ca:{name:"addScope",j:[tf("scope")]},Ka:{name:"setCustomParameters",j:[nf("customOAuthParameters")]}}),ff(jo,"credential",Po,[cf(tf(),nf(),"token")]),ff(qo,"credentialWithLink",Bo,[tf("email"),tf("emailLink")]),hf(xo.prototype,{Ca:{name:"addScope",j:[tf("scope")]},Ka:{name:"setCustomParameters",j:[nf("customOAuthParameters")]}}),ff(xo,"credential",Ro,[cf(tf(),nf(),"token")]),hf(Do.prototype,{Ca:{name:"addScope",j:[tf("scope")]},Ka:{name:"setCustomParameters",j:[nf("customOAuthParameters")]}}),ff(Do,"credential",Lo,[cf(tf(),cf(nf(),of()),"idToken"),cf(tf(),of(),"accessToken",!0)]),hf(Mo.prototype,{Ka:{name:"setCustomParameters",j:[nf("customOAuthParameters")]}}),ff(Mo,"credential",Fo,[cf(tf(),nf(),"token"),tf("secret",!0)]),hf(Ao.prototype,{Ca:{name:"addScope",j:[tf("scope")]},credential:{name:"credential",j:[cf(tf(),cf(nf(),of()),"optionsOrIdToken"),cf(tf(),of(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[nf("customOAuthParameters")]}}),hf(Oo.prototype,{w:{name:"toJSON",j:[tf(null,!0)]}}),hf(Eo.prototype,{w:{name:"toJSON",j:[tf(null,!0)]}}),ff(Go,"credential",Qo,[tf("verificationId"),tf("verificationCode")]),hf(Go.prototype,{eb:{name:"verifyPhoneNumber",j:[cf(tf(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?af(t.session,mo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?af(t.session,bo)&&uf(t.multiFactorHint):t.session&&t.multiFactorUid?af(t.session,bo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(a){return!(!a||"string"!=typeof a.type||"function"!=typeof a.verify)}}]}}),hf(Ko.prototype,{w:{name:"toJSON",j:[tf(null,!0)]}}),hf(x.prototype,{toJSON:{name:"toJSON",j:[tf(null,!0)]}}),hf(ns.prototype,{toJSON:{name:"toJSON",j:[tf(null,!0)]}}),hf(es.prototype,{toJSON:{name:"toJSON",j:[tf(null,!0)]}}),hf(lh.prototype,{toJSON:{name:"toJSON",j:[tf(null,!0)]}}),hf(uh.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(a){return!!a&&!!a.rb}}]}}),hf(yh.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(a){return!!a&&!!a.rb}},tf("displayName",!0)]},ad:{name:"unenroll",j:[cf({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:uf},tf(),"multiFactorInfoIdentifier")]}}),hf(Xl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),ff(ji,"parseLink",Ui,[tf("link")]),ff(Ll,"assertion",(function(a){return new vh(a)}),[sf("phone")]),function(){if(void 0===e.a||!e.a.INTERNAL||!e.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var a={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:bi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:mi,VERIFY_AND_CHANGE_EMAIL:_i,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:vl,AuthCredential:_o,Error:x};ff(a,"EmailAuthProvider",qo,[]),ff(a,"FacebookAuthProvider",jo,[]),ff(a,"GithubAuthProvider",xo,[]),ff(a,"GoogleAuthProvider",Do,[]),ff(a,"TwitterAuthProvider",Mo,[]),ff(a,"OAuthProvider",Ao,[tf("providerId")]),ff(a,"SAMLAuthProvider",ko,[tf("providerId")]),ff(a,"PhoneAuthProvider",Go,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(a){return!!(a&&a instanceof vl)}}]),ff(a,"RecaptchaVerifier",Xl,[cf(tf(),{name:"",J:"an HTML element",optional:!1,K:function(a){return!!(a&&a instanceof Element)}},"recaptchaContainer"),nf("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(a){return!!(a&&a instanceof e.a.app.App)}}]),ff(a,"ActionCodeURL",ji,[]),ff(a,"PhoneMultiFactorGenerator",Ll,[]),e.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(b){return new vl(b=b.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:a,instantiationMode:"LAZY",type:"PUBLIC"}),e.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(b){return{getUid:q((b=b.getProvider("auth").getImmediate()).getUid,b),getToken:q(b.mc,b),addAuthTokenListener:q(b.cc,b),removeAuthTokenListener:q(b.Oc,b)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),e.a.registerVersion("@firebase/auth","0.16.1"),e.a.INTERNAL.extendNamespace({User:Sh})}()}).apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,n(18))},209:function(t,e,n){"use strict";(function(t,e){var r,o=n(2),c=n(0),h=n(1),l=n(5),f=n(6),d=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(h.J)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(h.D)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),v=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(h.k)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),y=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new d(e)}}catch(t){}return new v},m=y("localStorage"),_=y("sessionStorage"),w=new l.b("@firebase/database"),E=(r=1,function(){return r++}),I=function(t){var e=Object(h.I)(t),n=new h.d;n.update(e);var r=n.digest();return h.h.encodeByteArray(r)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",i=0;i<t.length;i++){var r=t[i];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?n+=T.apply(null,r):n+="object"==typeof r?Object(h.J)(r):r,n+=" "}return n},O=null,S=!0,C=function(t,e){Object(h.f)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(w.logLevel=l.a.VERBOSE,O=w.log.bind(w),e&&_.set("logging_enabled",!0)):"function"==typeof t?O=t:(O=null,_.remove("logging_enabled"))},N=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===S&&(S=!1,null===O&&!0===_.get("logging_enabled")&&C(!0)),O){var n=T.apply(null,t);O(n)}},k=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];N.apply(void 0,Object(c.f)([t],e))}},A=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+T.apply(void 0,Object(c.f)(t));w.error(n)},j=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+T.apply(void 0,Object(c.f)(t));throw w.error(n),new Error(n)},P=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+T.apply(void 0,Object(c.f)(t));w.warn(n)},x=function(data){return"number"==typeof data&&(data!=data||data===Number.POSITIVE_INFINITY||data===Number.NEGATIVE_INFINITY)},R="[MIN_NAME]",D="[MAX_NAME]",L=function(a,b){if(a===b)return 0;if(a===R||b===D)return-1;if(b===R||a===D)return 1;var t=z(a),e=z(b);return null!==t?null!==e?t-e==0?a.length-b.length:t-e:-1:null!==e?1:a<b?-1:1},M=function(a,b){return a===b?0:a<b?-1:1},F=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(h.J)(e))},U=function(t){if("object"!=typeof t||null===t)return Object(h.J)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(h.J)(e[i]),r+=":",r+=U(t[e[i]]);return r+="}"},V=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],o=0;o<n;o+=e)o+e>n?r.push(t.substring(o,n)):r.push(t.substring(o,o+e));return r};function B(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var H=function(t){Object(h.f)(!x(t),"Invalid JSON number");var s,e,n,r,i;0===t?(e=0,n=0,s=1/t==-1/0?1:0):(s=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(e=(r=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,n=Math.round(t*Math.pow(2,52-r)-Math.pow(2,52))):(e=0,n=Math.round(t/Math.pow(2,-1074))));var o=[];for(i=52;i;i-=1)o.push(n%2?1:0),n=Math.floor(n/2);for(i=11;i;i-=1)o.push(e%2?1:0),e=Math.floor(e/2);o.push(s?1:0),o.reverse();var c=o.join(""),l="";for(i=0;i<64;i+=8){var f=parseInt(c.substr(i,8),2).toString(16);1===f.length&&(f="0"+f),l+=f}return l.toLowerCase()},K=new RegExp("^-?(0*)\\d{1,10}$"),z=function(t){if(K.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},W=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw P("Exception was thrown by user callback.",e),t}),Math.floor(0))}},G=function(t,time){var e=setTimeout(t,time);return"object"==typeof e&&e.unref&&e.unref(),e},Q=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",i=this.pieceNum_;i<this.pieces_.length;i++)""!==this.pieces_[i]&&(t+="/"+this.pieces_[i]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",i=this.pieceNum_;i<this.pieces_.length;i++)""!==this.pieces_[i]&&(t+="/"+encodeURIComponent(String(this.pieces_[i])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],i=this.pieceNum_;i<this.pieces_.length-1;i++)e.push(this.pieces_[i]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],i=this.pieceNum_;i<this.pieces_.length;i++)n.push(this.pieces_[i]);if(e instanceof t)for(i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{var r=e.split("/");for(i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),o=n.getFront();if(null===r)return n;if(r===o)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=L(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var i=this.pieceNum_,e=t.pieceNum_;i<=this.pieces_.length;i++,e++)if(this.pieces_[i]!==t.pieces_[e])return!1;return!0},t.prototype.contains=function(t){var i=this.pieceNum_,e=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;i<this.pieces_.length;){if(this.pieces_[i]!==t.pieces_[e])return!1;++i,++e}return!0},t}(),Y=function(){function t(path,t){this.errorPrefix_=t,this.parts_=path.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var i=0;i<this.parts_.length;i++)this.byteLength_+=Object(h.H)(this.parts_[i]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(h.H)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(h.H)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),J=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,X=function(){function t(t,e,n,r,o,c,h){void 0===o&&(o=!1),void 0===c&&(c=""),void 0===h&&(h=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=m.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&m.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(h.f)("string"==typeof t,"typeof type must == string"),Object(h.f)("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return B(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();var $,Z,tt,et,nt,it=function(t,e){var n=ot(t),r=n.namespace;"firebase.com"===n.domain&&j(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||j("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&P("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var o="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new X(n.host,n.secure,r,e,o,"",r!==n.subdomain),path:new Q(n.pathString)}},ot=function(t){var e="",n="",r="",o="",h="",l=!0,f="https",d=443;if("string"==typeof t){var v=t.indexOf("//");v>=0&&(f=t.substring(0,v-1),t=t.substring(v+2));var y=t.indexOf("/");-1===y&&(y=t.length);var m=t.indexOf("?");-1===m&&(m=t.length),e=t.substring(0,Math.min(y,m)),y<m&&(o=function(t){for(var e="",n=t.split("/"),i=0;i<n.length;i++)if(n[i].length>0){var r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(t){}e+="/"+r}return e}(t.substring(y,m)));var _=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(c.h)(t.split("&")),h=o.next();!h.done;h=o.next()){var l=h.value;if(0!==l.length){var f=l.split("=");2===f.length?r[decodeURIComponent(f[0])]=decodeURIComponent(f[1]):P("Invalid query segment '"+l+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{h&&!h.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,m)));(v=e.indexOf(":"))>=0?(l="https"===f||"wss"===f,d=parseInt(e.substring(v+1),10)):v=e.length;var w=e.slice(0,v);if("localhost"===w.toLowerCase())n="localhost";else if(w.split(".").length<=2)n=w;else{var E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),n=e.substring(E+1),h=r}"ns"in _&&(h=_.ns)}return{host:e,port:d,domain:n,subdomain:r,secure:l,scheme:f,pathString:o,namespace:h}},st=/[\[\].#$\/\u0000-\u001F\u007F]/,at=/[\[\].#$\u0000-\u001F\u007F]/,ut=function(t){return"string"==typeof t&&0!==t.length&&!st.test(t)},ct=function(t){return"string"==typeof t&&0!==t.length&&!at.test(t)},ht=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!x(t)||t&&"object"==typeof t&&Object(h.k)(t,".sv")},lt=function(t,e,data,path,n){n&&void 0===data||ft(Object(h.o)(t,e,n),data,path)},ft=function(t,data,e){var path=e instanceof Q?new Y(e,t):e;if(void 0===data)throw new Error(t+"contains undefined "+path.toErrorString());if("function"==typeof data)throw new Error(t+"contains a function "+path.toErrorString()+" with contents = "+data.toString());if(x(data))throw new Error(t+"contains "+data.toString()+" "+path.toErrorString());if("string"==typeof data&&data.length>10485760/3&&Object(h.H)(data)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+path.toErrorString()+" ('"+data.substring(0,50)+"...')");if(data&&"object"==typeof data){var n=!1,r=!1;if(B(data,(function(e,o){if(".value"===e)n=!0;else if(".priority"!==e&&".sv"!==e&&(r=!0,!ut(e)))throw new Error(t+" contains an invalid key ("+e+") "+path.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');path.push(e),ft(t,o,path),path.pop()})),n&&r)throw new Error(t+' contains ".value" child '+path.toErrorString()+" in addition to actual children.")}},pt=function(t,e,data,path,n){if(!n||void 0!==data){var r=Object(h.o)(t,e,n);if(!data||"object"!=typeof data||Array.isArray(data))throw new Error(r+" must be an object containing the children to replace.");var o=[];B(data,(function(t,e){var n=new Q(t);if(ft(r,e,path.child(n)),".priority"===n.getBack()&&!ht(e))throw new Error(r+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(n)})),function(t,e){var i,n;for(i=0;i<e.length;i++)for(var r=(n=e[i]).slice(),o=0;o<r.length;o++)if(".priority"===r[o]&&o===r.length-1);else if(!ut(r[o]))throw new Error(t+"contains an invalid key ("+r[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Q.comparePaths);var c=null;for(i=0;i<e.length;i++){if(n=e[i],null!==c&&c.contains(n))throw new Error(t+"contains a path "+c.toString()+" that is ancestor of another path "+n.toString());c=n}}(r,o)}},vt=function(t,e,n,r){if(!r||void 0!==n){if(x(n))throw new Error(Object(h.o)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ht(n))throw new Error(Object(h.o)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},gt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(h.o)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},yt=function(t,e,n,r){if(!(r&&void 0===n||ut(n)))throw new Error(Object(h.o)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},mt=function(t,e,n,r){if(!(r&&void 0===n||ct(n)))throw new Error(Object(h.o)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},bt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),mt(t,e,n,r)},_t=function(t,path){if(".info"===path.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},wt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ut(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ct(t)}(r))throw new Error(Object(h.o)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Et=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(h.o)(t,e,r)+"must be a boolean.")},It=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(h.K)("OnDisconnect.cancel",0,1,arguments.length),Object(h.L)("OnDisconnect.cancel",1,t,!0);var e=new h.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(h.K)("OnDisconnect.remove",0,1,arguments.length),_t("OnDisconnect.remove",this.path_),Object(h.L)("OnDisconnect.remove",1,t,!0);var e=new h.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(h.K)("OnDisconnect.set",1,2,arguments.length),_t("OnDisconnect.set",this.path_),lt("OnDisconnect.set",1,t,this.path_,!1),Object(h.L)("OnDisconnect.set",2,e,!0);var n=new h.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(h.K)("OnDisconnect.setWithPriority",2,3,arguments.length),_t("OnDisconnect.setWithPriority",this.path_),lt("OnDisconnect.setWithPriority",1,t,this.path_,!1),vt("OnDisconnect.setWithPriority",2,e,!1),Object(h.L)("OnDisconnect.setWithPriority",3,n,!0);var r=new h.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(h.K)("OnDisconnect.update",1,2,arguments.length),_t("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,P("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}pt("OnDisconnect.update",1,t,this.path_,!1),Object(h.L)("OnDisconnect.update",2,e,!0);var r=new h.a;return this.repo_.onDisconnectUpdate(this.path_,t,r.wrapCallback(e)),r.promise},t}(),Tt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(h.K)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ot=($="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Z=0,tt=[],function(t){var i,e=t===Z;Z=t;var n=new Array(8);for(i=7;i>=0;i--)n[i]=$.charAt(t%64),t=Math.floor(t/64);Object(h.f)(0===t,"Cannot push at time == 0");var r=n.join("");if(e){for(i=11;i>=0&&63===tt[i];i--)tt[i]=0;tt[i]++}else for(i=0;i<12;i++)tt[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)r+=$.charAt(tt[i]);return Object(h.f)(20===r.length,"nextPushId: Length should be 20."),r}),St=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ct=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new St(R,t),r=new St(R,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return St.MIN},t}(),Nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(c.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return et},set:function(t){et=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(a,b){return L(a.name,b.name)},e.prototype.isDefinedOn=function(t){throw Object(h.g)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return new St(D,et)},e.prototype.makePost=function(t,e){return Object(h.f)("string"==typeof t,"KeyIndex indexValue must always be a string."),new St(t,et)},e.prototype.toString=function(){return".key"},e}(Ct),kt=new Nt;var At,jt,Pt,xt=function(t){return"number"==typeof t?"number:"+H(t):"string:"+t},Rt=function(t){if(t.isLeafNode()){var e=t.val();Object(h.f)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(h.k)(e,".sv"),"Priority must be a string or number.")}else Object(h.f)(t===nt||t.isEmpty(),"priority of unexpected type.");Object(h.f)(t===nt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Dt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(h.f)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Rt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return At},set:function(t){At=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(path){return path.isEmpty()?this:".priority"===path.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(path,e){var n=path.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(Object(h.f)(".priority"!==n||1===path.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(path.popFront(),e)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+xt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?H(this.value_):this.value_,this.lazyHash_=I(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(h.f)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),c=t.VALUE_TYPE_ORDER.indexOf(r);return Object(h.f)(o>=0,"Unknown leaf type: "+n),Object(h.f)(c>=0,"Unknown leaf type: "+r),o===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Lt,Mt,Ft=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(c.c)(e,t),e.prototype.compare=function(a,b){var t=a.node.getPriority(),e=b.node.getPriority(),n=t.compareTo(e);return 0===n?L(a.name,b.name):n},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return new St(D,new Dt("[PRIORITY-POST]",Pt))},e.prototype.makePost=function(t,e){var n=jt(t);return new St(e,new Dt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ct)),Ut=function(){function t(t,e,n,r,o){void 0===o&&(o=null),this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];for(var c=1;!t.isEmpty();)if(t=t,c=e?n(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Vt=function(){function t(e,n,r,o,c){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=o?o:Bt.EMPTY_NODE,this.right=null!=c?c:Bt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,o,c){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=c?c:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,o=n(t,r.key);return(r=o<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===o?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Bt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Bt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),qt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,o){return this},t.prototype.insert=function(t,e,n){return new Vt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Bt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Vt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ut(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ut(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ut(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ut(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new qt,t}(),Ht=Math.log(2),Kt=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Ht,10)),this.current_=this.count-1;var n,mask=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&mask}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),zt=function(t,e,n,r){t.sort(e);var o=function(e,r){var c,h,l=r-e;if(0===l)return null;if(1===l)return c=t[e],h=n?n(c):c,new Vt(h,c.node,Vt.BLACK,null,null);var f=parseInt(l/2,10)+e,d=o(e,f),v=o(f+1,r);return c=t[f],h=n?n(c):c,new Vt(h,c.node,Vt.BLACK,d,v)},c=function(e){for(var r=null,c=null,h=t.length,l=function(e,r){var c=h-e,l=h;h-=e;var d=o(c+1,l),v=t[c],y=n?n(v):v;f(new Vt(y,v.node,r,null,d))},f=function(t){r?(r.left=t,r=t):(c=t,r=t)},i=0;i<e.count;++i){var d=e.nextBitIsOne(),v=Math.pow(2,e.count-(i+1));d?l(v,Vt.BLACK):(l(v,Vt.BLACK),l(v,Vt.RED))}return c}(new Kt(t.length));return new Bt(r||e,c)},Wt={},Gt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(h.f)(Wt&&Ft,"ChildrenNode.ts has not been loaded"),Lt=Lt||new t({".priority":Wt},{".priority":Ft})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(h.G)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Bt?e:null},t.prototype.hasIndex=function(t){return Object(h.k)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(h.f)(e!==kt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,o=[],l=!1,f=n.getIterator(St.Wrap),d=f.getNext();d;)l=l||e.isDefinedOn(d.node),o.push(d),d=f.getNext();r=l?zt(o,e.getCompare()):Wt;var v=e.toString(),y=Object(c.a)({},this.indexSet_);y[v]=e;var m=Object(c.a)({},this.indexes_);return m[v]=r,new t(m,y)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(h.E)(this.indexes_,(function(t,o){var c=Object(h.G)(r.indexSet_,o);if(Object(h.f)(c,"Missing index implementation for "+o),t===Wt){if(c.isDefinedOn(e.node)){for(var l=[],f=n.getIterator(St.Wrap),d=f.getNext();d;)d.name!==e.name&&l.push(d),d=f.getNext();return l.push(e),zt(l,c.getCompare())}return Wt}var v=n.get(e.name),y=t;return v&&(y=y.remove(new St(e.name,v))),y.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(h.E)(this.indexes_,(function(t){if(t===Wt)return t;var r=n.get(e.name);return r?t.remove(new St(e.name,r)):t})),this.indexSet_)},t}();function Qt(t,e){return L(t.name,e.name)}function Yt(t,e){return L(t,e)}var Jt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Rt(this.priorityNode_),this.children_.isEmpty()&&Object(h.f)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Mt||(Mt=new t(new Bt(Yt),null,Gt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Mt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Mt:e},t.prototype.getChild=function(path){var t=path.getFront();return null===t?this:this.getImmediateChild(t).getChild(path.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(h.f)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new St(e,n),o=void 0,c=void 0;n.isEmpty()?(o=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),c=this.indexMap_.addToIndexes(r,this.children_));var l=o.isEmpty()?Mt:this.priorityNode_;return new t(o,l,c)},t.prototype.updateChild=function(path,t){var e=path.getFront();if(null===e)return t;Object(h.f)(".priority"!==path.getFront()||1===path.getLength(),".priority must be the last token in a path");var n=this.getImmediateChild(e).updateChild(path.popFront(),t);return this.updateImmediateChild(e,n)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,o=0,c=!0;if(this.forEachChild(Ft,(function(h,l){n[h]=l.val(e),r++,c&&t.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):c=!1})),!e&&c&&o<2*r){var h=[];for(var l in n)h[l]=n[l];return h}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+xt(this.getPriority().val())+":"),this.forEachChild(Ft,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":I(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var o=r.getPredecessorKey(new St(t,e));return o?o.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new St(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new St(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,St.Wrap),o=r.peek();null!=o&&e.compare(o,t)<0;)r.getNext(),o=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,St.Wrap),o=r.peek();null!=o&&e.compare(o,t)>0;)r.getNext(),o=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Xt?-1:0},t.prototype.withIndex=function(e){if(e===kt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===kt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ft),r=e.getIterator(Ft),o=n.getNext(),c=r.getNext();o&&c;){if(o.name!==c.name||!o.node.equals(c.node))return!1;o=n.getNext(),c=r.getNext()}return null===o&&null===c}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===kt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Xt=new(function(t){function e(){return t.call(this,new Bt(Yt),Jt.EMPTY_NODE,Gt.Default)||this}return Object(c.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Jt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Jt));Object.defineProperties(St,{MIN:{value:new St(R,Jt.EMPTY_NODE)},MAX:{value:new St(D,Xt)}}),Nt.__EMPTY_NODE=Jt.EMPTY_NODE,Dt.__childrenNodeConstructor=Jt,nt=Xt,function(t){Pt=t}(Xt);function $t(t,e){if(void 0===e&&(e=null),null===t)return Jt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(h.f)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Dt(t,$t(e));if(t instanceof Array){var n=Jt.EMPTY_NODE;return B(t,(function(e,r){if(Object(h.k)(t,e)&&"."!==e.substring(0,1)){var o=$t(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}})),n.updatePriority($t(e))}var r=[],o=!1;if(B(t,(function(t,e){if("."!==t.substring(0,1)){var n=$t(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new St(t,n)))}})),0===r.length)return Jt.EMPTY_NODE;var c=zt(r,Qt,(function(t){return t.name}),Yt);if(o){var l=zt(r,Ft.getCompare());return new Jt(c,$t(e),new Gt({".priority":l},{".priority":Ft}))}return new Jt(c,$t(e),Gt.Default)}!function(t){jt=t}($t);var Zt,te=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(c.c)(e,t),e.prototype.compare=function(a,b){var t=a.node.compareTo(b.node);return 0===t?L(a.name,b.name):t},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return St.MAX},e.prototype.makePost=function(t,e){var n=$t(t);return new St(e,n)},e.prototype.toString=function(){return".value"},e}(Ct)),ee=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(h.f)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(c.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(a,b){var t=this.extractChild(a.node),e=this.extractChild(b.node),n=t.compareTo(e);return 0===n?L(a.name,b.name):n},e.prototype.makePost=function(t,e){var n=$t(t),r=Jt.EMPTY_NODE.updateChild(this.indexPath_,n);return new St(e,r)},e.prototype.maxPost=function(){var t=Jt.EMPTY_NODE.updateChild(this.indexPath_,Xt);return new St(D,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ct),ne=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(h.K)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(h.K)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(h.K)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(h.K)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(h.K)("DataSnapshot.child",0,1,arguments.length),e=String(e),mt("DataSnapshot.child",1,e,!1);var n=new Q(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ft)},t.prototype.hasChild=function(t){Object(h.K)("DataSnapshot.hasChild",1,1,arguments.length),mt("DataSnapshot.hasChild",1,t,!1);var e=new Q(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(h.K)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(h.K)("DataSnapshot.forEach",1,1,arguments.length),Object(h.L)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,o){return e(new t(o,n.ref_.child(r),Ft))}))},t.prototype.hasChildren=function(){return Object(h.K)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(h.K)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(h.K)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),re=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(h.J)(this.snapshot.exportVal())},t}(),ie=function(){function t(t,e,path){this.eventRegistration=t,this.error=e,this.path=path}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),oe=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new re("value",this,new ne(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(h.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,path){return this.cancelCallback_?new ie(this,t,path):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),se=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(h.k)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,path){return this.cancelCallback_?new ie(this,t,path):null},t.prototype.createEvent=function(t,e){Object(h.f)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new re(t.type,this,new ne(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(h.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),o=Object.keys(this.callbacks_),c=r.length;if(c===o.length){if(1===c){var h=r[0],l=o[0];return!(l!==h||e.callbacks_[h]&&this.callbacks_[l]&&e.callbacks_[h]!==this.callbacks_[l])}return o.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),ae=function(){function t(t,path,e,n){this.repo=t,this.path=path,this.queryParams_=e,this.orderByCalled_=n}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(h.f)(Zt,"Reference.ts has not been loaded"),Zt},set:function(t){Zt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===kt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==R)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==D)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Ft){if(null!=e&&!ht(e)||null!=n&&!ht(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(h.f)(t.getIndex()instanceof ee||t.getIndex()===te,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(h.K)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,o){Object(h.K)("Query.on",2,4,arguments.length),gt("Query.on",1,e,!1),Object(h.L)("Query.on",2,n,!1);var c=t.getCancelAndContextArgs_("Query.on",r,o);if("value"===e)this.onValueEvent(n,c.cancel,c.context);else{var l={};l[e]=n,this.onChildEvent(l,c.cancel,c.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new oe(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new se(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(h.K)("Query.off",0,3,arguments.length),gt("Query.off",1,t,!0),Object(h.L)("Query.off",2,e,!0),Object(h.M)("Query.off",3,n,!0);var r=null,o=null;if("value"===t){var c=e||null;r=new oe(c,null,n||null)}else t&&(e&&((o={})[t]=e),r=new se(o,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,o){var c=this;Object(h.K)("Query.once",1,4,arguments.length),gt("Query.once",1,e,!1),Object(h.L)("Query.once",2,n,!0);var l=t.getCancelAndContextArgs_("Query.once",r,o),f=!0,d=new h.a;d.promise.catch((function(){}));var v=function(t){f&&(f=!1,c.off(e,v),n&&n.bind(l.context)(t),d.resolve(t))};return this.on(e,v,(function(t){c.off(e,v),l.cancel&&l.cancel.bind(l.context)(t),d.reject(t)})),d.promise},t.prototype.limitToFirst=function(e){if(Object(h.K)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(h.K)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(path){if(Object(h.K)("Query.orderByChild",1,1,arguments.length),"$key"===path)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===path)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===path)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');mt("Query.orderByChild",1,path,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new Q(path);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new ee(e),r=this.queryParams_.orderBy(n);return t.validateQueryEndpoints_(r),new t(this.repo,this.path,r,!0)},t.prototype.orderByKey=function(){Object(h.K)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(h.K)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Ft);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(h.K)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(te);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(h.K)("Query.startAt",0,2,arguments.length),lt("Query.startAt",1,e,this.path,!0),yt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(h.K)("Query.endAt",0,2,arguments.length),lt("Query.endAt",1,e,this.path,!0),yt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(h.K)("Query.equalTo",1,2,arguments.length),lt("Query.equalTo",1,t,this.path,!1),yt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(h.K)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(h.K)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=U(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(h.K)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,o=this.path.equals(e.path),c=this.queryIdentifier()===e.queryIdentifier();return r&&o&&c},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(h.L)(t,3,r.cancel,!0),r.context=n,Object(h.M)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(h.o)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ue=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ce=function(){function t(t,path){this.syncTree_=t,this.path_=path}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),he=function(t,e,n){return t&&"object"==typeof t?(Object(h.f)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?le(t[".sv"],e,n):"object"==typeof t[".sv"]?fe(t[".sv"],e):void Object(h.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},le=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(h.f)(!1,"Unexpected server value: "+t)}},fe=function(t,e,n){t.hasOwnProperty("increment")||Object(h.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(h.f)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(h.f)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var c=o.getValue();return"number"!=typeof c?r:c+r},pe=function(path,t,e,n){return ve(t,new ce(e,path),n)},de=function(t,e,n){return ve(t,new ue(e),n)};function ve(t,e,n){var r,o=t.getPriority().val(),c=he(o,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var h=t,l=he(h.getValue(),e,n);return l!==h.getValue()||c!==h.getPriority().val()?new Dt(l,$t(c)):t}var f=t;return r=f,c!==f.getPriority().val()&&(r=r.updatePriority(new Dt(c))),f.forEachChild(Ft,(function(t,o){var c=ve(o,e.getImmediateChild(t),n);c!==o&&(r=r.updateImmediateChild(t,c))})),r}var ge,ye=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(path){if(null!=this.value)return this.value.getChild(path);if(!path.isEmpty()&&this.children.size>0){var t=path.getFront();return path=path.popFront(),this.children.has(t)?this.children.get(t).find(path):null}return null},t.prototype.remember=function(path,data){if(path.isEmpty())this.value=data,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(path,data);else{var e=path.getFront();this.children.has(e)||this.children.set(e,new t);var n=this.children.get(e);path=path.popFront(),n.remember(path,data)}},t.prototype.forget=function(path){if(path.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var t=this.value;this.value=null;var e=this;return t.forEachChild(Ft,(function(t,n){e.remember(new Q(t),n)})),this.forget(path)}if(this.children.size>0){var n=path.getFront();if(path=path.popFront(),this.children.has(n))this.children.get(n).forget(path)&&this.children.delete(n);return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var path=new Q(t.toString()+"/"+n);r.forEachTree(path,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ge||(ge={}));var me,be,_e=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(h.f)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),we=function(){function t(path,t,e){this.path=path,this.affectedTree=t,this.revert=e,this.type=ge.ACK_USER_WRITE,this.source=_e.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(h.f)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Q(e));return new t(Q.Empty,n,this.revert)}return Object(h.f)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),Ee=function(){function t(t,e){void 0===e&&(me||(me=new Bt(M)),e=me),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return B(e,(function(t,e){n=n.set(new Q(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Q.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var o=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=o?{path:new Q(n).child(o.path),value:o.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),o=(this.children.get(r)||t.Empty).set(e.popFront(),n),c=this.children.insert(r,o);return new t(this.value,c)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var o=r.remove(e.popFront()),c=void 0;return c=o.isEmpty()?this.children.remove(n):this.children.insert(n,o),null===this.value&&c.isEmpty()?t.Empty:new t(this.value,c)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),o=(this.children.get(r)||t.Empty).setTree(e.popFront(),n),c=void 0;return c=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,c)},t.prototype.fold=function(t){return this.fold_(Q.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,o){n[r]=o.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(path,t){return this.findOnPath_(path,Q.Empty,t)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var o=t.getFront(),c=this.children.get(o);return c?c.findOnPath_(t.popFront(),e.child(o),n):null},t.prototype.foreachOnPath=function(path,t){return this.foreachOnPath_(path,Q.Empty,t)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var o=e.getFront(),c=this.children.get(o);return c?c.foreachOnPath_(e.popFront(),n.child(o),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(Q.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),Ie=function(){function t(source,path){this.source=source,this.path=path,this.type=ge.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Q.Empty):new t(this.source,this.path.popFront())},t}(),Te=function(){function t(source,path,t){this.source=source,this.path=path,this.snap=t,this.type=ge.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Q.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),Oe=function(){function t(source,path,t){this.source=source,this.path=path,this.children=t,this.type=ge.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Q(e));return n.isEmpty()?null:n.value?new Te(this.source,Q.Empty,n.value):new t(this.source,Q.Empty,n)}return Object(h.f)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Se=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(path){if(path.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=path.getFront();return this.isCompleteForChild(t)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ce=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Se(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Se(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new Se(Jt.EMPTY_NODE,!1,!1),new Se(Jt.EMPTY_NODE,!1,!1)),t}(),Ne=function(){function t(t,e,n,r,o){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=o}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),ke=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,source,o){Object(h.f)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var c=t.getImmediateChild(e);return c.getChild(r).equals(n.getChild(r))&&c.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Ne.childRemovedChange(e,c)):Object(h.f)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?o.trackChildChange(Ne.childAddedChange(e,n)):o.trackChildChange(Ne.childChangedChange(e,n,c))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ft,(function(t,r){e.hasChild(t)||n.trackChildChange(Ne.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Ft,(function(e,r){if(t.hasChild(e)){var o=t.getImmediateChild(e);o.equals(r)||n.trackChildChange(Ne.childChangedChange(e,r,o))}else n.trackChildChange(Ne.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Jt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ae=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(h.f)(e===Ne.CHILD_ADDED||e===Ne.CHILD_CHANGED||e===Ne.CHILD_REMOVED,"Only child changes supported for tracking"),Object(h.f)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if(e===Ne.CHILD_ADDED&&o===Ne.CHILD_REMOVED)this.changeMap.set(n,Ne.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Ne.CHILD_REMOVED&&o===Ne.CHILD_ADDED)this.changeMap.delete(n);else if(e===Ne.CHILD_REMOVED&&o===Ne.CHILD_CHANGED)this.changeMap.set(n,Ne.childRemovedChange(n,r.oldSnap));else if(e===Ne.CHILD_CHANGED&&o===Ne.CHILD_ADDED)this.changeMap.set(n,Ne.childAddedChange(n,t.snapshotNode));else{if(e!==Ne.CHILD_CHANGED||o!==Ne.CHILD_CHANGED)throw Object(h.g)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Ne.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),je=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Pe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Se(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),o=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===o.length?null:o[0]},t}(),xe=function(t,e){this.viewCache=t,this.changes=e},Re=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(h.f)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(h.f)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,o){var c,l,f=new Ae;if(n.type===ge.OVERWRITE){var d=n;d.source.fromUser?c=this.applyUserOverwrite_(e,d.path,d.snap,r,o,f):(Object(h.f)(d.source.fromServer,"Unknown source."),l=d.source.tagged||e.getServerCache().isFiltered()&&!d.path.isEmpty(),c=this.applyServerOverwrite_(e,d.path,d.snap,r,o,l,f))}else if(n.type===ge.MERGE){var v=n;v.source.fromUser?c=this.applyUserMerge_(e,v.path,v.children,r,o,f):(Object(h.f)(v.source.fromServer,"Unknown source."),l=v.source.tagged||e.getServerCache().isFiltered(),c=this.applyServerMerge_(e,v.path,v.children,r,o,l,f))}else if(n.type===ge.ACK_USER_WRITE){var y=n;c=y.revert?this.revertUserWrite_(e,y.path,r,o,f):this.ackUserWrite_(e,y.path,y.affectedTree,r,o,f)}else{if(n.type!==ge.LISTEN_COMPLETE)throw Object(h.g)("Unknown operation type: "+n.type);c=this.listenComplete_(e,n.path,r,f)}var m=f.getChanges();return t.maybeAddValueEvent_(e,c,m),new xe(c,m)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var o=r.getNode().isLeafNode()||r.getNode().isEmpty(),c=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||o&&!r.getNode().equals(c)||!r.getNode().getPriority().equals(c.getPriority()))&&n.push(Ne.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,source,r){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var c=void 0,l=void 0;if(e.isEmpty())if(Object(h.f)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var f=t.getCompleteServerSnap(),d=f instanceof Jt?f:Jt.EMPTY_NODE,v=n.calcCompleteEventChildren(d);c=this.filter_.updateFullNode(t.getEventCache().getNode(),v,r)}else{var y=n.calcCompleteEventCache(t.getCompleteServerSnap());c=this.filter_.updateFullNode(t.getEventCache().getNode(),y,r)}else{var m=e.getFront();if(".priority"===m){Object(h.f)(1===e.getLength(),"Can't have a priority with additional path components");var _=o.getNode();l=t.getServerCache().getNode();var w=n.calcEventCacheAfterServerOverwrite(e,_,l);c=null!=w?this.filter_.updatePriority(_,w):o.getNode()}else{var E=e.popFront(),I=void 0;if(o.isCompleteForChild(m)){l=t.getServerCache().getNode();var T=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),l);I=null!=T?o.getNode().getImmediateChild(m).updateChild(E,T):o.getNode().getImmediateChild(m)}else I=n.calcCompleteChild(m,t.getServerCache());c=null!=I?this.filter_.updateChild(o.getNode(),m,I,E,source,r):o.getNode()}}return t.updateEventSnap(c,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,o,c,h){var l,f=t.getServerCache(),d=c?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())l=d.updateFullNode(f.getNode(),n,null);else if(d.filtersNodes()&&!f.isFiltered()){var v=f.getNode().updateChild(e,n);l=d.updateFullNode(f.getNode(),v,null)}else{var y=e.getFront();if(!f.isCompleteForPath(e)&&e.getLength()>1)return t;var m=e.popFront(),_=f.getNode().getImmediateChild(y).updateChild(m,n);l=".priority"===y?d.updatePriority(f.getNode(),_):d.updateChild(f.getNode(),y,_,m,je,null)}var w=t.updateServerSnap(l,f.isFullyInitialized()||e.isEmpty(),d.filtersNodes()),source=new Pe(r,w,o);return this.generateEventCacheAfterServerEvent_(w,e,r,source,h)},t.prototype.applyUserOverwrite_=function(t,e,n,r,o,c){var h,l,f=t.getEventCache(),source=new Pe(r,t,o);if(e.isEmpty())l=this.filter_.updateFullNode(t.getEventCache().getNode(),n,c),h=t.updateEventSnap(l,!0,this.filter_.filtersNodes());else{var d=e.getFront();if(".priority"===d)l=this.filter_.updatePriority(t.getEventCache().getNode(),n),h=t.updateEventSnap(l,f.isFullyInitialized(),f.isFiltered());else{var v=e.popFront(),y=f.getNode().getImmediateChild(d),m=void 0;if(v.isEmpty())m=n;else{var _=source.getCompleteChild(d);m=null!=_?".priority"===v.getBack()&&_.getChild(v.parent()).isEmpty()?_:_.updateChild(v,n):Jt.EMPTY_NODE}if(y.equals(m))h=t;else{var w=this.filter_.updateChild(f.getNode(),d,m,v,source,c);h=t.updateEventSnap(w,f.isFullyInitialized(),this.filter_.filtersNodes())}}}return h},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,path,n,r,o,c){var h=this,l=e;return n.foreach((function(n,f){var d=path.child(n);t.cacheHasChild_(e,d.getFront())&&(l=h.applyUserOverwrite_(l,d,f,r,o,c))})),n.foreach((function(n,f){var d=path.child(n);t.cacheHasChild_(e,d.getFront())||(l=h.applyUserOverwrite_(l,d,f,r,o,c))})),l},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,path,e,n,r,o,c){var h=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var l,f=t;l=path.isEmpty()?e:Ee.Empty.setTree(path,e);var d=t.getServerCache().getNode();return l.children.inorderTraversal((function(e,l){if(d.hasChild(e)){var v=t.getServerCache().getNode().getImmediateChild(e),y=h.applyMerge_(v,l);f=h.applyServerOverwrite_(f,new Q(e),y,n,r,o,c)}})),l.children.inorderTraversal((function(e,l){var v=!t.getServerCache().isCompleteForChild(e)&&null==l.value;if(!d.hasChild(e)&&!v){var y=t.getServerCache().getNode().getImmediateChild(e),m=h.applyMerge_(y,l);f=h.applyServerOverwrite_(f,new Q(e),m,n,r,o,c)}})),f},t.prototype.ackUserWrite_=function(t,e,n,r,o,c){if(null!=r.shadowingWrite(e))return t;var h=t.getServerCache().isFiltered(),l=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&l.isFullyInitialized()||l.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,l.getNode().getChild(e),r,o,h,c);if(e.isEmpty()){var f=Ee.Empty;return l.getNode().forEachChild(kt,(function(t,e){f=f.set(new Q(t),e)})),this.applyServerMerge_(t,e,f,r,o,h,c)}return t}var d=Ee.Empty;return n.foreach((function(t,n){var r=e.child(t);l.isCompleteForPath(r)&&(d=d.set(t,l.getNode().getChild(r)))})),this.applyServerMerge_(t,e,d,r,o,h,c)},t.prototype.listenComplete_=function(t,path,e,n){var r=t.getServerCache(),o=t.updateServerSnap(r.getNode(),r.isFullyInitialized()||path.isEmpty(),r.isFiltered());return this.generateEventCacheAfterServerEvent_(o,path,e,je,n)},t.prototype.revertUserWrite_=function(t,path,e,n,r){var o;if(null!=e.shadowingWrite(path))return t;var source=new Pe(e,t,n),c=t.getEventCache().getNode(),l=void 0;if(path.isEmpty()||".priority"===path.getFront()){var f=void 0;if(t.getServerCache().isFullyInitialized())f=e.calcCompleteEventCache(t.getCompleteServerSnap());else{var d=t.getServerCache().getNode();Object(h.f)(d instanceof Jt,"serverChildren would be complete if leaf node"),f=e.calcCompleteEventChildren(d)}f=f,l=this.filter_.updateFullNode(c,f,r)}else{var v=path.getFront(),y=e.calcCompleteChild(v,t.getServerCache());null==y&&t.getServerCache().isCompleteForChild(v)&&(y=c.getImmediateChild(v)),(l=null!=y?this.filter_.updateChild(c,v,y,path.popFront(),source,r):t.getEventCache().getNode().hasChild(v)?this.filter_.updateChild(c,v,Jt.EMPTY_NODE,path.popFront(),source,r):c).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=e.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(l=this.filter_.updateFullNode(l,o,r))}return o=t.getServerCache().isFullyInitialized()||null!=e.shadowingWrite(Q.Empty),t.updateEventSnap(l,o,this.filter_.filtersNodes())},t}(),De=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,o=[],c=[];return t.forEach((function(t){t.type===Ne.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&c.push(Ne.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(o,Ne.CHILD_REMOVED,t,n,e),this.generateEventsForType_(o,Ne.CHILD_ADDED,t,n,e),this.generateEventsForType_(o,Ne.CHILD_MOVED,c,n,e),this.generateEventsForType_(o,Ne.CHILD_CHANGED,t,n,e),this.generateEventsForType_(o,Ne.VALUE,t,n,e),o},t.prototype.generateEventsForType_=function(t,e,n,r,o){var c=this,h=n.filter((function(t){return t.type===e}));h.sort(this.compareChanges_.bind(this)),h.forEach((function(e){var n=c.materializeSingleChange_(e,o);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,c.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(a,b){if(null==a.childName||null==b.childName)throw Object(h.g)("Should only compare child_ events.");var t=new St(a.childName,a.snapshotNode),e=new St(b.childName,b.snapshotNode);return this.index_.compare(t,e)},t}(),Le=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new ke(n.getIndex()),filter=n.getNodeFilter();this.processor_=new Re(filter);var o=e.getServerCache(),c=e.getEventCache(),h=r.updateFullNode(Jt.EMPTY_NODE,o.getNode(),null),l=filter.updateFullNode(Jt.EMPTY_NODE,c.getNode(),null),f=new Se(h,o.isFullyInitialized(),r.filtersNodes()),d=new Se(l,c.isFullyInitialized(),filter.filtersNodes());this.viewCache_=new Ce(d,f),this.eventGenerator_=new De(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(path){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!path.isEmpty()&&!t.getImmediateChild(path.getFront()).isEmpty())?t.getChild(path):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(h.f)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){e=e;var o=t.createCancelEvent(e,r);o&&n.push(o)}))}if(t){for(var o=[],i=0;i<this.eventRegistrations_.length;++i){var c=this.eventRegistrations_[i];if(c.matches(t)){if(t.hasAnyCallback()){o=o.concat(this.eventRegistrations_.slice(i+1));break}}else o.push(c)}this.eventRegistrations_=o}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===ge.MERGE&&null!==t.source.queryId&&(Object(h.f)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(h.f)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,o=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(o.viewCache),Object(h.f)(o.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=o.viewCache,this.generateEventsForChanges_(o.changes,o.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(Ft,(function(t,e){n.push(Ne.childAddedChange(t,e))}));return e.isFullyInitialized()&&n.push(Ne.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Me=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(h.f)(be,"Reference.ts has not been loaded"),be},set:function(t){Object(h.f)(!be,"__referenceConstructor has already been defined"),be=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,o,l=t.source.queryId;if(null!==l){var view=this.views.get(l);return Object(h.f)(null!=view,"SyncTree gave us an op for an invalid query."),view.applyOperation(t,e,n)}var f=[];try{for(var d=Object(c.h)(this.views.values()),v=d.next();!v.done;v=d.next()){view=v.value;f=f.concat(view.applyOperation(t,e,n))}}catch(t){r={error:t}}finally{try{v&&!v.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}return f},t.prototype.addEventRegistration=function(t,e,n,r,o){var c=t.queryIdentifier(),view=this.views.get(c);if(!view){var h=n.calcCompleteEventCache(o?r:null),l=!1;h?l=!0:r instanceof Jt?(h=n.calcCompleteEventChildren(r),l=!1):(h=Jt.EMPTY_NODE,l=!1);var f=new Ce(new Se(h,l,!1),new Se(r,o,!1));view=new Le(t,f),this.views.set(c,view)}return view.addEventRegistration(e),view.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,h,l=e.queryIdentifier(),f=[],d=[],v=this.hasCompleteView();if("default"===l)try{for(var y=Object(c.h)(this.views.entries()),m=y.next();!m.done;m=y.next()){var _=Object(c.e)(m.value,2),w=_[0],view=_[1];d=d.concat(view.removeEventRegistration(n,r)),view.isEmpty()&&(this.views.delete(w),view.getQuery().getQueryParams().loadsAllData()||f.push(view.getQuery()))}}catch(t){o={error:t}}finally{try{m&&!m.done&&(h=y.return)&&h.call(y)}finally{if(o)throw o.error}}else(view=this.views.get(l))&&(d=d.concat(view.removeEventRegistration(n,r)),view.isEmpty()&&(this.views.delete(l),view.getQuery().getQueryParams().loadsAllData()||f.push(view.getQuery())));return v&&!this.hasCompleteView()&&f.push(new t.__referenceConstructor(e.repo,e.path)),{removed:f,events:d}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(c.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var view=o.value;view.getQuery().getQueryParams().loadsAllData()||n.push(view)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(path){var t,e,n=null;try{for(var r=Object(c.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var view=o.value;n=n||view.getCompleteServerCache(path)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(c.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var view=r.value;if(view.getQuery().getQueryParams().loadsAllData())return view}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Fe=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(path,e){if(path.isEmpty())return new t(new Ee(e));var n=this.writeTree_.findRootMostValueAndPath(path);if(null!=n){var r=n.path,o=n.value,c=Q.relativePath(r,path);return o=o.updateChild(c,e),new t(this.writeTree_.set(r,o))}var h=new Ee(e);return new t(this.writeTree_.setTree(path,h))},t.prototype.addWrites=function(path,t){var e=this;return B(t,(function(t,n){e=e.addWrite(path.child(t),n)})),e},t.prototype.removeWrite=function(path){return path.isEmpty()?t.Empty:new t(this.writeTree_.setTree(path,Ee.Empty))},t.prototype.hasCompleteWrite=function(path){return null!=this.getCompleteNode(path)},t.prototype.getCompleteNode=function(path){var t=this.writeTree_.findRootMostValueAndPath(path);return null!=t?this.writeTree_.get(t.path).getChild(Q.relativePath(t.path,path)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Ft,(function(e,n){t.push(new St(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new St(e,n.value))})),t},t.prototype.childCompoundWrite=function(path){if(path.isEmpty())return this;var e=this.getCompleteNode(path);return new t(null!=e?new Ee(e):this.writeTree_.subtree(path))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var o=null;return n.children.inorderTraversal((function(n,c){".priority"===n?(Object(h.f)(null!==c.value,"Priority writes must always be leaf nodes"),o=c.value):r=t(e.child(n),c,r)})),r.getChild(e).isEmpty()||null===o||(r=r.updateChild(e.child(".priority"),o)),r}(Q.Empty,this.writeTree_,t)},t.Empty=new t(new Ee(null)),t}();var Ue=function(){function t(){this.visibleWrites_=Fe.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(path){return new Ve(path,this)},t.prototype.addOverwrite=function(path,t,e,n){Object(h.f)(e>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===n&&(n=!0),this.allWrites_.push({path:path,snap:t,writeId:e,visible:n}),n&&(this.visibleWrites_=this.visibleWrites_.addWrite(path,t)),this.lastWriteId_=e},t.prototype.addMerge=function(path,t,e){Object(h.f)(e>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:path,children:t,writeId:e,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(path,t),this.lastWriteId_=e},t.prototype.getWrite=function(t){for(var i=0;i<this.allWrites_.length;i++){var e=this.allWrites_[i];if(e.writeId===t)return e}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(s){return s.writeId===t}));Object(h.f)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var o=r.visible,c=!1,i=this.allWrites_.length-1;o&&i>=0;){var l=this.allWrites_[i];l.visible&&(i>=n&&this.recordContainsPath_(l,r.path)?o=!1:r.path.contains(l.path)&&(c=!0)),i--}if(o){if(c)return this.resetTree_(),!0;r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):B(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}));return!0}return!1},t.prototype.getCompleteWriteData=function(path){return this.visibleWrites_.getCompleteNode(path)},t.prototype.calcCompleteEventCache=function(e,n,r,o){if(r||o){var c=this.visibleWrites_.childCompoundWrite(e);if(!o&&c.isEmpty())return n;if(o||null!=n||c.hasCompleteWrite(Q.Empty)){var h=t.layerTree_(this.allWrites_,(function(t){return(t.visible||o)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);d=n||Jt.EMPTY_NODE;return h.apply(d)}return null}var l=this.visibleWrites_.getCompleteNode(e);if(null!=l)return l;var f=this.visibleWrites_.childCompoundWrite(e);if(f.isEmpty())return n;if(null!=n||f.hasCompleteWrite(Q.Empty)){var d=n||Jt.EMPTY_NODE;return f.apply(d)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Jt.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Ft,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var o=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Ft,(function(t,e){var r=o.childCompoundWrite(new Q(t)).apply(e);n=n.updateImmediateChild(t,r)})),o.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(h.f)(n||r,"Either existingEventSnap or existingServerSnap must exist");var path=t.child(e);if(this.visibleWrites_.hasCompleteWrite(path))return null;var o=this.visibleWrites_.childCompoundWrite(path);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var path=t.child(e),r=this.visibleWrites_.getCompleteNode(path);return null!=r?r:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(path).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(path){return this.visibleWrites_.getCompleteNode(path)},t.prototype.calcIndexedSlice=function(t,e,n,r,o,c){var h,l=this.visibleWrites_.childCompoundWrite(t),f=l.getCompleteNode(Q.Empty);if(null!=f)h=f;else{if(null==e)return[];h=l.apply(e)}if((h=h.withIndex(c)).isEmpty()||h.isLeafNode())return[];for(var d=[],v=c.getCompare(),y=o?h.getReverseIteratorFrom(n,c):h.getIteratorFrom(n,c),m=y.getNext();m&&d.length<r;)0!==v(m,n)&&d.push(m),m=y.getNext();return d},t.prototype.recordContainsPath_=function(t,path){if(t.snap)return t.path.contains(path);for(var e in t.children)if(t.children.hasOwnProperty(e)&&t.path.child(e).contains(path))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Q.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,filter,e){for(var n=Fe.Empty,i=0;i<t.length;++i){var r=t[i];if(filter(r)){var o=r.path,c=void 0;if(r.snap)e.contains(o)?(c=Q.relativePath(e,o),n=n.addWrite(c,r.snap)):o.contains(e)&&(c=Q.relativePath(o,e),n=n.addWrite(Q.Empty,r.snap.getChild(c)));else{if(!r.children)throw Object(h.g)("WriteRecord should have .snap or .children");if(e.contains(o))c=Q.relativePath(e,o),n=n.addWrites(c,r.children);else if(o.contains(e))if((c=Q.relativePath(o,e)).isEmpty())n=n.addWrites(Q.Empty,r.children);else{var l=Object(h.G)(r.children,c.getFront());if(l){var f=l.getChild(c.popFront());n=n.addWrite(Q.Empty,f)}}}}}return n},t}(),Ve=function(){function t(path,t){this.treePath_=path,this.writeTree_=t}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(path,t,e){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,path,t,e)},t.prototype.shadowingWrite=function(path){return this.writeTree_.shadowingWrite(this.treePath_.child(path))},t.prototype.calcIndexedSlice=function(t,e,n,r,o){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,o)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),qe=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=Ee.Empty,this.pendingWriteTree_=new Ue,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(path,t,e,n){return this.pendingWriteTree_.addOverwrite(path,t,e,n),n?this.applyOperationToSyncPoints_(new Te(_e.User,path,t)):[]},t.prototype.applyUserMerge=function(path,t,e){this.pendingWriteTree_.addMerge(path,t,e);var n=Ee.fromObject(t);return this.applyOperationToSyncPoints_(new Oe(_e.User,path,n))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Ee.Empty;return null!=n.snap?r=r.set(Q.Empty,!0):B(n.children,(function(t,e){r=r.set(new Q(t),e)})),this.applyOperationToSyncPoints_(new we(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(path,t){return this.applyOperationToSyncPoints_(new Te(_e.Server,path,t))},t.prototype.applyServerMerge=function(path,t){var e=Ee.fromObject(t);return this.applyOperationToSyncPoints_(new Oe(_e.Server,path,e))},t.prototype.applyListenComplete=function(path){return this.applyOperationToSyncPoints_(new Ie(_e.Server,path))},t.prototype.applyTaggedQueryOverwrite=function(path,e,n){var r=this.queryKeyForTag_(n);if(null!=r){var o=t.parseQueryKey_(r),c=o.path,h=o.queryId,l=Q.relativePath(c,path),f=new Te(_e.forServerTaggedQuery(h),l,e);return this.applyTaggedOperation_(c,f)}return[]},t.prototype.applyTaggedQueryMerge=function(path,e,n){var r=this.queryKeyForTag_(n);if(r){var o=t.parseQueryKey_(r),c=o.path,h=o.queryId,l=Q.relativePath(c,path),f=Ee.fromObject(e),d=new Oe(_e.forServerTaggedQuery(h),l,f);return this.applyTaggedOperation_(c,d)}return[]},t.prototype.applyTaggedListenComplete=function(path,e){var n=this.queryKeyForTag_(e);if(n){var r=t.parseQueryKey_(n),o=r.path,c=r.queryId,h=Q.relativePath(o,path),l=new Ie(_e.forServerTaggedQuery(c),h);return this.applyTaggedOperation_(o,l)}return[]},t.prototype.addEventRegistration=function(e,n){var path=e.path,r=null,o=!1;this.syncPointTree_.foreachOnPath(path,(function(t,e){var n=Q.relativePath(t,path);r=r||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var c,l=this.syncPointTree_.get(path);(l?(o=o||l.hasCompleteView(),r=r||l.getCompleteServerCache(Q.Empty)):(l=new Me,this.syncPointTree_=this.syncPointTree_.set(path,l)),null!=r)?c=!0:(c=!1,r=Jt.EMPTY_NODE,this.syncPointTree_.subtree(path).foreachChild((function(t,e){var n=e.getCompleteServerCache(Q.Empty);n&&(r=r.updateImmediateChild(t,n))})));var f=l.viewExistsForQuery(e);if(!f&&!e.getQueryParams().loadsAllData()){var d=t.makeQueryKey_(e);Object(h.f)(!this.queryToTagMap.has(d),"View does not exist, but we have a tag");var v=t.getNextQueryTag_();this.queryToTagMap.set(d,v),this.tagToQueryMap.set(v,d)}var y=this.pendingWriteTree_.childWrites(path),m=l.addEventRegistration(e,n,y,r,c);if(!f&&!o){var view=l.viewForQuery(e);m=m.concat(this.setupListener_(e,view))}return m},t.prototype.removeEventRegistration=function(e,n,r){var o=this,path=e.path,c=this.syncPointTree_.get(path),h=[];if(c&&("default"===e.queryIdentifier()||c.viewExistsForQuery(e))){var l=c.removeEventRegistration(e,n,r);c.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(path));var f=l.removed;h=l.events;var d=-1!==f.findIndex((function(t){return t.getQueryParams().loadsAllData()})),v=this.syncPointTree_.findOnPath(path,(function(t,e){return e.hasCompleteView()}));if(d&&!v){var y=this.syncPointTree_.subtree(path);if(!y.isEmpty())for(var m=this.collectDistinctViewsForSubTree_(y),i=0;i<m.length;++i){var view=m[i],_=view.getQuery(),w=this.createListenerForView_(view);this.listenProvider_.startListening(t.queryForListening_(_),this.tagForQuery_(_),w.hashFn,w.onComplete)}}if(!v&&f.length>0&&!r)if(d){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else f.forEach((function(e){var n=o.queryToTagMap.get(t.makeQueryKey_(e));o.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(f)}return h},t.prototype.calcCompleteEventCache=function(path,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(path,(function(t,e){var n=Q.relativePath(t,path),r=e.getCompleteServerCache(n);if(r)return r}));return e.calcCompleteEventCache(path,n,t,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),B(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var o=t.makeQueryKey_(r),c=this.queryToTagMap.get(o);this.queryToTagMap.delete(o),this.tagToQueryMap.delete(c)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,view){var path=e.path,n=this.tagForQuery_(e),r=this.createListenerForView_(view),o=this.listenProvider_.startListening(t.queryForListening_(e),n,r.hashFn,r.onComplete),c=this.syncPointTree_.subtree(path);if(n)Object(h.f)(!c.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var l=c.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(view){return view.getQuery()})))),B(n,(function(t,e){r=r.concat(e)})),r})),i=0;i<l.length;++i){var f=l[i];this.listenProvider_.stopListening(t.queryForListening_(f),this.tagForQuery_(f))}return o},t.prototype.createListenerForView_=function(view){var t=this,e=view.getQuery(),n=this.tagForQuery_(e);return{hashFn:function(){return(view.getServerCache()||Jt.EMPTY_NODE).hash()},onComplete:function(r){if("ok"===r)return n?t.applyTaggedListenComplete(e.path,n):t.applyListenComplete(e.path);var o=function(code,t){var e="Unknown Error";"too_big"===code?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===code?e="Client doesn't have permission to access the desired data.":"unavailable"===code&&(e="The service is unavailable");var n=new Error(code+" at "+t.path.toString()+": "+e);return n.code=code.toUpperCase(),n}(r,e);return t.removeEventRegistration(e,null,o)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(h.f)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Q(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(h.f)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Q.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var o=e.get(Q.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Q.Empty));var c=[],h=t.path.getFront(),l=t.operationForChild(h),f=e.children.get(h);if(f&&l){var d=n?n.getImmediateChild(h):null,v=r.child(h);c=c.concat(this.applyOperationHelper_(l,f,d,v))}return o&&(c=c.concat(o.applyOperation(t,r,n))),c},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var o=this,c=e.get(Q.Empty);null==n&&null!=c&&(n=c.getCompleteServerCache(Q.Empty));var h=[];return e.children.inorderTraversal((function(e,c){var l=n?n.getImmediateChild(e):null,f=r.child(e),d=t.operationForChild(e);d&&(h=h.concat(o.applyOperationDescendantsHelper_(d,c,l,f)))})),c&&(h=h.concat(c.applyOperation(t,r,n))),h},t.nextQueryTag_=1,t}(),Be=function(){function t(){this.rootNode_=Jt.EMPTY_NODE}return t.prototype.getNode=function(path){return this.rootNode_.getChild(path)},t.prototype.updateSnapshot=function(path,t){this.rootNode_=this.rootNode_.updateChild(path,t)},t}(),He=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(h.k)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(h.m)(this.counters_)},t}(),Ke=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new He),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),ze=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(c.a)({},t);return this.last_&&B(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),We=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new ze(t);var n=1e4+2e4*Math.random();G(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;B(e,(function(e,o){o>0&&Object(h.k)(t.statsToReport_,e)&&(n[e]=o,r=!0)})),r&&this.server_.reportStats(n),G(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ge=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,i=0;i<t.length;i++){var n=t[i],r=n.getPath();null===e||r.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Qe(r)),e.add(n)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(path,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.equals(path)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,i=0;i<this.eventLists_.length;i++){var n=this.eventLists_[i];if(n)t(n.getPath())?(this.eventLists_[i].raise(),this.eventLists_[i]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Qe=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var i=0;i<this.events_.length;i++){var t=this.events_[i];if(null!==t){this.events_[i]=null;var e=t.getEventRunner();O&&N("event: "+t.toString()),W(e)}}},t.prototype.getPath=function(){return this.path_},t}(),Ye=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(h.f)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(c.f)(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(h.f)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Je=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(c.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(h.f)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Ye),Xe=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(h.x)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(c.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(h.f)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Ye),$e=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,data){var e=this;this.pendingResponses[t]=data;for(var n=function(){var t=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var n=function(i){t[i]&&W((function(){e.onMessage_(t[i])}))},i=0;i<t.length;++i)n(i);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++},r=this;this.pendingResponses[this.currentResponseNum];){if("break"===n())break}},t}(),Ze=function(){function t(t,e,n,r,o){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=k(t),this.stats_=Ke.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new $e(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(h.z)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new tn((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(c.e)(t,5),o=r[0],h=r[1],l=r[2];r[3],r[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===o)n.id=h,n.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);h?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(h,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(c.e)(t,2),o=r[0],data=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,data)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&J.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!Object(h.z)()&&(!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(data){var t=Object(h.J)(data);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var e=Object(h.i)(t),n=V(e,1840),i=0;i<n.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(h.z)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(h.J)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),tn=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(h.z)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=E(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var script="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))script='<script>document.domain="'+document.domain+'";<\/script>';var c="<html><body>"+script+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(t){N("frame writing exception"),t.stack&&N(t.stack),N(t)}}}return t.createIFrame_=function(){var iframe=document.createElement("iframe");if(iframe.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(iframe);try{iframe.contentWindow.document||N("No IE domain setting required")}catch(e){var t=document.domain;iframe.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return iframe.contentDocument?iframe.doc=iframe.contentDocument:iframe.contentWindow?iframe.doc=iframe.contentWindow.document:iframe.document&&(iframe.doc=iframe.document),iframe},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",i=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var r=this.pendingSegs.shift();n=n+"&seg"+i+"="+r.seg+"&ts"+i+"="+r.ts+"&d"+i+"="+r.d,i++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,data){this.pendingSegs.push({seg:t,ts:e,d:data}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(o),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(h.z)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){N("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),en="";function nn(t){en=t}var rn=null;"undefined"!=typeof MozWebSocket?rn=MozWebSocket:"undefined"!=typeof WebSocket&&(rn=WebSocket);var on=function(){function e(t,n,r,o,c){this.connId=t,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=k(this.connId),this.stats_=Ke.getCollection(n),this.connURL=e.connectionURL_(n,o,c),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(h.z)()&&"undefined"!=typeof location&&location.hostname&&J.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},e.prototype.open=function(e,n){var r=this;this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,m.set("previous_websocket_failure",!0);try{if(Object(h.z)()){var o=this.nodeAdmin?"AdminNode":"Node",c={headers:{"User-Agent":"Firebase/5/"+en+"/"+t.platform+"/"+o,"X-Firebase-GMPID":this.applicationId||""}},l=t.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(c.proxy={origin:f}),this.mySock=new rn(this.connURL,[],c)}else{c={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new rn(this.connURL,[],c)}}catch(t){this.log_("Error instantiating WebSocket.");var d=t.message||t.data;return d&&this.log_(d),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&r.log_(e),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==rn&&!e.forceDisallow_},e.previouslyFailed=function(){return m.isInMemoryStorage||!0===m.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){m.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(data){if(this.frames.push(data),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var e=Object(h.D)(t);this.onMessage(e)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(data){if(Object(h.f)(null===this.frames,"We already have a frame buffer"),data.length<=6){var t=Number(data);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),data},e.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var data=t.data;if(this.bytesReceived+=data.length,this.stats_.incrementCounter("bytes_received",data.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(data);else{var e=this.extractFrameCount_(data);null!==e&&this.appendFrame_(e)}}},e.prototype.send=function(data){this.resetKeepAlive();var t=Object(h.J)(data);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=V(t,16384);e.length>1&&this.sendString_(String(e.length));for(var i=0;i<e.length;i++)this.sendString_(e[i])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),sn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ze,on]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=on&&on.isAvailable(),h=o&&!on.previouslyFailed();if(e.webSocketOnly&&(o||P("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),h=!0),h)this.transports_=[on];else{var l=this.transports_=[];try{for(var f=Object(c.h)(t.ALL_TRANSPORTS),d=f.next();!d.done;d=f.next()){var v=d.value;v&&v.isAvailable()&&l.push(v)}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),an=function(){function t(t,e,n,r,o,c,h,l){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=o,this.onDisconnect_=c,this.onKill_=h,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=k("c:"+this.id+":"),this.transportManager_=new sn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=G((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(o)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=F("t",t),data=F("d",t);if("c"===e)this.onSecondaryControl_(data);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(data)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=F("t",t),data=F("d",t);"c"===e?this.onControl_(data):"d"===e&&this.onDataMessage_(data)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=F("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?A("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):A("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&P("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),G((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):G((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(m.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(data){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(data)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),un=function(){function t(){}return t.prototype.put=function(t,data,e,n){},t.prototype.merge=function(t,data,e,n){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,data,e){},t.prototype.onDisconnectMerge=function(t,data,e){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),cn=function(t){function e(n,r,o,c,l,f,d){var v=t.call(this)||this;if(v.repoInfo_=n,v.applicationId_=r,v.onDataUpdate_=o,v.onConnectStatus_=c,v.onServerInfoUpdate_=l,v.authTokenProvider_=f,v.authOverride_=d,v.id=e.nextPersistentConnectionId_++,v.log_=k("p:"+v.id+":"),v.interruptReasons_={},v.listens=new Map,v.outstandingPuts_=[],v.outstandingGets_=[],v.outstandingPutCount_=0,v.outstandingGetCount_=0,v.onDisconnectRequestQueue_=[],v.connected_=!1,v.reconnectDelay_=1e3,v.maxReconnectDelay_=3e5,v.securityDebugCallback_=null,v.lastSessionId=null,v.establishConnectionTimer_=null,v.visible_=!1,v.requestCBHash_={},v.requestNumber_=0,v.realtime_=null,v.authToken_=null,v.forceTokenRefresh_=!1,v.invalidAuthTokenCount_=0,v.firstConnection_=!0,v.lastConnectionAttemptTime_=null,v.lastConnectionEstablishedTime_=null,d&&!Object(h.z)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return v.scheduleConnect_(0),Je.getInstance().on("visible",v.onVisible_,v),-1===n.host.indexOf("fblocal")&&Xe.getInstance().on("online",v.onOnline_,v),v}return Object(c.c)(e,t),e.prototype.sendRequest=function(t,body,e){var n=++this.requestNumber_,r={r:n,a:t,b:body};this.log_(Object(h.J)(r)),Object(h.f)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),e&&(this.requestCBHash_[n]=e)},e.prototype.get=function(t){var e=this,n=new h.a,r={p:t.path.toString(),q:t.queryObject()},o={action:"g",request:r,onComplete:function(t){var o=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,o,!1,null),n.resolve(o)):n.reject(o)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var c=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[c];void 0!==t&&o===t&&(delete e.outstandingGets_[c],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+c+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(c),n.promise},e.prototype.listen=function(t,e,n,r){var o=t.queryIdentifier(),c=t.path.toString();this.log_("Listen called for "+c+" "+o),this.listens.has(c)||this.listens.set(c,new Map),Object(h.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(h.f)(!this.listens.get(c).has(o),"listen() called twice for same path/queryId.");var l={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(c).set(o,l),this.connected_&&this.sendListen_(l)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,o=r.path.toString(),c=r.queryIdentifier();this.log_("Listen on "+o+" for "+c);var h={p:o};t.tag&&(h.q=r.queryObject(),h.t=t.tag),h.h=t.hashFn(),this.sendRequest("q",h,(function(h){var l=h.d,f=h.s;e.warnOnListenWarnings_(l,r),(n.listens.get(o)&&n.listens.get(o).get(c))===t&&(n.log_("listen response",h),"ok"!==f&&n.removeListen_(o,c),t.onComplete&&t.onComplete(f,l))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(h.k)(t,"w")){var n=Object(h.G)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',o=e.path.toString();P("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(h.q)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(h.C)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,data=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,data))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(h.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var o={p:t};r&&(o.q=n,o.t=r),this.sendRequest("n",o)},e.prototype.onDisconnectPut=function(t,data,e){this.connected_?this.sendOnDisconnect_("o",t,data,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:data,onComplete:e})},e.prototype.onDisconnectMerge=function(t,data,e){this.connected_?this.sendOnDisconnect_("om",t,data,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:data,onComplete:e})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,data,n){var r={p:e,d:data};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,(function(t){n&&setTimeout((function(){n(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,data,e,n){this.putInternal("p",t,data,e,n)},e.prototype.merge=function(t,data,e,n){this.putInternal("m",t,data,e,n)},e.prototype.putInternal=function(t,e,data,n,r){var o={p:e,d:data};void 0!==r&&(o.h=r),this.outstandingPuts_.push({action:t,request:o,onComplete:n}),this.outstandingPutCount_++;var c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),o&&o(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(h.J)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,body){this.log_("handleServerMessage",t,body),"d"===t?this.onDataUpdate_(body.p,body.d,!1,body.t):"m"===t?this.onDataUpdate_(body.p,body.d,!0,body.t):"c"===t?this.onListenRevoked_(body.p,body.q):"ac"===t?this.onAuthRevoked_(body.s,body.d):"sd"===t?this.onSecurityDebugPacket_(body):A("Unrecognized action received from server: "+Object(h.J)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(h.f)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),c=this.id+":"+e.nextConnectionId_++,l=this,f=this.lastSessionId,d=!1,v=null,y=function(){v?v.close():(d=!0,o())};this.realtime_={close:y,sendRequest:function(t){Object(h.f)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(t)}};var m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(m).then((function(t){d?N("getToken() completed but was canceled"):(N("getToken() completed. Creating connection."),l.authToken_=t&&t.accessToken,v=new an(c,l.repoInfo_,l.applicationId_,n,r,o,(function(t){P(t+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")}),f))})).then(null,(function(e){l.log_("Failed to get token: "+e),d||(t.repoInfo_.nodeAdmin&&P(e),y())}))}},e.prototype.interrupt=function(t){N("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){N("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(h.u)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var i=0;i<this.outstandingPuts_.length;i++){var t=this.outstandingPuts_[i];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[i],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(q){return U(q)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Q(t).toString();if(this.listens.has(r)){var map=this.listens.get(r);n=map.get(e),map.delete(e),0===map.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){N("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(body){this.securityDebugCallback_?this.securityDebugCallback_(body):"msg"in body&&console.log("FIREBASE: "+body.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(c.h)(this.listens.values()),h=o.next();!h.done;h=o.next()){var l=h.value;try{for(var f=(n=void 0,Object(c.h)(l.values())),d=f.next();!d.done;d=f.next()){var v=d.value;this.sendListen_(v)}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{h&&!h.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var i=0;i<this.outstandingPuts_.length;i++)this.outstandingPuts_[i]&&this.sendPut_(i);for(;this.onDisconnectRequestQueue_.length;){var y=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(y.action,y.pathString,y.data,y.onComplete)}for(i=0;i<this.outstandingGets_.length;i++)this.outstandingGets_[i]&&this.sendGet_(i)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(h.z)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+en.replace(/\./g,"-")]=1,Object(h.x)()?t["framework.cordova"]=1:Object(h.A)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Xe.getInstance().currentlyOnline();return Object(h.u)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(un),hn=function(t){function e(e,n,r){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.log_=k("p:rest:"),o.listens_={},o}return Object(c.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(h.f)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,o){var c=this,l=t.path.toString();this.log_("Listen called for "+l+" "+t.queryIdentifier());var f=e.getListenId_(t,r),d={};this.listens_[f]=d;var v=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(l+".json",v,(function(t,e){var data=e;(404===t&&(data=null,t=null),null===t&&c.onDataUpdate_(l,data,!1,r),Object(h.G)(c.listens_,f)===d)&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),o=new h.a;return this.restRequest_(r+".json",n,(function(t,n){var data=n;404===t&&(data=null,t=null),null===t?(e.onDataUpdate_(r,data,!1,null),o.resolve(data)):o.reject(new Error(data))})),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(o){var c=o&&o.accessToken;c&&(e.auth=c);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(h.F)(e);r.log_("Sending REST request for "+l);var f=new XMLHttpRequest;f.onreadystatechange=function(){if(n&&4===f.readyState){r.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);var t=null;if(f.status>=200&&f.status<300){try{t=Object(h.D)(f.responseText)}catch(t){P("Failed to parse JSON response for "+l+": "+f.responseText)}n(null,t)}else 401!==f.status&&404!==f.status&&P("Got unsuccessful REST response for "+l+" Status: "+f.status),n(f.status);n=null}},f.open("GET",l,!0),f.send()}))},e}(un),ln=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ge,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ye,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Ke.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new hn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(h.J)(e)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new cn(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=Ke.getOrCreateReporter(this.repoInfo_,(function(){return new We(t.stats_,t.server_)})),this.transactionsInit_(),this.infoData_=new Be,this.infoSyncTree_=new qe({startListening:function(e,n,r,o){var c=[],h=t.infoData_.getNode(e.path);return h.isEmpty()||(c=t.infoSyncTree_.applyServerOverwrite(e.path,h),setTimeout((function(){o("ok")}),0)),c},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new qe({startListening:function(e,n,r,o){return t.server_.listen(e,r,n,(function(n,data){var r=o(n,data);t.eventQueue_.raiseEventsForChangedPath(e.path,r)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,data,e,n){this.dataUpdateCount++;var path=new Q(t);data=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,data):data;var r=[];if(n)if(e){var o=Object(h.E)(data,(function(t){return $t(t)}));r=this.serverSyncTree_.applyTaggedQueryMerge(path,o,n)}else{var c=$t(data);r=this.serverSyncTree_.applyTaggedQueryOverwrite(path,c,n)}else if(e){var l=Object(h.E)(data,(function(t){return $t(t)}));r=this.serverSyncTree_.applyServerMerge(path,l)}else{var f=$t(data);r=this.serverSyncTree_.applyServerOverwrite(path,f)}var d=path;r.length>0&&(d=this.rerunTransactions_(path)),this.eventQueue_.raiseEventsForChangedPath(d,r)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;B(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var path=new Q("/.info/"+t),n=$t(e);this.infoData_.updateSnapshot(path,n);var r=this.infoSyncTree_.applyServerOverwrite(path,n);this.eventQueue_.raiseEventsForChangedPath(path,r)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then((function(n){var r=$t(n),o=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,o),Promise.resolve(new ne(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){e.log_("get for query "+Object(h.J)(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new ne(r,t.getRef(),t.getQueryParams().getIndex()))}))},t.prototype.setWithPriority=function(path,t,e,n){var r=this;this.log_("set",{path:path.toString(),value:t,priority:e});var o=this.generateServerValues(),c=$t(t,e),h=this.serverSyncTree_.calcCompleteEventCache(path),l=de(c,h,o),f=this.getNextWriteId_(),d=this.serverSyncTree_.applyUserOverwrite(path,l,f,!0);this.eventQueue_.queueEvents(d),this.server_.put(path.toString(),c.val(!0),(function(t,e){var o="ok"===t;o||P("set at "+path+" failed: "+t);var c=r.serverSyncTree_.ackUserWrite(f,!o);r.eventQueue_.raiseEventsForChangedPath(path,c),r.callOnCompleteCallback(n,t,e)}));var v=this.abortTransactions_(path);this.rerunTransactions_(v),this.eventQueue_.raiseEventsForChangedPath(v,[])},t.prototype.update=function(path,t,e){var n=this;this.log_("update",{path:path.toString(),value:t});var r=!0,o=this.generateServerValues(),c={};if(B(t,(function(t,e){r=!1,c[t]=pe(path.child(t),$t(e),n.serverSyncTree_,o)})),r)N("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(e,"ok");else{var h=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserMerge(path,c,h);this.eventQueue_.queueEvents(l),this.server_.merge(path.toString(),t,(function(t,r){var o="ok"===t;o||P("update at "+path+" failed: "+t);var c=n.serverSyncTree_.ackUserWrite(h,!o),l=c.length>0?n.rerunTransactions_(path):path;n.eventQueue_.raiseEventsForChangedPath(l,c),n.callOnCompleteCallback(e,t,r)})),B(t,(function(t){var e=n.abortTransactions_(path.child(t));n.rerunTransactions_(e)})),this.eventQueue_.raiseEventsForChangedPath(path,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new ye;this.onDisconnect_.forEachTree(Q.Empty,(function(path,r){var o=pe(path,r,t.serverSyncTree_,e);n.remember(path,o)}));var r=[];n.forEachTree(Q.Empty,(function(path,e){r=r.concat(t.serverSyncTree_.applyServerOverwrite(path,e));var n=t.abortTransactions_(path);t.rerunTransactions_(n)})),this.onDisconnect_=new ye,this.eventQueue_.raiseEventsForChangedPath(Q.Empty,r)},t.prototype.onDisconnectCancel=function(path,t){var e=this;this.server_.onDisconnectCancel(path.toString(),(function(n,r){"ok"===n&&e.onDisconnect_.forget(path),e.callOnCompleteCallback(t,n,r)}))},t.prototype.onDisconnectSet=function(path,t,e){var n=this,r=$t(t);this.server_.onDisconnectPut(path.toString(),r.val(!0),(function(t,o){"ok"===t&&n.onDisconnect_.remember(path,r),n.callOnCompleteCallback(e,t,o)}))},t.prototype.onDisconnectSetWithPriority=function(path,t,e,n){var r=this,o=$t(t,e);this.server_.onDisconnectPut(path.toString(),o.val(!0),(function(t,e){"ok"===t&&r.onDisconnect_.remember(path,o),r.callOnCompleteCallback(n,t,e)}))},t.prototype.onDisconnectUpdate=function(path,t,e){var n=this;if(Object(h.u)(t))return N("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(e,"ok");this.server_.onDisconnectMerge(path.toString(),t,(function(r,o){"ok"===r&&B(t,(function(t,e){var r=$t(e);n.onDisconnect_.remember(path.child(t),r)})),n.callOnCompleteCallback(e,r,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new ze(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);B(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),N.apply(void 0,Object(c.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&W((function(){if("ok"===e)t(null);else{var code=(e||"error").toUpperCase(),r=code;n&&(r+=": "+n);var o=new Error(r);o.code=code,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new In(this))},enumerable:!1,configurable:!0}),t}(),fn=function(){function t(e){this.indexedFilter_=new ke(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,source,o){return this.matches(new St(e,n))||(n=Jt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,source,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Jt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Jt.EMPTY_NODE);var o=this;return e.forEachChild(Ft,(function(t,e){o.matches(new St(t,e))||(r=r.updateImmediateChild(t,Jt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),pn=function(){function t(t){this.rangedFilter_=new fn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,source,o){return this.rangedFilter_.matches(new St(e,n))||(n=Jt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,source,o):this.fullLimitUpdateChild_(t,e,n,source,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Jt.EMPTY_NODE.withIndex(this.index_);var o=void 0;o=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var c=0;o.hasNext()&&c<this.limit_;){var h=o.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(h.name,h.node),c++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Jt.EMPTY_NODE);var l=void 0,f=void 0,d=void 0;o=void 0;if(this.reverse_){o=r.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),f=this.rangedFilter_.getStartPost();var v=this.index_.getCompare();d=function(a,b){return v(b,a)}}else o=r.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),f=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();c=0;for(var y=!1;o.hasNext();){h=o.getNext();!y&&d(l,h)<=0&&(y=!0),y&&c<this.limit_&&d(h,f)<=0?c++:r=r.updateImmediateChild(h.name,Jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,source,r){var o;if(this.reverse_){var c=this.index_.getCompare();o=function(a,b){return c(b,a)}}else o=this.index_.getCompare();var l=t;Object(h.f)(l.numChildren()===this.limit_,"");var f=new St(e,n),d=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),v=this.rangedFilter_.matches(f);if(l.hasChild(e)){for(var y=l.getImmediateChild(e),m=source.getChildAfterChild(this.index_,d,this.reverse_);null!=m&&(m.name===e||l.hasChild(m.name));)m=source.getChildAfterChild(this.index_,m,this.reverse_);var _=null==m?1:o(m,f);if(v&&!n.isEmpty()&&_>=0)return null!=r&&r.trackChildChange(Ne.childChangedChange(e,n,y)),l.updateImmediateChild(e,n);null!=r&&r.trackChildChange(Ne.childRemovedChange(e,y));var w=l.updateImmediateChild(e,Jt.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(null!=r&&r.trackChildChange(Ne.childAddedChange(m.name,m.node)),w.updateImmediateChild(m.name,m.node)):w}return n.isEmpty()?t:v&&o(d,f)>=0?(null!=r&&(r.trackChildChange(Ne.childRemovedChange(d.name,d.node)),r.trackChildChange(Ne.childAddedChange(e,n))),l.updateImmediateChild(e,n).updateImmediateChild(d.name,Jt.EMPTY_NODE)):t},t}(),dn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ft}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(h.f)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(h.f)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:R},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(h.f)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(h.f)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:D},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(h.f)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Ft&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ft},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new ke(this.getIndex()):this.hasLimit()?new pn(this):new fn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Ft?e=n.PRIORITY_INDEX:this.index_===te?e=n.VALUE_INDEX:this.index_===kt?e=n.KEY_INDEX:(Object(h.f)(this.index_ instanceof ee,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(h.J)(e),this.startSet_&&(r[n.START_AT]=Object(h.J)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(h.J)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(h.J)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(h.J)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),vn=function(t){function e(e,path){if(!(e instanceof ln))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,path,dn.DEFAULT,!1)||this}return Object(c.c)(e,t),e.prototype.getKey=function(){return Object(h.K)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(h.K)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Q||(null===this.path.getFront()?bt("Reference.child",1,t,!1):mt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(h.K)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(h.K)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(h.K)("Reference.set",1,2,arguments.length),_t("Reference.set",this.path),lt("Reference.set",1,t,this.path,!1),Object(h.L)("Reference.set",2,e,!0);var n=new h.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(h.K)("Reference.update",1,2,arguments.length),_t("Reference.update",this.path),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,P("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}pt("Reference.update",1,t,this.path,!1),Object(h.L)("Reference.update",2,e,!0);var r=new h.a;return this.repo.update(this.path,t,r.wrapCallback(e)),r.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(h.K)("Reference.setWithPriority",2,3,arguments.length),_t("Reference.setWithPriority",this.path),lt("Reference.setWithPriority",1,t,this.path,!1),vt("Reference.setWithPriority",2,e,!1),Object(h.L)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new h.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(h.K)("Reference.remove",0,1,arguments.length),_t("Reference.remove",this.path),Object(h.L)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(h.K)("Reference.transaction",1,3,arguments.length),_t("Reference.transaction",this.path),Object(h.L)("Reference.transaction",1,t,!1),Object(h.L)("Reference.transaction",2,e,!0),Et("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new h.a;"function"==typeof e&&r.promise.catch((function(){}));var o=function(t,n,o){t?r.reject(t):r.resolve(new Tt(n,o)),"function"==typeof e&&e(t,n,o)};return this.repo.startTransaction(this.path,t,o,n),r.promise},e.prototype.setPriority=function(t,e){Object(h.K)("Reference.setPriority",1,2,arguments.length),_t("Reference.setPriority",this.path),vt("Reference.setPriority",1,t,!1),Object(h.L)("Reference.setPriority",2,e,!0);var n=new h.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(h.K)("Reference.push",0,2,arguments.length),_t("Reference.push",this.path),lt("Reference.push",1,t,this.path,!0),Object(h.L)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),o=Ot(r),c=this.child(o),l=this.child(o);return n=null!=t?c.set(t,e).then((function(){return l})):Promise.resolve(l),c.then=n.then.bind(n),c.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),c},e.prototype.onDisconnect=function(){return _t("Reference.onDisconnect",this.path),new It(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(ae);ae.__referenceConstructor=vn,Me.__referenceConstructor=vn;var gn,yn=function(){this.children={},this.childCount=0,this.value=null},mn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new yn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var path=e instanceof Q?e:new Q(e),n=this,r=path.getFront();null!==r;){n=new t(r,n,Object(h.G)(n.node_.children,r)||new yn),r=(path=path.popFront()).getFront()}return n},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(h.f)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;B(this.node_.children,(function(r,o){e(new t(r,n,o))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new Q(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(h.k)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(gn||(gn={})),ln.MAX_TRANSACTION_RETRIES_=25,ln.prototype.transactionsInit_=function(){this.transactionQueueTree_=new mn},ln.prototype.startTransaction=function(path,t,e,n){this.log_("transaction on "+path);var r=function(){},o=new vn(this,path);o.on("value",r);var c={path:path,update:t,onComplete:e,status:null,order:E(),applyLocally:n,retryCount:0,unwatcher:function(){o.off("value",r)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=this.getLatestState_(path);c.currentInputSnapshot=l;var f=c.update(l.val());if(void 0===f){if(c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete){var d=new ne(c.currentInputSnapshot,new vn(this,c.path),Ft);c.onComplete(null,!1,d)}}else{ft("transaction failed: Data returned ",f,c.path),c.status=gn.RUN;var v=this.transactionQueueTree_.subTree(path),y=v.getValue()||[];y.push(c),v.setValue(y);var m=void 0;if("object"==typeof f&&null!==f&&Object(h.k)(f,".priority"))m=Object(h.G)(f,".priority"),Object(h.f)(ht(m),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else m=(this.serverSyncTree_.calcCompleteEventCache(path)||Jt.EMPTY_NODE).getPriority().val();m=m;var _=this.generateServerValues(),w=$t(f,m),I=de(w,l,_);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=I,c.currentWriteId=this.getNextWriteId_();var T=this.serverSyncTree_.applyUserOverwrite(path,I,c.currentWriteId,c.applyLocally);this.eventQueue_.raiseEventsForChangedPath(path,T),this.sendReadyTransactions_()}},ln.prototype.getLatestState_=function(path,t){return this.serverSyncTree_.calcCompleteEventCache(path,t)||Jt.EMPTY_NODE},ln.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(h.f)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===gn.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},ln.prototype.sendTransactionQueue_=function(path,t){for(var e=this,n=t.map((function(t){return t.currentWriteId})),r=this.getLatestState_(path,n),o=r,c=r.hash(),i=0;i<t.length;i++){var l=t[i];Object(h.f)(l.status===gn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=gn.SENT,l.retryCount++;var f=Q.relativePath(path,l.path);o=o.updateChild(f,l.currentOutputSnapshotRaw)}var d=o.val(!0),v=path;this.server_.put(v.toString(),d,(function(n){e.log_("transaction put response",{path:v.toString(),status:n});var r=[];if("ok"===n){for(var o=[],i=0;i<t.length;i++){if(t[i].status=gn.COMPLETED,r=r.concat(e.serverSyncTree_.ackUserWrite(t[i].currentWriteId)),t[i].onComplete){var c=t[i].currentOutputSnapshotResolved,h=new vn(e,t[i].path),l=new ne(c,h,Ft);o.push(t[i].onComplete.bind(null,null,!0,l))}t[i].unwatcher()}e.pruneCompletedTransactionsBelowNode_(e.transactionQueueTree_.subTree(path)),e.sendReadyTransactions_(),e.eventQueue_.raiseEventsForChangedPath(path,r);for(i=0;i<o.length;i++)W(o[i])}else{if("datastale"===n)for(i=0;i<t.length;i++)t[i].status===gn.SENT_NEEDS_ABORT?t[i].status=gn.NEEDS_ABORT:t[i].status=gn.RUN;else{P("transaction at "+v.toString()+" failed: "+n);for(i=0;i<t.length;i++)t[i].status=gn.NEEDS_ABORT,t[i].abortReason=n}e.rerunTransactions_(path)}}),c)},ln.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),path=e.path(),n=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(n,path),path},ln.prototype.rerunTransactionQueue_=function(t,path){if(0!==t.length){for(var e,n=[],r=[],o=t.filter((function(q){return q.status===gn.RUN})).map((function(q){return q.currentWriteId})),i=0;i<t.length;i++){var c=t[i],l=Q.relativePath(path,c.path),f=!1,d=void 0;if(Object(h.f)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===gn.NEEDS_ABORT)f=!0,d=c.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0));else if(c.status===gn.RUN)if(c.retryCount>=ln.MAX_TRANSACTION_RETRIES_)f=!0,d="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0));else{var v=this.getLatestState_(c.path,o);c.currentInputSnapshot=v;var y=t[i].update(v.val());if(void 0!==y){ft("transaction failed: Data returned ",y,c.path);var m=$t(y);"object"==typeof y&&null!=y&&Object(h.k)(y,".priority")||(m=m.updatePriority(v.getPriority()));var _=c.currentWriteId,w=this.generateServerValues(),E=de(m,v,w);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=E,c.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(_),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(c.path,E,c.currentWriteId,c.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(_,!0))}else f=!0,d="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(path,r),r=[],f&&(t[i].status=gn.COMPLETED,e=t[i].unwatcher,setTimeout(e,Math.floor(0)),t[i].onComplete))if("nodata"===d){var I=new vn(this,t[i].path),T=t[i].currentInputSnapshot,O=new ne(T,I,Ft);n.push(t[i].onComplete.bind(null,null,!1,O))}else n.push(t[i].onComplete.bind(null,new Error(d),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(i=0;i<n.length;i++)W(n[i]);this.sendReadyTransactions_()}},ln.prototype.getAncestorTransactionNode_=function(path){var t,e=this.transactionQueueTree_;for(t=path.getFront();null!==t&&null===e.getValue();)e=e.subTree(t),t=(path=path.popFront()).getFront();return e},ln.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(a,b){return a.order-b.order})),e},ln.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},ln.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,o=0;o<n.length;o++)n[o].status!==gn.COMPLETED&&(n[r]=n[o],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},ln.prototype.abortTransactions_=function(path){var t=this,e=this.getAncestorTransactionNode_(path).path(),n=this.transactionQueueTree_.subTree(path);return n.forEachAncestor((function(e){t.abortTransactionsOnNode_(e)})),this.abortTransactionsOnNode_(n),n.forEachDescendant((function(e){t.abortTransactionsOnNode_(e)})),e},ln.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],o=-1,i=0;i<e.length;i++)if(e[i].status===gn.SENT_NEEDS_ABORT);else if(e[i].status===gn.SENT)Object(h.f)(o===i-1,"All SENT items should be at beginning of queue."),o=i,e[i].status=gn.SENT_NEEDS_ABORT,e[i].abortReason="set";else if(Object(h.f)(e[i].status===gn.RUN,"Unexpected transaction status in abort"),e[i].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[i].currentWriteId,!0)),e[i].onComplete){n.push(e[i].onComplete.bind(null,new Error("set"),!1,null))}-1===o?t.setValue(null):e.length=o+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(i=0;i<n.length;i++)W(n[i])}};var bn,_n=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(N("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',P(t)},t}(),wn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),En=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return bn||(bn=new e),bn},e.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(c.h)(Object.keys(this.repos_)),h=o.next();!h.done;h=o.next()){var l=h.value;try{for(var f=(n=void 0,Object(c.h)(Object.keys(this.repos_[l]))),d=f.next();!d.done;d=f.next()){var v=d.value;this.repos_[l][v].interrupt()}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{h&&!h.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(c.h)(Object.keys(this.repos_)),h=o.next();!h.done;h=o.next()){var l=h.value;try{for(var f=(n=void 0,Object(c.h)(Object.keys(this.repos_[l]))),d=f.next();!d.done;d=f.next()){var v=d.value;this.repos_[l][v].resume()}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{h&&!h.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new X(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new wn)},e.prototype.databaseFromApp=function(e,n,r,o){var c=r||e.options.databaseURL;void 0===c&&(e.options.projectId||j("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),N("Using default host for project ",e.options.projectId),c=e.options.projectId+"-default-rtdb.firebaseio.com");var h,l=it(c,o),f=l.repoInfo,d=void 0;void 0!==t&&(d=t.env.FIREBASE_DATABASE_EMULATOR_HOST),d?(h=!0,c="http://"+d+"?ns="+f.namespace,f=(l=it(c,o)).repoInfo):h=!l.repoInfo.secure;var v=o&&h?new wn:new _n(e,n);return wt("Invalid Firebase Database URL",1,l),l.path.isEmpty()||j("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(f,e,v).database},e.prototype.deleteRepo=function(t){var e=Object(h.G)(this.repos_,t.app.name);e&&Object(h.G)(e,t.key)===t||j("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},e.prototype.createRepo=function(t,e,n){var r=Object(h.G)(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var o=Object(h.G)(r,t.toURLString());return o&&j("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new ln(t,this.useRestClient_,e,n),r[t.toURLString()]=o,o},e.prototype.forceRestClient=function(t){this.useRestClient_=t},e}(),In=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(c.b)(e,void 0,void 0,(function(){return Object(c.d)(this,(function(t){return this.checkDeleted_("delete"),En.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof ln||j("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new vn(this.repo_,Q.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?j("Cannot call useEmulator() after instance has already been initialized."):En.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(path){return this.checkDeleted_("ref"),Object(h.K)("database.ref",0,1,arguments.length),path instanceof vn?this.refFromURL(path.toString()):void 0!==path?this.root_.child(path):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(h.K)(e,1,1,arguments.length);var n=it(t,this.repo_.repoInfo_.nodeAdmin);wt(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||j(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&j("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(h.K)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(h.K)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}();var Tn=Object.freeze({__proto__:null,forceLongPolling:function(){on.forceDisallow(),Ze.forceAllow()},forceWebSockets:function(){Ze.forceDisallow()},isWebSocketsAvailable:function(){return on.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,o=t.customAuthImpl,c=t.namespace,h=t.nodeAdmin,l=void 0!==h&&h;nn(r);var d=new f.c("auth-internal",new f.b("database-standalone"));return d.setComponent(new f.a("auth-internal",(function(){return o}),"PRIVATE")),{instance:En.getInstance().databaseFromApp(e,d,n,l),namespace:c}}}),On=cn;cn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},cn.prototype.echo=function(data,t){this.sendRequest("echo",{d:data},t)};var Sn=an,Cn=X,Nn=Object.freeze({__proto__:null,DataConnection:On,RealTimeConnection:Sn,hijackHash:function(t){var e=cn.prototype.put;return cn.prototype.put=function(n,data,r,o){void 0!==o&&(o=t()),e.call(this,n,data,r,o)},function(){cn.prototype.put=e}},ConnectionTarget:Cn,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){En.getInstance().forceRestClient(t)}}),kn=In.ServerValue;!function(t){nn(t.SDK_VERSION);var n=t.INTERNAL.registerComponent(new f.a("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return En.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:vn,Query:ae,Database:In,DataSnapshot:ne,enableLogging:C,INTERNAL:Tn,ServerValue:kn,TEST_ACCESS:Nn}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.8.2"),Object(h.z)()&&(e.exports=n)}(o.a)}).call(this,n(109),n(210)(t))},211:function(t,e,n){"use strict";n(152)},23:function(t,e,n){"use strict";(function(t,r){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},e=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(source).filter((function(t){return Object.getOwnPropertyDescriptor(source,t).enumerable})))),e.forEach((function(e){h(t,e,source[e])}))}return t}function f(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=[],n=!0,r=!1,o=void 0;try{for(var c,h=t[Symbol.iterator]();!(n=(c=h.next()).done)&&(e.push(c.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==h.return||h.return()}finally{if(r)throw o}}return e}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"b",(function(){return Ft})),n.d(e,"a",(function(){return x})),n.d(e,"e",(function(){return text})),n.d(e,"c",(function(){return Dt})),n.d(e,"d",(function(){return Mt}));var v=function(){},y={},m={},_={mark:v,measure:v};try{"undefined"!=typeof window&&(y=window),"undefined"!=typeof document&&(m=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&(_=performance)}catch(t){}var w=(y.navigator||{}).userAgent,E=void 0===w?"":w,I=y,T=m,O=_,S=(I.document,!!T.documentElement&&!!T.head&&"function"==typeof T.addEventListener&&"function"==typeof T.createElement),C=~E.indexOf("MSIE")||~E.indexOf("Trident/"),N=(function(){try{}catch(t){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),k=N.concat([11,12,13,14,15,16,17,18,19,20]),A={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},j=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",A.GROUP,A.SWAP_OPACITY,A.PRIMARY,A.SECONDARY].concat(N.map((function(t){return"".concat(t,"x")}))).concat(k.map((function(t){return"w-".concat(t)}))),I.FontAwesomeConfig||{});if(T&&"function"==typeof T.querySelector){[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(t){var e=f(t,2),n=e[0],r=e[1],o=function(t){return""===t||"false"!==t&&("true"===t||t)}(function(t){var element=T.querySelector("script["+t+"]");if(element)return element.getAttribute(t)}(n));null!=o&&(j[r]=o)}))}var P=l({},{familyPrefix:"fa",replacementClass:"svg-inline--fa",autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},j);P.autoReplaceSvg||(P.observeMutations=!1);var x=l({},P);I.FontAwesomeConfig=x;var R=I||{};R.___FONT_AWESOME___||(R.___FONT_AWESOME___={}),R.___FONT_AWESOME___.styles||(R.___FONT_AWESOME___.styles={}),R.___FONT_AWESOME___.hooks||(R.___FONT_AWESOME___.hooks={}),R.___FONT_AWESOME___.shims||(R.___FONT_AWESOME___.shims=[]);var D=R.___FONT_AWESOME___,L=[];S&&((T.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(T.readyState)||T.addEventListener("DOMContentLoaded",(function t(){T.removeEventListener("DOMContentLoaded",t),1,L.map((function(t){return t()}))})));var M,F=function(){},U=void 0!==t&&void 0!==t.process&&"function"==typeof t.process.emit,V=void 0===r?setTimeout:r,B=[];function H(){for(var i=0;i<B.length;i++)B[i][0](B[i][1]);B=[],M=!1}function K(t,e){B.push([t,e]),M||(M=!0,V(H,0))}function z(t){var e=t.owner,n=e._state,r=e._data,o=t[n],c=t.then;if("function"==typeof o){n="fulfilled";try{r=o(r)}catch(t){Y(c,t)}}W(c,r)||("fulfilled"===n&&G(c,r),"rejected"===n&&Y(c,r))}function W(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===o(e))){var r=e.then;if("function"==typeof r)return r.call(e,(function(r){n||(n=!0,e===r?Q(t,r):G(t,r))}),(function(e){n||(n=!0,Y(t,e))})),!0}}catch(e){return n||Y(t,e),!0}return!1}function G(t,e){t!==e&&W(t,e)||Q(t,e)}function Q(t,e){"pending"===t._state&&(t._state="settled",t._data=e,K(X,t))}function Y(t,e){"pending"===t._state&&(t._state="settled",t._data=e,K($,t))}function J(t){t._then=t._then.forEach(z)}function X(t){t._state="fulfilled",J(t)}function $(e){e._state="rejected",J(e),!e._handled&&U&&t.process.emit("unhandledRejection",e._data,e)}function Z(e){t.process.emit("rejectionHandled",e)}function tt(t){if("function"!=typeof t)throw new TypeError("Promise resolver "+t+" is not a function");if(this instanceof tt==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(t,e){function n(t){Y(e,t)}try{t((function(t){G(e,t)}),n)}catch(t){n(t)}}(t,this)}tt.prototype={constructor:tt,_state:"pending",_then:null,_data:void 0,_handled:!1,then:function(t,e){var n={owner:this,then:new this.constructor(F),fulfilled:t,rejected:e};return!e&&!t||this._handled||(this._handled=!0,"rejected"===this._state&&U&&K(Z,this)),"fulfilled"===this._state||"rejected"===this._state?K(z,n):this._then.push(n),n.then},catch:function(t){return this.then(null,t)}},tt.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new tt((function(e,n){var r=[],o=0;function c(t){return o++,function(n){r[t]=n,--o||e(r)}}for(var h,i=0;i<t.length;i++)(h=t[i])&&"function"==typeof h.then?h.then(c(i),n):r[i]=h;o||e(r)}))},tt.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new tt((function(e,n){for(var r,i=0;i<t.length;i++)(r=t[i])&&"function"==typeof r.then?r.then(e,n):e(r)}))},tt.resolve=function(t){return t&&"object"===o(t)&&t.constructor===tt?t:new tt((function(e){e(t)}))},tt.reject=function(t){return new tt((function(e,n){n(t)}))};var et=16,nt={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function it(t){if(t&&S){var style=T.createElement("style");style.setAttribute("type","text/css"),style.innerHTML=t;for(var e=T.head.childNodes,n=null,i=e.length-1;i>-1;i--){var r=e[i],o=(r.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(n=r)}return T.head.insertBefore(style,n),t}}function ot(){for(var t=12,e="";t-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function st(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function at(t){return Object.keys(t||{}).reduce((function(e,n){return e+"".concat(n,": ").concat(t[n],";")}),"")}function ut(t){return t.size!==nt.size||t.x!==nt.x||t.y!==nt.y||t.rotate!==nt.rotate||t.flipX||t.flipY}function ct(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,o={transform:"translate(".concat(n/2," 256)")},c="translate(".concat(32*e.x,", ").concat(32*e.y,") "),h="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),l="rotate(".concat(e.rotate," 0 0)");return{outer:o,inner:{transform:"".concat(c," ").concat(h," ").concat(l)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var ht={x:0,y:0,width:"100%",height:"100%"};function lt(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function ft(t){var e=t.icons,main=e.main,mask=e.mask,n=t.prefix,r=t.iconName,o=t.transform,symbol=t.symbol,title=t.title,c=t.maskId,h=t.titleId,f=t.extra,d=t.watchable,v=void 0!==d&&d,y=mask.found?mask:main,m=y.width,_=y.height,w="fak"===n,E=w?"":"fa-w-".concat(Math.ceil(m/_*16)),I=[x.replacementClass,r?"".concat(x.familyPrefix,"-").concat(r):"",E].filter((function(t){return-1===f.classes.indexOf(t)})).filter((function(t){return""!==t||!!t})).concat(f.classes).join(" "),content={children:[],attributes:l({},f.attributes,{"data-prefix":n,"data-icon":r,class:I,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(_)})},T=w&&!~f.classes.indexOf("fa-fw")?{width:"".concat(m/_*16*.0625,"em")}:{};v&&(content.attributes["data-fa-i2svg"]=""),title&&content.children.push({tag:"title",attributes:{id:content.attributes["aria-labelledby"]||"title-".concat(h||ot())},children:[title]});var O=l({},content,{prefix:n,iconName:r,main:main,mask:mask,maskId:c,transform:o,symbol:symbol,styles:l({},T,f.styles)}),S=mask.found&&main.found?function(t){var e,n=t.children,r=t.attributes,main=t.main,mask=t.mask,o=t.maskId,c=t.transform,h=main.width,f=main.icon,d=mask.width,v=mask.icon,y=ct({transform:c,containerWidth:d,iconWidth:h}),m={tag:"rect",attributes:l({},ht,{fill:"white"})},_=f.children?{children:f.children.map(lt)}:{},w={tag:"g",attributes:l({},y.inner),children:[lt(l({tag:f.tag,attributes:l({},f.attributes,y.path)},_))]},E={tag:"g",attributes:l({},y.outer),children:[w]},I="mask-".concat(o||ot()),T="clip-".concat(o||ot()),O={tag:"mask",attributes:l({},ht,{id:I,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[m,E]},defs={tag:"defs",children:[{tag:"clipPath",attributes:{id:T},children:(e=v,"g"===e.tag?e.children:[e])},O]};return n.push(defs,{tag:"rect",attributes:l({fill:"currentColor","clip-path":"url(#".concat(T,")"),mask:"url(#".concat(I,")")},ht)}),{children:n,attributes:r}}(O):function(t){var e=t.children,n=t.attributes,main=t.main,r=t.transform,o=at(t.styles);if(o.length>0&&(n.style=o),ut(r)){var c=ct({transform:r,containerWidth:main.width,iconWidth:main.width});e.push({tag:"g",attributes:l({},c.outer),children:[{tag:"g",attributes:l({},c.inner),children:[{tag:main.icon.tag,children:main.icon.children,attributes:l({},main.icon.attributes,c.path)}]}]})}else e.push(main.icon);return{children:e,attributes:n}}(O),C=S.children,N=S.attributes;return O.children=C,O.attributes=N,symbol?function(t){var e=t.prefix,n=t.iconName,r=t.children,o=t.attributes,symbol=t.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:l({},o,{id:!0===symbol?"".concat(e,"-").concat(x.familyPrefix,"-").concat(n):symbol}),children:r}]}]}(O):function(t){var e=t.children,main=t.main,mask=t.mask,n=t.attributes,r=t.styles,o=t.transform;if(ut(o)&&main.found&&!mask.found){var c={x:main.width/main.height/2,y:.5};n.style=at(l({},r,{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:n,children:e}]}(O)}function pt(t){var content=t.content,e=t.width,n=t.height,r=t.transform,title=t.title,o=t.extra,c=t.watchable,h=void 0!==c&&c,f=l({},o.attributes,title?{title:title}:{},{class:o.classes.join(" ")});h&&(f["data-fa-i2svg"]="");var d=l({},o.styles);ut(r)&&(d.transform=function(t){var e=t.transform,n=t.width,r=void 0===n?16:n,o=t.height,c=void 0===o?16:o,h=t.startCentered,l=void 0!==h&&h,f="";return f+=l&&C?"translate(".concat(e.x/et-r/2,"em, ").concat(e.y/et-c/2,"em) "):l?"translate(calc(-50% + ".concat(e.x/et,"em), calc(-50% + ").concat(e.y/et,"em)) "):"translate(".concat(e.x/et,"em, ").concat(e.y/et,"em) "),f+="scale(".concat(e.size/et*(e.flipX?-1:1),", ").concat(e.size/et*(e.flipY?-1:1),") "),f+="rotate(".concat(e.rotate,"deg) ")}({transform:r,startCentered:!0,width:e,height:n}),d["-webkit-transform"]=d.transform);var v=at(d);v.length>0&&(f.style=v);var y=[];return y.push({tag:"span",attributes:f,children:[content]}),title&&y.push({tag:"span",attributes:{class:"sr-only"},children:[title]}),y}var vt=function(){},gt=(x.measurePerformance&&O&&O.mark&&O.measure,function(t,e,n,r){var i,o,c,h=Object.keys(t),l=h.length,f=void 0!==r?function(t,e){return function(a,b,n,r){return t.call(e,a,b,n,r)}}(e,r):e;for(void 0===n?(i=1,c=t[h[0]]):(i=0,c=n);i<l;i++)c=f(c,t[o=h[i]],o,t);return c});function yt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,o=void 0!==r&&r,c=Object.keys(e).reduce((function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{});"function"!=typeof D.hooks.addPack||o?D.styles[t]=l({},D.styles[t]||{},c):D.hooks.addPack(t,c),"fas"===t&&yt("fa",e)}var mt=D.styles,bt=D.shims,_t=function(){var t=function(t){return gt(mt,(function(e,style,n){return e[n]=gt(style,t,{}),e}),{})};t((function(t,e,n){return e[3]&&(t[e[3]]=n),t})),t((function(t,e,n){var r=e[2];return t[n]=n,r.forEach((function(e){t[e]=n})),t}));var e="far"in mt;gt(bt,(function(t,n){var r=n[0],o=n[1],c=n[2];return"far"!==o||e||(o="fas"),t[r]={prefix:o,iconName:c},t}),{})};_t();D.styles;function wt(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}function Et(t){var e=t.tag,n=t.attributes,r=void 0===n?{}:n,o=t.children,c=void 0===o?[]:o;return"string"==typeof t?st(t):"<".concat(e," ").concat(function(t){return Object.keys(t||{}).reduce((function(e,n){return e+"".concat(n,'="').concat(st(t[n]),'" ')}),"").trim()}(r),">").concat(c.map(Et).join(""),"</").concat(e,">")}var It=function(t){var e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t?t.toLowerCase().split(" ").reduce((function(t,e){var n=e.toLowerCase().split("-"),r=n[0],o=n.slice(1).join("-");if(r&&"h"===o)return t.flipX=!0,t;if(r&&"v"===o)return t.flipY=!0,t;if(o=parseFloat(o),isNaN(o))return t;switch(r){case"grow":t.size=t.size+o;break;case"shrink":t.size=t.size-o;break;case"left":t.x=t.x-o;break;case"right":t.x=t.x+o;break;case"up":t.y=t.y-o;break;case"down":t.y=t.y+o;break;case"rotate":t.rotate=t.rotate+o}return t}),e):e};function Tt(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=(new Error).stack}Tt.prototype=Object.create(Error.prototype),Tt.prototype.constructor=Tt;var Ot={fill:"currentColor"},St={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},Ct={tag:"path",attributes:l({},Ot,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},Nt=l({},St,{attributeName:"opacity"});l({},Ot,{cx:"256",cy:"364",r:"28"}),l({},St,{attributeName:"r",values:"28;14;28;28;14;28;"}),l({},Nt,{values:"1;0;1;1;0;1;"}),l({},Ot,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),l({},Nt,{values:"1;0;0;0;0;1;"}),l({},Ot,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),l({},Nt,{values:"0;0;1;1;0;0;"}),D.styles;function kt(t){var e=t[0],n=t[1],r=f(t.slice(4),1)[0];return{found:!0,width:e,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(x.familyPrefix,"-").concat(A.GROUP)},children:[{tag:"path",attributes:{class:"".concat(x.familyPrefix,"-").concat(A.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(x.familyPrefix,"-").concat(A.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}D.styles;function At(){var t="svg-inline--fa",e=x.familyPrefix,n=x.replacementClass,s='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if("fa"!==e||n!==t){var r=new RegExp("\\.".concat("fa","\\-"),"g"),o=new RegExp("\\--".concat("fa","\\-"),"g"),c=new RegExp("\\.".concat(t),"g");s=s.replace(r,".".concat(e,"-")).replace(o,"--".concat(e,"-")).replace(c,".".concat(n))}return s}function jt(){x.autoAddCss&&!Lt&&(it(At()),Lt=!0)}function Pt(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map((function(a){return Et(a)}))}}),Object.defineProperty(t,"node",{get:function(){if(S){var e=T.createElement("div");return e.innerHTML=t.html,e.children}}}),t}function xt(t){var e=t.prefix,n=void 0===e?"fa":e,r=t.iconName;if(r)return wt(Dt.definitions,n,r)||wt(D.styles,n,r)}var Rt,Dt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.definitions={}}var e,n,r;return e=t,(n=[{key:"add",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n.reduce(this._pullDefinitions,{});Object.keys(o).forEach((function(e){t.definitions[e]=l({},t.definitions[e]||{},o[e]),yt(e,o[e]),_t()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,e){var n=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(n).map((function(e){var r=n[e],o=r.prefix,c=r.iconName,h=r.icon;t[o]||(t[o]={}),t[o][c]=h})),t}}])&&c(e.prototype,n),r&&c(e,r),t}()),Lt=!1,Mt={transform:function(t){return It(t)}},Ft=(Rt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.transform,r=void 0===n?nt:n,o=e.symbol,symbol=void 0!==o&&o,c=e.mask,mask=void 0===c?null:c,h=e.maskId,f=void 0===h?null:h,d=e.title,title=void 0===d?null:d,v=e.titleId,y=void 0===v?null:v,m=e.classes,_=void 0===m?[]:m,w=e.attributes,E=void 0===w?{}:w,I=e.styles,T=void 0===I?{}:I;if(t){var O=t.prefix,S=t.iconName,C=t.icon;return Pt(l({type:"icon"},t),(function(){return jt(),x.autoA11y&&(title?E["aria-labelledby"]="".concat(x.replacementClass,"-title-").concat(y||ot()):(E["aria-hidden"]="true",E.focusable="false")),ft({icons:{main:kt(C),mask:mask?kt(mask.icon):{found:!1,width:null,height:null,icon:{}}},prefix:O,iconName:S,transform:l({},nt,r),symbol:symbol,title:title,maskId:f,titleId:y,extra:{attributes:E,styles:T,classes:_}})}))}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t||{}).icon?t:xt(t||{}),mask=e.mask;return mask&&(mask=(mask||{}).icon?mask:xt(mask||{})),Rt(n,l({},e,{mask:mask}))}),text=function(content){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.transform,n=void 0===e?nt:e,r=t.title,title=void 0===r?null:r,o=t.classes,c=void 0===o?[]:o,h=t.attributes,f=void 0===h?{}:h,v=t.styles,y=void 0===v?{}:v;return Pt({type:"text",content:content},(function(){return jt(),pt({content:content,transform:l({},nt,n),title:title,extra:{attributes:f,styles:y,classes:["".concat(x.familyPrefix,"-layers-text")].concat(d(c))}})}))}}).call(this,n(18),n(147).setImmediate)},24:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return h})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return f})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return v})),n.d(e,"i",(function(){return y})),n.d(e,"j",(function(){return m}));var r={prefix:"fas",iconName:"images",icon:[576,512,[],"f302","M480 416v16c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V176c0-26.51 21.49-48 48-48h16v208c0 44.112 35.888 80 80 80h336zm96-80V80c0-26.51-21.49-48-48-48H144c-26.51 0-48 21.49-48 48v256c0 26.51 21.49 48 48 48h384c26.51 0 48-21.49 48-48zM256 128c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-96 144l55.515-55.515c4.686-4.686 12.284-4.686 16.971 0L272 256l135.515-135.515c4.686-4.686 12.284-4.686 16.971 0L512 208v112H160v-48z"]},o={prefix:"fas",iconName:"location-arrow",icon:[512,512,[],"f124","M444.52 3.52L28.74 195.42c-47.97 22.39-31.98 92.75 19.19 92.75h175.91v175.91c0 51.17 70.36 67.17 92.75 19.19l191.9-415.78c15.99-38.39-25.59-79.97-63.97-63.97z"]},c={prefix:"fas",iconName:"random",icon:[512,512,[],"f074","M504.971 359.029c9.373 9.373 9.373 24.569 0 33.941l-80 79.984c-15.01 15.01-40.971 4.49-40.971-16.971V416h-58.785a12.004 12.004 0 0 1-8.773-3.812l-70.556-75.596 53.333-57.143L352 336h32v-39.981c0-21.438 25.943-31.998 40.971-16.971l80 79.981zM12 176h84l52.781 56.551 53.333-57.143-70.556-75.596A11.999 11.999 0 0 0 122.785 96H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12zm372 0v39.984c0 21.46 25.961 31.98 40.971 16.971l80-79.984c9.373-9.373 9.373-24.569 0-33.941l-80-79.981C409.943 24.021 384 34.582 384 56.019V96h-58.785a12.004 12.004 0 0 0-8.773 3.812L96 336H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h110.785c3.326 0 6.503-1.381 8.773-3.812L352 176h32z"]},h={prefix:"fas",iconName:"search-dollar",icon:[512,512,[],"f688","M505.04 442.66l-99.71-99.69c-4.5-4.5-10.6-7-17-7h-16.3c27.6-35.3 44-79.69 44-127.99C416.03 93.09 322.92 0 208.02 0S0 93.09 0 207.98s93.11 207.98 208.02 207.98c48.3 0 92.71-16.4 128.01-44v16.3c0 6.4 2.5 12.5 7 17l99.71 99.69c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.59.1-33.99zm-297.02-90.7c-79.54 0-144-64.34-144-143.98 0-79.53 64.35-143.98 144-143.98 79.54 0 144 64.34 144 143.98 0 79.53-64.35 143.98-144 143.98zm27.11-152.54l-45.01-13.5c-5.16-1.55-8.77-6.78-8.77-12.73 0-7.27 5.3-13.19 11.8-13.19h28.11c4.56 0 8.96 1.29 12.82 3.72 3.24 2.03 7.36 1.91 10.13-.73l11.75-11.21c3.53-3.37 3.33-9.21-.57-12.14-9.1-6.83-20.08-10.77-31.37-11.35V112c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v16.12c-23.63.63-42.68 20.55-42.68 45.07 0 19.97 12.99 37.81 31.58 43.39l45.01 13.5c5.16 1.55 8.77 6.78 8.77 12.73 0 7.27-5.3 13.19-11.8 13.19h-28.1c-4.56 0-8.96-1.29-12.82-3.72-3.24-2.03-7.36-1.91-10.13.73l-11.75 11.21c-3.53 3.37-3.33 9.21.57 12.14 9.1 6.83 20.08 10.77 31.37 11.35V304c0 4.42 3.58 8 8 8h16c4.42 0 8-3.58 8-8v-16.12c23.63-.63 42.68-20.54 42.68-45.07 0-19.97-12.99-37.81-31.59-43.39z"]},l={prefix:"fas",iconName:"shopping-bag",icon:[448,512,[],"f290","M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"]},f={prefix:"fas",iconName:"store",icon:[616,512,[],"f54e","M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"]},d={prefix:"fas",iconName:"table",icon:[512,512,[],"f0ce","M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"]},v={prefix:"fas",iconName:"tags",icon:[640,512,[],"f02c","M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"]},y={prefix:"fas",iconName:"tshirt",icon:[640,512,[],"f553","M631.2 96.5L436.5 0C416.4 27.8 371.9 47.2 320 47.2S223.6 27.8 203.5 0L8.8 96.5c-7.9 4-11.1 13.6-7.2 21.5l57.2 114.5c4 7.9 13.6 11.1 21.5 7.2l56.6-27.7c10.6-5.2 23 2.5 23 14.4V480c0 17.7 14.3 32 32 32h256c17.7 0 32-14.3 32-32V226.3c0-11.8 12.4-19.6 23-14.4l56.6 27.7c7.9 4 17.5.8 21.5-7.2L638.3 118c4-7.9.8-17.6-7.1-21.5z"]},m={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"]}},32:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return r}))},33:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var o,p=new Promise((function(c,h){n(o=t[e].apply(t,r)).then(c,h)}));return p.request=o,p}function o(t,e,n){var p=r(t,e,n);return p.then((function(t){if(t)return new v(t,p.request)}))}function c(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function h(t,e,n,o){o.forEach((function(o){o in n.prototype&&(t.prototype[o]=function(){return r(this[e],o,arguments)})}))}function l(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function f(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return o(this[e],r,arguments)})}))}function d(t){this._index=t}function v(cursor,t){this._cursor=cursor,this._request=t}function y(t){this._store=t}function m(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function _(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new m(n)}function w(t){this._db=t}c(d,"_index",["name","keyPath","multiEntry","unique"]),h(d,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),f(d,"_index",IDBIndex,["openCursor","openKeyCursor"]),c(v,"_cursor",["direction","key","primaryKey","value"]),h(v,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(v.prototype[t]=function(){var cursor=this,e=arguments;return Promise.resolve().then((function(){return cursor._cursor[t].apply(cursor._cursor,e),n(cursor._request).then((function(t){if(t)return new v(t,cursor._request)}))}))})})),y.prototype.createIndex=function(){return new d(this._store.createIndex.apply(this._store,arguments))},y.prototype.index=function(){return new d(this._store.index.apply(this._store,arguments))},c(y,"_store",["name","keyPath","indexNames","autoIncrement"]),h(y,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),f(y,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),l(y,"_store",IDBObjectStore,["deleteIndex"]),m.prototype.objectStore=function(){return new y(this._tx.objectStore.apply(this._tx,arguments))},c(m,"_tx",["objectStoreNames","mode"]),l(m,"_tx",IDBTransaction,["abort"]),_.prototype.createObjectStore=function(){return new y(this._db.createObjectStore.apply(this._db,arguments))},c(_,"_db",["name","version","objectStoreNames"]),l(_,"_db",IDBDatabase,["deleteObjectStore","close"]),w.prototype.transaction=function(){return new m(this._db.transaction.apply(this._db,arguments))},c(w,"_db",["name","version","objectStoreNames"]),l(w,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[y,d].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],o=this._store||this._index,c=o[t].apply(o,n.slice(0,-1));c.onsuccess=function(){r(c.result)}})}))})),[d,y].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(o){n.iterateCursor(t,(function(cursor){cursor?(r.push(cursor.value),void 0===e||r.length!=e?cursor.continue():o(r)):o(r)}))}))})})),t.openDb=function(t,e,n){var p=r(indexedDB,"open",[t,e]),o=p.request;return o&&(o.onupgradeneeded=function(t){n&&n(new _(o.result,t.oldVersion,o.transaction))}),p.then((function(t){return new w(t)}))},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},42:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},43:function(t,e,n){"use strict";n.d(e,"a",(function(){return o.a}));var r,o=n(2),c=(n(208),n(209),n(5)),h=n(1),l=(n(14),n(8)),f=n(6),d={Firestore:l.d,GeoPoint:l.q,Timestamp:l.t,Blob:l.c,Transaction:l.p,WriteBatch:l.e,DocumentReference:l.a,DocumentSnapshot:l.g,Query:l.i,QueryDocumentSnapshot:l.f,QuerySnapshot:l.m,CollectionReference:l.j,FieldPath:l.o,FieldValue:l.s,setLogLevel:l.b,CACHE_SIZE_UNLIMITED:l.k};(function(t,e){t.INTERNAL.registerComponent(new f.a("firestore",(function(t){return function(t,i){return new l.d(t,new l.h(t,i),new l.r)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},d)))})(r=o.a),r.registerVersion("@firebase/firestore","2.1.2"),function(t){t.prototype.loadBundle=function(t){return Object(l.l)(this,t)},t.prototype.namedQuery=function(t){return Object(l.n)(this,t)}}(l.d);var v=n(0),y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},m=function(t){function e(code,n,details){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r.code=code,r.details=details,r}return Object(v.c)(e,t),e}(Error);var _=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return Object(v.b)(this,void 0,void 0,(function(){var t;return Object(v.d)(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return Object(v.b)(this,void 0,void 0,(function(){return Object(v.d)(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return Object(v.b)(this,void 0,void 0,(function(){var t,e;return Object(v.d)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function w(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var E=function(){function t(){}return t.prototype.encode=function(data){var t=this;if(null==data)return null;if(data instanceof Number&&(data=data.valueOf()),"number"==typeof data&&isFinite(data))return data;if(!0===data||!1===data)return data;if("[object String]"===Object.prototype.toString.call(data))return data;if(Array.isArray(data))return data.map((function(e){return t.encode(e)}));if("function"==typeof data||"object"==typeof data)return w(data,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+data)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?w(t,(function(t){return e.decode(t)})):t},t}();var I=function(){function t(t,e,n,r,o){var c=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=o,this.serializer=new E,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(c.deleteService())}},this.contextProvider=new _(e,n),this.cancelAllRequests=new Promise((function(t){c.deleteService=function(){return t()}}));try{var h=new URL(r);this.customDomain=h.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(data){return n.call(t,data,e||{})}},t.prototype.postJSON=function(t,body,e){return Object(v.b)(this,void 0,void 0,(function(){var n,r;return Object(v.d)(this,(function(o){switch(o.label){case 0:e["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(body),headers:e})];case 2:return n=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:r=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,n.json()];case 6:return r=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:n.status,json:r}]}}))}))},t.prototype.call=function(t,data,e){return Object(v.b)(this,void 0,void 0,(function(){var n,body,r,o,c,h,l,f,d,_,w;return Object(v.d)(this,(function(v){switch(v.label){case 0:return n=this._url(t),data=this.serializer.encode(data),body={data:data},r={},[4,this.contextProvider.getContext()];case 1:return(o=v.sent()).authToken&&(r.Authorization="Bearer "+o.authToken),o.instanceIdToken&&(r["Firebase-Instance-ID-Token"]=o.instanceIdToken),c=e.timeout||7e4,h=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new m("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(c),l=h.timer,f=h.promise,[4,Promise.race([T(l,this.postJSON(n,body,r)),f,T(l,this.cancelAllRequests)])];case 2:if(!(d=v.sent()))throw new m("cancelled","Firebase Functions instance was deleted.");if(_=function(t,e,n){var code=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),r=code,details=void 0;try{var o=e&&e.error;if(o){var c=o.status;if("string"==typeof c){if(!y[c])return new m("internal","internal");code=y[c],r=c}var h=o.message;"string"==typeof h&&(r=h),void 0!==(details=o.details)&&(details=n.decode(details))}}catch(t){}return"ok"===code?null:new m(code,r,details)}(d.status,d.json,this.serializer))throw _;if(!d.json)throw new m("internal","Response is not valid JSON object.");if(void 0===(w=d.json.data)&&(w=d.json.result),void 0===w)throw new m("internal","Response is missing data field.");return[2,{data:this.serializer.decode(w)}]}}))}))},t}();function T(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n;return Object(v.d)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}var O,S,C;O=o.a,S=fetch.bind(self),C={Functions:I},O.INTERNAL.registerComponent(new f.a("functions",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),o=t.getProvider("messaging");return new I(n,r,o,e,S)}),"PUBLIC").setServiceProps(C).setMultipleInstances(!0)),o.a.registerVersion("@firebase/functions","0.6.1");var N,k=n(33),A=((N={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',N["not-registered"]="Firebase Installation is not registered.",N["installation-not-found"]="Firebase Installation not found.",N["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',N["app-offline"]="Could not process request. Application offline.",N["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",N),j=new h.b("installations","Installations",A);function P(t){return t instanceof h.c&&t.code.includes("request-failed")}function x(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function R(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function D(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n,r;return Object(v.d)(this,(function(o){switch(o.label){case 0:return[4,e.json()];case 1:return n=o.sent(),r=n.error,[2,j.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function L(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function M(t,e){var n=e.refreshToken,r=L(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function F(t){return Object(v.b)(this,void 0,void 0,(function(){var e;return Object(v.d)(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function U(t,e){var n=e.fid;return Object(v.b)(this,void 0,void 0,(function(){var e,r,body,o,c,h;return Object(v.d)(this,(function(l){switch(l.label){case 0:return e=x(t),r=L(t),body={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.4.19"},o={method:"POST",headers:r,body:JSON.stringify(body)},[4,F((function(){return fetch(e,o)}))];case 1:return(c=l.sent()).ok?[4,c.json()]:[3,3];case 2:return h=l.sent(),[2,{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:R(h.authToken)}];case 3:return[4,D("Create Installation",c)];case 4:throw l.sent()}}))}))}function V(t){return new Promise((function(e){setTimeout(e,t)}))}var B=/^[cdef][\w-]{21}$/;function H(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(v.f)(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return B.test(e)?e:""}catch(t){return""}}function K(t){return t.appName+"!"+t.appId}var z=new Map;function W(t,e){var n=K(t);G(n,e),function(t,e){var n=Y();n&&n.postMessage({key:t,fid:e});J()}(n,e)}function G(t,e){var n,r,o=z.get(t);if(o)try{for(var c=Object(v.h)(o),h=c.next();!h.done;h=c.next()){(0,h.value)(e)}}catch(t){n={error:t}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}var Q=null;function Y(){return!Q&&"BroadcastChannel"in self&&((Q=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){G(t.data.key,t.data.fid)}),Q}function J(){0===z.size&&Q&&(Q.close(),Q=null)}var X,$="firebase-installations-store",Z=null;function tt(){return Z||(Z=Object(k.openDb)("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore($)}}))),Z}function et(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n,r,o,c,h;return Object(v.d)(this,(function(l){switch(l.label){case 0:return n=K(t),[4,tt()];case 1:return r=l.sent(),o=r.transaction($,"readwrite"),[4,(c=o.objectStore($)).get(n)];case 2:return h=l.sent(),[4,c.put(e,n)];case 3:return l.sent(),[4,o.complete];case 4:return l.sent(),h&&h.fid===e.fid||W(t,e.fid),[2,e]}}))}))}function nt(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n,r;return Object(v.d)(this,(function(o){switch(o.label){case 0:return e=K(t),[4,tt()];case 1:return n=o.sent(),[4,(r=n.transaction($,"readwrite")).objectStore($).delete(e)];case 2:return o.sent(),[4,r.complete];case 3:return o.sent(),[2]}}))}))}function it(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n,r,o,c,h,l;return Object(v.d)(this,(function(f){switch(f.label){case 0:return n=K(t),[4,tt()];case 1:return r=f.sent(),o=r.transaction($,"readwrite"),[4,(c=o.objectStore($)).get(n)];case 2:return h=f.sent(),void 0!==(l=e(h))?[3,4]:[4,c.delete(n)];case 3:return f.sent(),[3,6];case 4:return[4,c.put(l,n)];case 5:f.sent(),f.label=6;case 6:return[4,o.complete];case 7:return f.sent(),!l||h&&h.fid===l.fid||W(t,l.fid),[2,l]}}))}))}function ot(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n,r;return Object(v.d)(this,(function(o){switch(o.label){case 0:return[4,it(t,(function(n){var r=function(t){return ut(t||{fid:H(),registrationStatus:0})}(n),o=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){var n=Promise.reject(j.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},o=function(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n,r;return Object(v.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,7]),[4,U(t,e)];case 1:return n=o.sent(),[2,et(t,n)];case 2:return P(r=o.sent())&&409===r.customData.serverCode?[4,nt(t)]:[3,4];case 3:return o.sent(),[3,6];case 4:return[4,et(t,{fid:e.fid,registrationStatus:0})];case 5:o.sent(),o.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,r);return{installationEntry:r,registrationPromise:o}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:st(t)}:{installationEntry:e}}(t,r);return e=o.registrationPromise,o.installationEntry}))];case 1:return""!==(n=o.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=o.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function st(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n,r,o;return Object(v.d)(this,(function(c){switch(c.label){case 0:return[4,at(t)];case 1:e=c.sent(),c.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,V(100)];case 3:return c.sent(),[4,at(t)];case 4:return e=c.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,ot(t)];case 6:return n=c.sent(),r=n.installationEntry,(o=n.registrationPromise)?[2,o]:[2,r];case 7:return[2,e]}}))}))}function at(t){return it(t,(function(t){if(!t)throw j.create("installation-not-found");return ut(t)}))}function ut(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function ct(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(v.b)(this,void 0,void 0,(function(){var t,o,c,body,h,l,f;return Object(v.d)(this,(function(d){switch(d.label){case 0:return t=function(t,e){var n=e.fid;return x(t)+"/"+n+"/authTokens:generate"}(n,e),o=M(n,e),(c=r.getImmediate({optional:!0}))&&o.append("x-firebase-client",c.getPlatformInfoString()),body={installation:{sdkVersion:"w:0.4.19"}},h={method:"POST",headers:o,body:JSON.stringify(body)},[4,F((function(){return fetch(t,h)}))];case 1:return(l=d.sent()).ok?[4,l.json()]:[3,3];case 2:return f=d.sent(),[2,R(f)];case 3:return[4,D("Generate Auth Token",l)];case 4:throw d.sent()}}))}))}function ht(t,e){return void 0===e&&(e=!1),Object(v.b)(this,void 0,void 0,(function(){var n,r,o;return Object(v.d)(this,(function(c){switch(c.label){case 0:return[4,it(t.appConfig,(function(r){if(!ft(r))throw j.create("not-registered");var o=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}(o))return r;if(1===o.requestStatus)return n=function(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n,r;return Object(v.d)(this,(function(o){switch(o.label){case 0:return[4,lt(t.appConfig)];case 1:n=o.sent(),o.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,V(100)];case 3:return o.sent(),[4,lt(t.appConfig)];case 4:return n=o.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,ht(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw j.create("app-offline");var c=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(v.a)(Object(v.a)({},t),{authToken:e})}(r);return n=function(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n,r,o;return Object(v.d)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,,8]),[4,ct(t,e)];case 1:return n=c.sent(),o=Object(v.a)(Object(v.a)({},e),{authToken:n}),[4,et(t.appConfig,o)];case 2:return c.sent(),[2,n];case 3:return!P(r=c.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,nt(t.appConfig)];case 4:return c.sent(),[3,7];case 5:return o=Object(v.a)(Object(v.a)({},e),{authToken:{requestStatus:0}}),[4,et(t.appConfig,o)];case 6:c.sent(),c.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,c),c}))];case 1:return r=c.sent(),n?[4,n]:[3,3];case 2:return o=c.sent(),[3,4];case 3:o=r.authToken,c.label=4;case 4:return[2,o]}}))}))}function lt(t){return it(t,(function(t){if(!ft(t))throw j.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+1e4<Date.now()?Object(v.a)(Object(v.a)({},t),{authToken:{requestStatus:0}}):t}))}function ft(t){return void 0!==t&&2===t.registrationStatus}function pt(t){return Object(v.b)(this,void 0,void 0,(function(){var e;return Object(v.d)(this,(function(n){switch(n.label){case 0:return[4,ot(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function vt(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n,r,o,c;return Object(v.d)(this,(function(h){switch(h.label){case 0:return n=function(t,e){var n=e.fid;return x(t)+"/"+n}(t,e),r=M(t,e),o={method:"DELETE",headers:r},[4,F((function(){return fetch(n,o)}))];case 1:return(c=h.sent()).ok?[3,3]:[4,D("Delete Installation",c)];case 2:throw h.sent();case 3:return[2]}}))}))}function gt(t,e){var n=t.appConfig;return function(t,e){Y();var n=K(t),r=z.get(n);r||(r=new Set,z.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=K(t),r=z.get(n);r&&(r.delete(e),0===r.size&&z.delete(n),J())}(n,e)}}function yt(t){return j.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new f.a("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw yt("App Configuration");if(!t.name)throw yt("App Name");try{for(var r=Object(v.h)(["projectId","apiKey","appId"]),o=r.next();!o.done;o=r.next()){var c=o.value;if(!t.options[c])throw yt(c)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n,r;return Object(v.d)(this,(function(o){switch(o.label){case 0:return[4,ot(t.appConfig)];case 1:return e=o.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):ht(t).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(v.b)(this,void 0,void 0,(function(){return Object(v.d)(this,(function(n){switch(n.label){case 0:return[4,pt(t.appConfig)];case 1:return n.sent(),[4,ht(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n;return Object(v.d)(this,(function(r){switch(r.label){case 0:return[4,it(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw j.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw j.create("app-offline");case 3:return[4,vt(e,n)];case 4:return r.sent(),[4,nt(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return gt(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.19")}(o.a);var mt,bt=((X={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',X["only-available-in-window"]="This method is available in a Window context.",X["only-available-in-sw"]="This method is available in a service worker context.",X["permission-default"]="The notification permission was not granted and dismissed instead.",X["permission-blocked"]="The notification permission was not granted and blocked instead.",X["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",X["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",X["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",X["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",X["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",X["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",X["token-update-no-token"]="FCM returned no token when updating the user to push.",X["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",X["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",X["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",X["invalid-vapid-key"]="The public VAPID key must be a string.",X["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",X),_t=new h.b("messaging","Messaging",bt),wt="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";function Et(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(v.f)(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function It(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(mt||(mt={}));function Tt(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n,r=this;return Object(v.d)(this,(function(o){switch(o.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=o.sent(),!e.map((function(t){return t.name})).includes("fcm_token_details_db"))return[2,null];o.label=2;case 2:return n=null,[4,Object(k.openDb)("fcm_token_details_db",5,(function(e){return Object(v.b)(r,void 0,void 0,(function(){var r,o,c,h;return Object(v.d)(this,(function(l){switch(l.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains("fcm_token_object_Store")?[4,(r=e.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(t)]:[2];case 1:return o=l.sent(),[4,r.clear()];case 2:if(l.sent(),!o)return[2];if(2===e.oldVersion){if(!(c=o).auth||!c.p256dh||!c.endpoint)return[2];n={token:c.fcmToken,createTime:null!==(h=c.createTime)&&void 0!==h?h:Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:"string"==typeof c.vapidKey?c.vapidKey:Et(c.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(n={token:(c=o).fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Et(c.auth),p256dh:Et(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Et(c.vapidKey)}});return[2]}}))}))}))];case 3:return o.sent().close(),[4,Object(k.deleteDb)("fcm_token_details_db")];case 4:return o.sent(),[4,Object(k.deleteDb)("fcm_vapid_details_db")];case 5:return o.sent(),[4,Object(k.deleteDb)("undefined")];case 6:return o.sent(),[2,Ot(n)?n:null]}}))}))}function Ot(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var St=null;function Ct(){return St||(St=Object(k.openDb)("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore("firebase-messaging-store")}}))),St}function Nt(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n,r;return Object(v.d)(this,(function(o){switch(o.label){case 0:return e=jt(t),[4,Ct()];case 1:return[4,o.sent().transaction("firebase-messaging-store").objectStore("firebase-messaging-store").get(e)];case 2:return(n=o.sent())?[2,n]:[3,3];case 3:return[4,Tt(t.appConfig.senderId)];case 4:return(r=o.sent())?[4,kt(t,r)]:[3,6];case 5:return o.sent(),[2,r];case 6:return[2]}}))}))}function kt(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n,r,o;return Object(v.d)(this,(function(c){switch(c.label){case 0:return n=jt(t),[4,Ct()];case 1:return r=c.sent(),[4,(o=r.transaction("firebase-messaging-store","readwrite")).objectStore("firebase-messaging-store").put(e,n)];case 2:return c.sent(),[4,o.complete];case 3:return c.sent(),[2,e]}}))}))}function At(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n,r;return Object(v.d)(this,(function(o){switch(o.label){case 0:return e=jt(t),[4,Ct()];case 1:return n=o.sent(),[4,(r=n.transaction("firebase-messaging-store","readwrite")).objectStore("firebase-messaging-store").delete(e)];case 2:return o.sent(),[4,r.complete];case 3:return o.sent(),[2]}}))}))}function jt(t){return t.appConfig.appId}function Pt(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n,body,r,o,c,h;return Object(v.d)(this,(function(l){switch(l.label){case 0:return[4,Lt(t)];case 1:n=l.sent(),body=Mt(e),r={method:"POST",headers:n,body:JSON.stringify(body)},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(Dt(t.appConfig),r)];case 3:return[4,l.sent().json()];case 4:return o=l.sent(),[3,6];case 5:throw c=l.sent(),_t.create("token-subscribe-failed",{errorInfo:c});case 6:if(o.error)throw h=o.error.message,_t.create("token-subscribe-failed",{errorInfo:h});if(!o.token)throw _t.create("token-subscribe-no-token");return[2,o.token]}}))}))}function xt(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n,body,r,o,c,h;return Object(v.d)(this,(function(l){switch(l.label){case 0:return[4,Lt(t)];case 1:n=l.sent(),body=Mt(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(body)},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(Dt(t.appConfig)+"/"+e.token,r)];case 3:return[4,l.sent().json()];case 4:return o=l.sent(),[3,6];case 5:throw c=l.sent(),_t.create("token-update-failed",{errorInfo:c});case 6:if(o.error)throw h=o.error.message,_t.create("token-update-failed",{errorInfo:h});if(!o.token)throw _t.create("token-update-no-token");return[2,o.token]}}))}))}function Rt(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n,r,o,c,h;return Object(v.d)(this,(function(l){switch(l.label){case 0:return[4,Lt(t)];case 1:n=l.sent(),r={method:"DELETE",headers:n},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(Dt(t.appConfig)+"/"+e,r)];case 3:return[4,l.sent().json()];case 4:if((o=l.sent()).error)throw c=o.error.message,_t.create("token-unsubscribe-failed",{errorInfo:c});return[3,6];case 5:throw h=l.sent(),_t.create("token-unsubscribe-failed",{errorInfo:h});case 6:return[2]}}))}))}function Dt(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function Lt(t){var e=t.appConfig,n=t.installations;return Object(v.b)(this,void 0,void 0,(function(){var t;return Object(v.d)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function Mt(t){var e=t.p256dh,n=t.auth,r=t.endpoint,o=t.vapidKey,body={web:{endpoint:r,auth:n,p256dh:e}};return o!==wt&&(body.web.applicationPubKey=o),body}function Ft(t,e,n){return Object(v.b)(this,void 0,void 0,(function(){var r,o,c,h;return Object(v.d)(this,(function(l){switch(l.label){case 0:if("granted"!==Notification.permission)throw _t.create("permission-blocked");return[4,Bt(e,n)];case 1:return r=l.sent(),[4,Nt(t)];case 2:return o=l.sent(),c={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:Et(r.getKey("auth")),p256dh:Et(r.getKey("p256dh"))},o?[3,3]:[2,qt(t,c)];case 3:if(f=o.subscriptionOptions,v=(d=c).vapidKey===f.vapidKey,y=d.endpoint===f.endpoint,m=d.auth===f.auth,_=d.p256dh===f.p256dh,v&&y&&m&&_)return[3,8];l.label=4;case 4:return l.trys.push([4,6,,7]),[4,Rt(t,o.token)];case 5:return l.sent(),[3,7];case 6:return h=l.sent(),console.warn(h),[3,7];case 7:return[2,qt(t,c)];case 8:return Date.now()>=o.createTime+6048e5?[2,Vt({token:o.token,createTime:Date.now(),subscriptionOptions:c},t,e)]:[2,o.token];case 9:return[2]}var f,d,v,y,m,_}))}))}function Ut(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n,r;return Object(v.d)(this,(function(o){switch(o.label){case 0:return[4,Nt(t)];case 1:return(n=o.sent())?[4,Rt(t,n.token)]:[3,4];case 2:return o.sent(),[4,At(t)];case 3:o.sent(),o.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=o.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function Vt(t,e,n){return Object(v.b)(this,void 0,void 0,(function(){var r,o,c;return Object(v.d)(this,(function(h){switch(h.label){case 0:return h.trys.push([0,3,,5]),[4,xt(e,t)];case 1:return r=h.sent(),o=Object(v.a)(Object(v.a)({},t),{token:r,createTime:Date.now()}),[4,kt(e,o)];case 2:return h.sent(),[2,r];case 3:return c=h.sent(),[4,Ut(e,n)];case 4:throw h.sent(),c;case 5:return[2]}}))}))}function qt(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n,r;return Object(v.d)(this,(function(o){switch(o.label){case 0:return[4,Pt(t,e)];case 1:return n=o.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,kt(t,r)];case 2:return o.sent(),[2,r.token]}}))}))}function Bt(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n;return Object(v.d)(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:It(e)})]}}))}))}function Ht(data){return"object"==typeof data&&!!data&&"google.c.a.c_id"in data}function Kt(t){return new Promise((function(e){setTimeout(e,t)}))}var zt=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw _t.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(v.b)(this,void 0,void 0,(function(){var n;return Object(v.d)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Nt(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:wt,r.label=2;case 2:return[2,Ft(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return Ut(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw _t.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw _t.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw _t.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw _t.create("only-available-in-window")},t.prototype.onMessage=function(){throw _t.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw _t.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n,r,o;return Object(v.d)(this,(function(c){switch(c.label){case 0:return(e=function(t){var data=t.data;if(!data)return null;try{return data.json()}catch(t){return null}}(t))?[4,Yt()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=c.sent())?[2,Qt(n,e)]:(r=!1,e.notification?[4,Jt(Wt(e))]:[3,3]);case 2:c.sent(),r=!0,c.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(o=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(!e.notification)return;t.notification={};var title=e.notification.title;title&&(t.notification.title=title);var body=e.notification.body;body&&(t.notification.body=body);var image=e.notification.image;image&&(t.notification.image=image)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){if(!e.fcmOptions)return;t.fcmOptions={};var link=e.fcmOptions.link;link&&(t.fcmOptions.link=link);var n=e.fcmOptions.analytics_label;n&&(t.fcmOptions.analyticsLabel=n)}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(o):this.bgMessageHandler.next(o)),[4,Kt(1e3)]);case 4:return c.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return Object(v.b)(this,void 0,void 0,(function(){var r;return Object(v.d)(this,(function(o){switch(o.label){case 0:return t.newSubscription?[3,2]:[4,Ut(this.firebaseDependencies,self.registration)];case 1:return o.sent(),[2];case 2:return[4,Nt(this.firebaseDependencies)];case 3:return r=o.sent(),[4,Ut(this.firebaseDependencies,self.registration)];case 4:return o.sent(),[4,Ft(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:wt)];case 5:return o.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return Object(v.b)(this,void 0,void 0,(function(){var r,link,o,c,h;return Object(v.d)(this,(function(l){switch(l.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(link=function(t){var e,n,r,link=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(link)return link;return Ht(t.data)?self.location.origin:null}(r))?(o=new URL(link,self.location.href),c=new URL(self.location.origin),o.host!==c.host?[2]:[4,Gt(o)]):[2]):[2];case 1:return(h=l.sent())?[3,4]:[4,self.clients.openWindow(link)];case 2:return h=l.sent(),[4,Kt(3e3)];case 3:return l.sent(),[3,6];case 4:return[4,h.focus()];case 5:h=l.sent(),l.label=6;case 6:return h?(r.messageType=mt.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,h.postMessage(r)]):[2]}}))}))},t}();function Wt(t){var e,n=Object(v.a)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function Gt(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n,r,o,c,h,l;return Object(v.d)(this,(function(f){switch(f.label){case 0:return[4,Yt()];case 1:e=f.sent();try{for(n=Object(v.h)(e),r=n.next();!r.done;r=n.next())if(o=r.value,c=new URL(o.url,self.location.href),t.host===c.host)return[2,o]}catch(t){h={error:t}}finally{try{r&&!r.done&&(l=n.return)&&l.call(n)}finally{if(h)throw h.error}}return[2,null]}}))}))}function Qt(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=mt.PUSH_RECEIVED;try{for(var o=Object(v.h)(t),c=o.next();!c.done;c=o.next()){c.value.postMessage(e)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function Yt(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Jt(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var Xt=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n;return Object(v.d)(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===mt.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),Ht(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(v.b)(this,void 0,void 0,(function(){return Object(v.d)(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw _t.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,Ft(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return Object(v.b)(this,void 0,void 0,(function(){return Object(v.d)(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=wt),[2]}))}))},t.prototype.updateSwReg=function(t){return Object(v.b)(this,void 0,void 0,(function(){return Object(v.d)(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw _t.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return Object(v.b)(this,void 0,void 0,(function(){var t,e;return Object(v.d)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),_t.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return Object(v.b)(this,void 0,void 0,(function(){return Object(v.d)(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Ut(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return Object(v.b)(this,void 0,void 0,(function(){var t;return Object(v.d)(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?_t.create("permission-blocked"):_t.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw _t.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw _t.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw _t.create("invalid-sw-registration");if(this.swRegistration)throw _t.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw _t.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw _t.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,data){return Object(v.b)(this,void 0,void 0,(function(){var e;return Object(v.d)(this,(function(n){switch(n.label){case 0:return e=function(t){switch(t){case mt.NOTIFICATION_CLICKED:return"notification_open";case mt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return n.sent().logEvent(e,{message_id:data["google.c.a.c_id"],message_name:data["google.c.a.c_l"],message_time:data["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function $t(t){return _t.create("missing-app-config-values",{valueName:t})}var Zt={isSupported:te};function te(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}o.a.INTERNAL.registerComponent(new f.a("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw $t("App Configuration Object");if(!t.name)throw $t("App Name");var r=t.options;try{for(var o=Object(v.h)(["projectId","apiKey","appId","messagingSenderId"]),c=o.next();!c.done;c=o.next()){var h=c.value;if(!r[h])throw $t(h)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!te())throw _t.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new zt(n):new Xt(n)}),"PUBLIC").setServiceProps(Zt));n(152);var ee,ne,re,ie=((ee={})["trace started"]="Trace {$traceName} was started before.",ee["trace stopped"]="Trace {$traceName} is not running.",ee["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",ee["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",ee["no window"]="Window is not available.",ee["no app id"]="App id is not available.",ee["no project id"]="Project id is not available.",ee["no api key"]="Api key is not available.",ee["invalid cc log"]="Attempted to queue invalid cc event",ee["FB not default"]="Performance can only start when Firebase app instance is the default one.",ee["RC response not ok"]="RC response is not ok",ee["invalid attribute name"]="Attribute name {$attributeName} is invalid.",ee["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",ee["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",ee["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",ee),oe=new h.b("performance","Performance",ie),se=new c.b("Performance");se.logLevel=c.a.INFO;var ae,ue=function(){function t(t){if(this.window=t,!t)throw oe.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(h.w)()||(se.info("IndexedDB is not supported by current browswer"),!1):(se.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var o=r[n];e(o)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===ne&&(ne=new t(re)),ne},t}();function ce(t,e){var n=t.length-e.length;if(n<0||n>1)throw oe.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var he,le,fe=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=ce("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=ce("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw oe.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw oe.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw oe.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===ae&&(ae=new t),ae},t}();function pe(){return he}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(le||(le={}));var de=["firebase_","google_","ga_"],ve=new RegExp("^[a-zA-Z]\\w*$");function ge(){var t=ue.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function ye(){switch(ue.getInstance().document.visibilityState){case"visible":return le.VISIBLE;case"hidden":return le.HIDDEN;default:return le.UNKNOWN}}function me(){var t=ue.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var be=!0;function _e(t){var e=function(){var t=ue.getInstance().localStorage;if(!t)return;var e=t.getItem("@firebase/performance/configexpire");if(!(e&&(n=e,Number(n)>Date.now())))return;var n;var r=t.getItem("@firebase/performance/config");if(!r)return;try{return JSON.parse(r)}catch(t){return}}();return e?(we(e),Promise.resolve()):function(t){return(e=fe.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+fe.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+fe.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:fe.getInstance().getAppId(),app_version:"0.4.5",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw oe.create("RC response not ok")}))})).catch((function(){se.info("Could not fetch config, will use default configs")}));var e}(t).then(we).then((function(t){return function(t){var e=ue.getInstance().localStorage;if(!t||!e)return;e.setItem("@firebase/performance/config",JSON.stringify(t)),e.setItem("@firebase/performance/configexpire",String(Date.now()+60*fe.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}function we(t){if(!t)return t;var e=fe.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=be,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=Ee(e.tracesSamplingRate),e.logNetworkAfterSampling=Ee(e.networkRequestsSamplingRate),t}function Ee(t){return Math.random()<=t}var Ie,Te=1;function Oe(){return Te=2,Ie=Ie||function(){var t=ue.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=fe.getInstance().installationsService.getId()).then((function(t){he=t})),t;var t})).then((function(t){return _e(t)})).then((function(){return Se()}),(function(){return Se()}))}function Se(){Te=3}var Ce,Ne=3,ke=[],Ae=!1;function je(t){setTimeout((function(){var t,e;if(0!==Ne)return ke.length?(t=ke.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(data,t){return function(data){var t=fe.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(data)})}(data).then((function(t){return t.ok||se.info("Call to Firebase backend failed."),t.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var o=e.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(ke=Object(v.g)(t,ke),se.info("Retry transport request later.")),Ne=3,je(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:fe.getInstance().logSource,log_event:e},t).catch((function(){ke=Object(v.g)(t,ke),Ne--,se.info("Tries left: "+Ne+"."),je(1e4)}))):je(1e4)}),t)}function Pe(t){if(!t.eventTime||!t.message)throw oe.create("invalid cc log");ke=Object(v.g)(ke,[t])}function xe(t,e){Ce||(Ce=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(void 0,e);Pe({message:r,eventTime:Date.now()})}}(Le)),Ce(t,e)}function Re(t){var e=fe.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&ue.getInstance().requiredApisAvailable()&&(t.isAuto&&ye()!==le.VISIBLE||(3===Te?De(t):Oe().then((function(){return De(t)}),(function(){return De(t)}))))}function De(t){if(pe()){var e=fe.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return xe(t,1)}),0)}}function Le(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},o={application_info:Me(),network_request_metric:r},JSON.stringify(o)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:Me(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,o}function Me(){return{google_app_id:fe.getInstance().getAppId(),app_instance_id:pe(),web_app_info:{sdk_version:"0.4.5",page_url:ue.getInstance().getUrl(),service_worker_status:ge(),visibility_state:ye(),effective_connection_type:me()},application_process_state:0}}var Fe=["_fp","_fcp","_fid"];var Ue=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=ue.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw oe.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw oe.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Re(this)},t.prototype.record=function(t,e,n){if(t<=0)throw oe.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw oe.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(v.a)({},n.attributes)),n&&n.metrics)for(var r=0,o=Object.keys(n.metrics);r<o.length;r++){var c=o[r];isNaN(Number(n.metrics[c]))||(this.counters[c]=Number(Math.floor(n.metrics[c])))}Re(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith("_wt_")&&Fe.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw oe.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(n=e,(r=Math.floor(n))<n&&se.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40)&&(!de.some((function(e){return t.startsWith(e)}))&&!!t.match(ve))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw oe.create("invalid attribute name",{attributeName:t});if(!r)throw oe.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(v.a)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var o=ue.getInstance().getUrl();if(o){var c=new t("_wt_"+o,!0),h=Math.floor(1e3*ue.getInstance().getTimeOrigin());c.setStartTime(h),e&&e[0]&&(c.setDuration(Math.floor(1e3*e[0].duration)),c.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),c.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),c.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var l=n.find((function(t){return"first-paint"===t.name}));l&&l.startTime&&c.putMetric("_fp",Math.floor(1e3*l.startTime));var f=n.find((function(t){return"first-contentful-paint"===t.name}));f&&f.startTime&&c.putMetric("_fcp",Math.floor(1e3*f.startTime)),r&&c.putMetric("_fid",Math.floor(1e3*r))}Re(c)}},t.createUserTimingTrace=function(e){Re(new t(e,!1,e))},t}();function Ve(t){var e=t;if(e&&void 0!==e.responseStart){var n=ue.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),o=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,c=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=fe.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],o=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==o&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return xe(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:o,timeToResponseCompletedUs:c})}}function qe(){pe()&&(setTimeout((function(){return function(){var t=ue.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){Ue.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),Ue.createOobTrace(e,n,t))}))}else Ue.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=ue.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){Ve(r[n])}t.setupObserver("resource",Ve)}()}),0),setTimeout((function(){return function(){for(var t=ue.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){Be(r[n])}t.setupObserver("measure",Be)}()}),0))}function Be(t){var e=t.name;"FB-PERF-TRACE-MEASURE"!==e.substring(0,"FB-PERF-TRACE-MEASURE".length)&&Ue.createUserTimingTrace(e)}var He=function(){function t(t){this.app=t,ue.getInstance().requiredApisAvailable()&&Object(h.N)().then((function(t){t&&(Ae||(je(5500),Ae=!0),Oe().then(qe,qe))})).catch((function(t){se.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new Ue(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return fe.getInstance().instrumentationEnabled},set:function(t){fe.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return fe.getInstance().dataCollectionEnabled},set:function(t){fe.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw oe.create("FB not default");if("undefined"==typeof window)throw oe.create("no window");return function(t){re=t}(window),fe.getInstance().firebaseAppInstance=t,fe.getInstance().installationsService=e,new He(t)};t.INTERNAL.registerComponent(new f.a("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance","0.4.5")}(o.a);var Ke,ze,We="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(Ke||(Ke={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(ze||(ze={}));var Ge,Qe=new c.b("@firebase/analytics");function Ye(t,e,n,r,o,c){return Object(v.b)(this,void 0,void 0,(function(){var h,l,f,d;return Object(v.d)(this,(function(v){switch(v.label){case 0:h=r[o],v.label=1;case 1:return v.trys.push([1,7,,8]),h?[4,e[h]]:[3,3];case 2:return v.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return l=v.sent(),(f=l.find((function(t){return t.measurementId===o})))?[4,e[f.appId]]:[3,6];case 5:v.sent(),v.label=6;case 6:return[3,8];case 7:return d=v.sent(),Qe.error(d),[3,8];case 8:return t(Ke.CONFIG,o,c),[2]}}))}))}function Je(t,e,n,r,o){return Object(v.b)(this,void 0,void 0,(function(){var c,h,l,f,d,y,m,_;return Object(v.d)(this,(function(v){switch(v.label){case 0:return v.trys.push([0,4,,5]),c=[],o&&o.send_to?(h=o.send_to,Array.isArray(h)||(h=[h]),[4,Promise.all(n)]):[3,2];case 1:for(l=v.sent(),f=function(t){var n=l.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return c=[],"break";c.push(r)},d=0,y=h;d<y.length&&(m=y[d],"break"!==f(m));d++);v.label=2;case 2:return 0===c.length&&(c=Object.values(e)),[4,Promise.all(c)];case 3:return v.sent(),t(Ke.EVENT,r,o||{}),[3,5];case 4:return _=v.sent(),Qe.error(_),[3,5];case 5:return[2]}}))}))}function Xe(t,e,n,r,o){var c=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[o]&&"function"==typeof window[o]&&(c=window[o]),window[o]=function(t,e,n,r){return function(o,c,h){return Object(v.b)(this,void 0,void 0,(function(){var l;return Object(v.d)(this,(function(f){switch(f.label){case 0:return f.trys.push([0,6,,7]),o!==Ke.EVENT?[3,2]:[4,Je(t,e,n,c,h)];case 1:return f.sent(),[3,5];case 2:return o!==Ke.CONFIG?[3,4]:[4,Ye(t,e,n,r,c,h)];case 3:return f.sent(),[3,5];case 4:t(Ke.SET,c),f.label=5;case 5:return[3,7];case 6:return l=f.sent(),Qe.error(l),[3,7];case 7:return[2]}}))}))}}(c,t,e,n),{gtagCore:c,wrappedGtag:window[o]}}var $e=((Ge={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Ge["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Ge["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Ge["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Ge["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Ge["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Ge["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Ge["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Ge["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Ge),Ze=new h.b("analytics","Analytics",$e),tn=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function en(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function nn(t){var e;return Object(v.b)(this,void 0,void 0,(function(){var n,r,o,c,h,l,f;return Object(v.d)(this,(function(d){switch(d.label){case 0:return n=t.appId,r=t.apiKey,o={method:"GET",headers:en(r)},c="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(c,o)];case 1:if(200===(h=d.sent()).status||304===h.status)return[3,6];l="",d.label=2;case 2:return d.trys.push([2,4,,5]),[4,h.json()];case 3:return f=d.sent(),(null===(e=f.error)||void 0===e?void 0:e.message)&&(l=f.error.message),[3,5];case 4:return d.sent(),[3,5];case 5:throw Ze.create("config-fetch-failed",{httpStatus:h.status,responseMessage:l});case 6:return[2,h.json()]}}))}))}function rn(t,e,n,r){var o=e.throttleEndTimeMillis,c=e.backoffCount;return void 0===r&&(r=tn),Object(v.b)(this,void 0,void 0,(function(){var e,l,f,d,y,m,_;return Object(v.d)(this,(function(v){switch(v.label){case 0:e=t.appId,l=t.measurementId,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,on(n,o)];case 2:return v.sent(),[3,4];case 3:if(f=v.sent(),l)return Qe.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+l+' provided in the "measurementId" field in the local Firebase config. ['+f.message+"]"),[2,{appId:e,measurementId:l}];throw f;case 4:return v.trys.push([4,6,,7]),[4,nn(t)];case 5:return d=v.sent(),r.deleteThrottleMetadata(e),[2,d];case 6:if(!function(t){if(!(t instanceof h.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(y=v.sent())){if(r.deleteThrottleMetadata(e),l)return Qe.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+l+' provided in the "measurementId" field in the local Firebase config. ['+y.message+"]"),[2,{appId:e,measurementId:l}];throw y}return m=503===Number(y.customData.httpStatus)?Object(h.j)(c,r.intervalMillis,30):Object(h.j)(c,r.intervalMillis),_={throttleEndTimeMillis:Date.now()+m,backoffCount:c+1},r.setThrottleMetadata(e,_),Qe.debug("Calling attemptFetch again in "+m+" millis"),[2,rn(t,_,n,r)];case 7:return[2]}}))}))}function on(t,e){return new Promise((function(n,r){var o=Math.max(e-Date.now(),0),c=setTimeout(n,o);t.addEventListener((function(){clearTimeout(c),r(Ze.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var sn=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();function an(t,e,n,r,o){return Object(v.b)(this,void 0,void 0,(function(){var c,l,f,d,y,m,_;return Object(v.d)(this,(function(w){switch(w.label){case 0:return(c=function(t,e,n){return void 0===e&&(e=tn),Object(v.b)(this,void 0,void 0,(function(){var r,o,c,h,l,f,d=this;return Object(v.d)(this,(function(y){if(r=t.options,o=r.appId,c=r.apiKey,h=r.measurementId,!o)throw Ze.create("no-app-id");if(!c){if(h)return[2,{measurementId:h,appId:o}];throw Ze.create("no-api-key")}return l=e.getThrottleMetadata(o)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new sn,setTimeout((function(){return Object(v.b)(d,void 0,void 0,(function(){return Object(v.d)(this,(function(t){return f.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,rn({appId:o,apiKey:c,measurementId:h},l,f,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Qe.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return Qe.error(t)})),e.push(c),l=function(){return Object(v.b)(this,void 0,void 0,(function(){var t;return Object(v.d)(this,(function(e){switch(e.label){case 0:return Object(h.w)()?[3,1]:(Qe.warn(Ze.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(h.N)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),Qe.warn(Ze.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([c,l])];case 1:return f=w.sent(),d=f[0],y=f[1],o("js",new Date),(_={}).origin="firebase",_.update=!0,m=_,null!=y&&(m.firebase_id=y),o(Ke.CONFIG,d.measurementId,m),[2,d.measurementId]}}))}))}var un,cn,hn={},ln=[],fn={},pn="dataLayer",dn="gtag",vn=!1;function gn(t){if(vn)throw Ze.create("already-initialized");t.dataLayerName&&(pn=t.dataLayerName),t.gtagName&&(dn=t.gtagName)}function yn(t,e){!function(){var t=[];if(Object(h.s)()&&t.push("This is a browser extension environment."),Object(h.e)()||t.push("Cookies are not available."),t.length>0){var details=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),e=Ze.create("invalid-analytics-context",{errorInfo:details});Qe.warn(e.message)}}();var n=t.options.appId;if(!n)throw Ze.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Ze.create("no-api-key");Qe.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=hn[n])throw Ze.create("already-exists",{id:n});if(!vn){(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(We))return r}return null})()||function(t){var script=document.createElement("script");script.src=We+"?l="+t,script.async=!0,document.head.appendChild(script)}(pn),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(pn);var r=Xe(hn,ln,fn,pn,dn),o=r.wrappedGtag,c=r.gtagCore;cn=o,un=c,vn=!0}return hn[n]=an(t,ln,fn,e,un),{app:t,logEvent:function(t,e,r){(function(t,e,n,r,o){return Object(v.b)(this,void 0,void 0,(function(){var c,h;return Object(v.d)(this,(function(l){switch(l.label){case 0:return o&&o.global?(t(Ke.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:c=l.sent(),h=Object(v.a)(Object(v.a)({},r),{send_to:c}),t(Ke.EVENT,n,h),l.label=3;case 3:return[2]}}))}))})(cn,hn[n],t,e,r).catch((function(t){return Qe.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return Object(v.b)(this,void 0,void 0,(function(){var o;return Object(v.d)(this,(function(c){switch(c.label){case 0:return r&&r.global?(t(Ke.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:o=c.sent(),t(Ke.CONFIG,o,{update:!0,screen_name:n}),c.label=3;case 3:return[2]}}))}))})(cn,hn[n],t,e).catch((function(t){return Qe.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return Object(v.b)(this,void 0,void 0,(function(){var o;return Object(v.d)(this,(function(c){switch(c.label){case 0:return r&&r.global?(t(Ke.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:o=c.sent(),t(Ke.CONFIG,o,{update:!0,user_id:n}),c.label=3;case 3:return[2]}}))}))})(cn,hn[n],t,e).catch((function(t){return Qe.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return Object(v.b)(this,void 0,void 0,(function(){var o,c,h,l,f;return Object(v.d)(this,(function(d){switch(d.label){case 0:if(!r||!r.global)return[3,1];for(o={},c=0,h=Object.keys(n);c<h.length;c++)l=h[c],o["user_properties."+l]=n[l];return t(Ke.SET,o),[2,Promise.resolve()];case 1:return[4,e];case 2:f=d.sent(),t(Ke.CONFIG,f,{update:!0,user_properties:n}),d.label=3;case 3:return[2]}}))}))})(cn,hn[n],t,e).catch((function(t){return Qe.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n;return Object(v.d)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(hn[n],t).catch((function(t){return Qe.error(t)}))},INTERNAL:{delete:function(){return delete hn[n],Promise.resolve()}}}}function mn(){return Object(v.b)(this,void 0,void 0,(function(){return Object(v.d)(this,(function(t){switch(t.label){case 0:if(Object(h.s)())return[2,!1];if(!Object(h.e)())return[2,!1];if(!Object(h.w)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(h.N)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new f.a("analytics",(function(t){return yn(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:gn,EventName:ze,isSupported:mn})),t.INTERNAL.registerComponent(new f.a("analytics-internal",(function(t){try{return{logEvent:t.getProvider("analytics").getImmediate().logEvent}}catch(t){throw Ze.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.2")}(o.a);var bn,_n=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n,r,o,c;return Object(v.d)(this,(function(h){switch(h.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=h.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return o=h.sent(),c=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===o.status&&c.push(this.storage.setLastSuccessfulFetchResponse(o)),[4,Promise.all(c)];case 3:return h.sent(),[2,o]}}))}))},t}(),wn=((bn={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",bn["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",bn["registration-api-key"]="Undefined API key. Check Firebase app initialization.",bn["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",bn["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",bn["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",bn["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",bn["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",bn["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",bn["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',bn["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',bn["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",bn["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",bn),En=new h.b("remoteconfig","Remote Config",wn);var In=function(){function t(t,e,n,r,o,c){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=o,this.appId=c}return t.prototype.fetch=function(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n,r,o,c,h,l,f,d,y,m,_,w,E,I,T,O,S,C;return Object(v.d)(this,(function(v){switch(v.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=v.sent(),n=e[0],r=e[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",c=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,h={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},l={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===N&&(N=navigator),N.languages&&N.languages[0]||N.language)},f={method:"POST",headers:h,body:JSON.stringify(l)},d=fetch(c,f),y=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),v.label=2;case 2:return v.trys.push([2,5,,6]),[4,Promise.race([d,y])];case 3:return v.sent(),[4,d];case 4:return m=v.sent(),[3,6];case 5:throw _=v.sent(),w="fetch-client-network","AbortError"===_.name&&(w="fetch-timeout"),En.create(w,{originalErrorMessage:_.message});case 6:if(E=m.status,I=m.headers.get("ETag")||void 0,200!==m.status)return[3,11];S=void 0,v.label=7;case 7:return v.trys.push([7,9,,10]),[4,m.json()];case 8:return S=v.sent(),[3,10];case 9:throw C=v.sent(),En.create("fetch-client-parse",{originalErrorMessage:C.message});case 10:T=S.entries,O=S.state,v.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===O?E=500:"NO_CHANGE"===O?E=304:"NO_TEMPLATE"!==O&&"EMPTY_CONFIG"!==O||(T={}),304!==E&&200!==E)throw En.create("fetch-status",{httpStatus:E});return[2,{status:E,eTag:I,config:T}]}var N}))}))},t}(),Tn=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),On=["1","true","t","yes","y","on"],Sn=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&On.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),Cn=function(){function t(t,e,n,r,o){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=c.a.DEBUG;break;case"silent":this._logger.logLevel=c.a.SILENT;break;default:this._logger.logLevel=c.a.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(v.b)(this,void 0,void 0,(function(){var t,e,n;return Object(v.d)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return Object(v.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(v.d)(this,(function(o){switch(o.label){case 0:t=new Tn,setTimeout((function(){return Object(v.b)(r,void 0,void 0,(function(){return Object(v.d)(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return o.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return o.sent(),[3,6];case 4:return e=o.sent(),n=function(t,e){return t instanceof h.c&&-1!==t.code.indexOf(e)}(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw o.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return Object(v.b)(this,void 0,void 0,(function(){return Object(v.d)(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(Object(v.a)(Object(v.a)({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new Sn("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new Sn("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new Sn("static"))},t}();function Nn(t,e){var n=t.target.error||void 0;return En.create(e,{originalErrorMessage:n&&n.message})}var kn=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(Nn(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n=this;return Object(v.d)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,o){var c=e.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),h=n.createCompositeKey(t);try{var l=c.get(h);l.onerror=function(t){o(Nn(t,"storage-get"))},l.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(t){o(En.create("storage-get",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.set=function(t,e){return Object(v.b)(this,void 0,void 0,(function(){var n,r=this;return Object(v.d)(this,(function(o){switch(o.label){case 0:return[4,this.openDbPromise];case 1:return n=o.sent(),[2,new Promise((function(o,c){var h=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),l=r.createCompositeKey(t);try{var f=h.put({compositeKey:l,value:e});f.onerror=function(t){c(Nn(t,"storage-set"))},f.onsuccess=function(){o()}}catch(t){c(En.create("storage-set",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.delete=function(t){return Object(v.b)(this,void 0,void 0,(function(){var e,n=this;return Object(v.d)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,o){var c=e.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),h=n.createCompositeKey(t);try{var l=c.delete(h);l.onerror=function(t){o(Nn(t,"storage-delete"))},l.onsuccess=function(){r()}}catch(t){o(En.create("storage-delete",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),An=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(v.b)(this,void 0,void 0,(function(){var t,e,n,r,o,c;return Object(v.d)(this,(function(h){switch(h.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=h.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(o=h.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,n];case 3:return(c=h.sent())&&(this.activeConfig=c),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function jn(t,e){return new Promise((function(n,r){var o=Math.max(e-Date.now(),0),c=setTimeout(n,o);t.addEventListener((function(){clearTimeout(c),r(En.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var Pn,xn=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(v.b)(this,void 0,void 0,(function(){var e;return Object(v.d)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(v.b)(this,void 0,void 0,(function(){var e,o,c;return Object(v.d)(this,(function(l){switch(l.label){case 0:return[4,jn(t.signal,n)];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=l.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return l.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof h.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(o=l.sent()))throw o;return c={throttleEndTimeMillis:Date.now()+Object(h.j)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(c)];case 6:return l.sent(),[2,this.attemptFetch(t,c)];case 7:return[2]}}))}))},t}();(Pn=o.a).INTERNAL.registerComponent(new f.a("remoteConfig",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw En.create("registration-window");var o=n.options,h=o.projectId,l=o.apiKey,f=o.appId;if(!h)throw En.create("registration-project-id");if(!l)throw En.create("registration-api-key");if(!f)throw En.create("registration-app-id");e=e||"firebase";var d=new kn(f,n.name,e),v=new An(d),y=new c.b("@firebase/remote-config");y.logLevel=c.a.ERROR;var m=new In(r,Pn.SDK_VERSION,e,h,l,f),_=new xn(m,d),w=new _n(_,d,v,y),E=new Cn(n,w,v,d,y);return E.ensureInitialized(),E}),"PUBLIC").setMultipleInstances(!0)),Pn.registerVersion("@firebase/remote-config","0.1.30");o.a.registerVersion("firebase","8.2.2","app");console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),o.a.registerVersion("firebase","8.2.2")},44:function(t,e,n){"use strict";var r={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,c=r(),h=c.default;void 0===h&&(h=[]);var l=c.placeholder;return n._isMounted?h:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||l)?t(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||l):h.length>0?h.map((function(){return t(!1)})):t(!1))}};t.exports=r},5:function(t,e,n){"use strict";function r(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}var o;n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return _}));var c,h=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(c||(c={}));var l={debug:c.DEBUG,verbose:c.VERBOSE,info:c.INFO,warn:c.WARN,error:c.ERROR,silent:c.SILENT},f=c.INFO,d=((o={})[c.DEBUG]="log",o[c.VERBOSE]="log",o[c.INFO]="info",o[c.WARN]="warn",o[c.ERROR]="error",o),v=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(e<t.logLevel)){var c=(new Date).toISOString(),h=d[e];if(!h)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[h].apply(console,r(["["+c+"]  "+t.name+":"],n))}},y=function(){function t(t){this.name=t,this._logLevel=f,this._logHandler=v,this._userLogHandler=null,h.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in c))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?l[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.DEBUG],t)),this._logHandler.apply(this,r([this,c.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.VERBOSE],t)),this._logHandler.apply(this,r([this,c.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.INFO],t)),this._logHandler.apply(this,r([this,c.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.WARN],t)),this._logHandler.apply(this,r([this,c.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.ERROR],t)),this._logHandler.apply(this,r([this,c.ERROR],t))},t}();function m(t){h.forEach((function(e){e.setLogLevel(t)}))}function _(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=l[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var o=[],h=2;h<arguments.length;h++)o[h-2]=arguments[h];var l=o.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:c[n].toLowerCase(),message:l,args:o,type:e.name})}},r=0,o=h;r<o.length;r++){n(o[r])}}},6:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return h}));var r=n(0),o=n(1),c=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),h=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new o.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,o=e.optional,c=this.normalizeInstanceIdentifier(n);try{var h=this.getOrInitializeService(c);if(!h){if(o)return null;throw Error("Service "+this.name+" is not available")}return h}catch(t){if(o)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(component){var t,e;if(component.name!==this.name)throw Error("Mismatching Component "+component.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=component,function(component){return"EAGER"===component.instantiationMode}(component))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var n=Object(r.h)(this.instancesDeferred.entries()),o=n.next();!o.done;o=n.next()){var c=Object(r.e)(o.value,2),h=c[0],l=c[1],f=this.normalizeInstanceIdentifier(h);try{var d=this.getOrInitializeService(f);l.resolve(d)}catch(t){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var l=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(component){var t=this.getProvider(component.name);if(t.isComponentSet())throw new Error("Component "+component.name+" has already been registered with "+this.name);t.setComponent(component)},t.prototype.addOrOverwriteComponent=function(component){this.getProvider(component.name).isComponentSet()&&this.providers.delete(component.name),this.addComponent(component)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new h(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},74:function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var content=function(t,e){var content=t[1]||"",n=t[3];if(!n)return content;if(e&&"function"==typeof btoa){var r=(c=n,h=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(h),"/*# ".concat(data," */")),o=n.sources.map((function(source){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(source," */")}));return[content].concat(o).concat([r]).join("\n")}var c,h,data;return[content].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(content,"}"):content})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var h=0;h<t.length;h++){var l=[].concat(t[h]);r&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},75:function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],c=o[0],h={id:t+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[c]?r[c].parts.push(h):n.push(r[c]={id:c,parts:[h]})}return n}n.r(e),n.d(e,"default",(function(){return m}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c={},head=o&&(document.head||document.getElementsByTagName("head")[0]),h=null,l=0,f=!1,d=function(){},v=null,y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(t,e,n,o){f=n,v=o||{};var h=r(t,e);return _(h),function(e){for(var n=[],i=0;i<h.length;i++){var o=h[i];(l=c[o.id]).refs--,n.push(l)}e?_(h=r(t,e)):h=[];for(i=0;i<n.length;i++){var l;if(0===(l=n[i]).refs){for(var f=0;f<l.parts.length;f++)l.parts[f]();delete c[l.id]}}}}function _(t){for(var i=0;i<t.length;i++){var e=t[i],n=c[e.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](e.parts[r]);for(;r<e.parts.length;r++)n.parts.push(E(e.parts[r]));n.parts.length>e.parts.length&&(n.parts.length=e.parts.length)}else{var o=[];for(r=0;r<e.parts.length;r++)o.push(E(e.parts[r]));c[e.id]={id:e.id,refs:1,parts:o}}}}function w(){var t=document.createElement("style");return t.type="text/css",head.appendChild(t),t}function E(t){var e,n,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(f)return d;r.parentNode.removeChild(r)}if(y){var o=l++;r=h||(h=w()),e=O.bind(null,r,o,!1),n=O.bind(null,r,o,!0)}else r=w(),e=S.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var I,T=(I=[],function(t,e){return I[t]=e,I.filter(Boolean).join("\n")});function O(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=T(e,o);else{var c=document.createTextNode(o),h=t.childNodes;h[e]&&t.removeChild(h[e]),h.length?t.insertBefore(c,h[e]):t.appendChild(c)}}function S(t,e){var n=e.css,r=e.media,o=e.sourceMap;if(r&&t.setAttribute("media",r),v.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},8:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return _c})),n.d(e,"b",(function(){return yc})),n.d(e,"c",(function(){return R})),n.d(e,"d",(function(){return vc})),n.d(e,"e",(function(){return bc})),n.d(e,"f",(function(){return Oc})),n.d(e,"g",(function(){return Tc})),n.d(e,"h",(function(){return Au})),n.d(e,"i",(function(){return Sc})),n.d(e,"j",(function(){return kc})),n.d(e,"k",(function(){return ku})),n.d(e,"l",(function(){return Rc})),n.d(e,"m",(function(){return Nc})),n.d(e,"n",(function(){return Dc})),n.d(e,"o",(function(){return jc})),n.d(e,"p",(function(){return mc})),n.d(e,"q",(function(){return qa})),n.d(e,"r",(function(){return dc})),n.d(e,"s",(function(){return Pc})),n.d(e,"t",(function(){return z}));var r=n(5),o=n(1),c=n(14),h=n(0),l=new r.b("@firebase/firestore");function f(){return l.logLevel}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=r.a.DEBUG){var i=e.map(m);l.debug.apply(l,Object(h.g)(["Firestore (8.2.2): "+t],i))}}function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=r.a.ERROR){var i=e.map(m);l.error.apply(l,Object(h.g)(["Firestore (8.2.2): "+t],i))}}function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=r.a.WARN){var i=e.map(m);l.warn.apply(l,Object(h.g)(["Firestore (8.2.2): "+t],i))}}function m(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function _(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.2) INTERNAL ASSERTION FAILED: "+t;throw v(e),new Error(e)}function w(t,e){t||_()}function E(t,e){return t}function I(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var T=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=I(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function O(t,e){return t<e?-1:t>e?1:0}function S(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function C(t){return t+"\0"}var N=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return O(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();N.h=new N("");var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},A=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(h.c)(e,t),e}(Error),j=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(N.fromBase64String(e))}catch(e){throw new A(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(N.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),q=function(t){this._=t};function P(){if("undefined"==typeof Uint8Array)throw new A(k.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function x(){if("undefined"==typeof atob)throw new A(k.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.c)(e,t),e.fromBase64String=function(t){return x(),new e(j.fromBase64String(t))},e.fromUint8Array=function(t){return P(),new e(j.fromUint8Array(t))},e.prototype.toBase64=function(){return x(),this._.toBase64()},e.prototype.toUint8Array=function(){return P(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(q),D=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},L=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),M=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();M.UNAUTHENTICATED=new M(null),M.P=new M("google-credentials-uid"),M.g=new M("first-party-uid");var F=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},U=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t(M.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),V=function(){function t(t){var e=this;this.C=null,this.currentUser=M.UNAUTHENTICATED,this.N=!1,this.O=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.O++,e.currentUser=e.F(),e.N=!0,e.p&&e.p(e.currentUser)},this.O=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then((function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.O,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.O!==e?(d("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(w("string"==typeof n.accessToken),new F(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.F=function(){var t=this.auth&&this.auth.getUid();return w(null===t||"string"==typeof t),new M(t)},t}(),B=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=M.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),H=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new B(this.k,this.M))},t.prototype.S=function(t){t(M.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),K=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();K.U=-1;var z=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new A(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new A(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new A(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new A(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?O(this.nanoseconds,t.nanoseconds):O(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),W=function(){function t(t){this.timestamp=t}return t.j=function(e){return new t(e)},t.min=function(){return new t(new z(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),G=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&_(),void 0===n?n=t.length-e:n>t.length-e&&_(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return t=void 0===t?1:t,this.Y(this.segments,this.offset+t,this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.c)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.prototype.ot=function(){return this.rt().join("/")},e.prototype.toString=function(){return this.ot()},e.ct=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var u=o[i];if(u.indexOf("//")>=0)throw new A(k.INVALID_ARGUMENT,"Invalid segment ("+u+"). Paths must not contain // in them.");r.push.apply(r,u.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.at=function(){return new e([])},e}(G),Y=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.c)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.ut=function(t){return Y.test(t)},e.prototype.ot=function(){return this.rt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.ut(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.ot()},e.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},e.lt=function(){return new e(["__name__"])},e._t=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new A(k.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},u=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new A(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new A(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===s?(u=!u,i++):"."!==s||u?(r+=s,i++):(o(),i++)}if(o(),u)throw new A(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.at=function(){return new e([])},e}(G),J=function(){function t(t){this.path=t}return t.ft=function(e){return new t(Q.ct(e))},t.dt=function(e){return new t(Q.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Q.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return Q.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new Q(e.slice()))},t}();function X(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Z(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var tt=function(){function t(t){this.fields=t,t.sort(rt.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return S(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),et=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nt(t){if(w(!!t),"string"==typeof t){var e=0,n=et.exec(t);if(w(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ot(t){return"string"==typeof t?N.fromBase64String(t):N.fromUint8Array(t)}function st(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function at(t){var e=nt(t.mapValue.fields.__local_write_time__.timestampValue);return new z(e.seconds,e.nanos)}function ut(t){return null==t}function ct(t){return 0===t&&1/t==-1/0}function ht(t){return"number"==typeof t&&Number.isInteger(t)&&!ct(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function lt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?st(t)?4:10:_()}function ft(t,e){var n=lt(t);if(n!==lt(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return at(t).isEqual(at(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=nt(t.timestampValue),r=nt(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ot(t.bytesValue).isEqual(ot(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return it(t.geoPointValue.latitude)===it(e.geoPointValue.latitude)&&it(t.geoPointValue.longitude)===it(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return it(t.integerValue)===it(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=it(t.doubleValue),r=it(e.doubleValue);return n===r?ct(n)===ct(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return S(t.arrayValue.values||[],e.arrayValue.values||[],ft);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(X(n)!==X(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ft(n[i],r[i])))return!1;return!0}(t,e);default:return _()}}function pt(t,e){return void 0!==(t.values||[]).find((function(t){return ft(t,e)}))}function vt(t,e){var n=lt(t),r=lt(e);if(n!==r)return O(n,r);switch(n){case 0:return 0;case 1:return O(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=it(t.integerValue||t.doubleValue),r=it(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return gt(t.timestampValue,e.timestampValue);case 4:return gt(at(t),at(e));case 5:return O(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ot(t),r=ot(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=O(n[i],r[i]);if(0!==o)return o}return O(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=O(it(t.latitude),it(e.latitude));return 0!==n?n:O(it(t.longitude),it(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=vt(n[i],r[i]);if(o)return o}return O(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var u=0;u<r.length&&u<o.length;++u){var s=O(r[u],o[u]);if(0!==s)return s;var a=vt(n[r[u]],i[o[u]]);if(0!==a)return a}return O(r.length,o.length)}(t.mapValue,e.mapValue);default:throw _()}}function gt(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return O(t,e);var n=nt(t),r=nt(e),i=O(n.seconds,r.seconds);return 0!==i?i:O(n.nanos,r.nanos)}function yt(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=nt(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ot(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,J.dt(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,o=0,i=e.values||[];o<i.length;o++)r?r=!1:n+=",",n+=t(i[o]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,o=0,i=Object.keys(e.fields||{}).sort();o<i.length;o++){var c=i[o];r?r=!1:n+=",",n+=c+":"+t(e.fields[c])}return n+"}"}(e.mapValue):_();var n,r}(t)}function mt(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function bt(t){return!!t&&"integerValue"in t}function _t(t){return!!t&&"arrayValue"in t}function wt(t){return!!t&&"nullValue"in t}function Et(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function It(t){return!!t&&"mapValue"in t}var Tt=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!It(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return ft(this.proto,t.proto)},t}(),Ot=function(){function t(t){void 0===t&&(t=Tt.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===lt(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(rt.at(),this.Rt);return null!=t?new Tt(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=It(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var u=n.gt(t.child(i),e);null!=u&&(o[i]=u,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function St(t){var e=[];return $(t.fields||{},(function(t,n){var r=new rt([t]);if(It(n)){var i=St(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,u=i;o<u.length;o++){var s=u[o];e.push(r.child(s))}}else e.push(r)})),new tt(e)}var Ct=function(t,e){this.key=t,this.version=e},Nt=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(h.c)(e,t),e.prototype.field=function(t){return this.Vt.field(t)},e.prototype.data=function(){return this.Vt},e.prototype.vt=function(){return this.Vt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Ct),kt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(h.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ct),At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ct),jt=function(t,e,n,r,i,o,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=u,this.St=null};function Pt(t,e,n,r,i,o,u){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===u&&(u=null),new jt(t,e,n,r,i,o,u)}function xt(t){var e=E(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.ot()+t.op.toString()+yt(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.ot()+t.dir}(t)})).join(","),ut(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Wt(e.startAt)),e.endAt&&(n+="|ub:",n+=Wt(e.endAt)),e.St=n}return e.St}function Rt(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Qt(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ft(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Jt(t.startAt,e.startAt)&&Jt(t.endAt,e.endAt)}function Dt(t){return J.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Lt=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(h.c)(e,t),e.create=function(t,n,r){return t.ht()?"in"===n||"not-in"===n?this.Dt(t,n,r):new Mt(t,n,r):"array-contains"===n?new qt(t,r):"in"===n?new Bt(t,r):"not-in"===n?new Ht(t,r):"array-contains-any"===n?new Kt(t,r):new e(t,n,r)},e.Dt=function(t,e,n){return"in"===e?new Ft(t,n):new Ut(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(vt(e,this.value)):null!==e&&lt(this.value)===lt(e)&&this.Ct(vt(e,this.value))},e.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return _()}},e.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Mt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=J.dt(r.referenceValue),i}return Object(h.c)(e,t),e.prototype.matches=function(t){var e=J.J(t.key,this.key);return this.Ct(e)},e}(Lt),Ft=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Vt("in",n),r}return Object(h.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Lt),Ut=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Vt("not-in",n),r}return Object(h.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Lt);function Vt(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return J.dt(t.referenceValue)}))}var qt=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(h.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return _t(e)&&pt(e.arrayValue,this.value)},e}(Lt),Bt=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(h.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&pt(this.value.arrayValue,e)},e}(Lt),Ht=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(h.c)(e,t),e.prototype.matches=function(t){if(pt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!pt(this.value.arrayValue,e)},e}(Lt),Kt=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(h.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!_t(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return pt(e.value.arrayValue,t)}))},e}(Lt),zt=function(t,e){this.position=t,this.before=e};function Wt(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return yt(t)})).join(",")}var Gt=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Qt(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Yt(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],u=t.position[i];if(r=o.field.ht()?J.J(J.dt(u.referenceValue),n.key):vt(u,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Jt(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ft(t.position[n],e.position[n]))return!1;return!0}var Xt=function(t,e,n,r,i,o,u,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===u&&(u=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=s,this.Ot=null,this.Ft=null,this.startAt,this.endAt};function $t(t,e,n,r,i,o,u,s){return new Xt(t,e,n,r,i,o,u,s)}function Zt(t){return new Xt(t)}function te(t){return!ut(t.limit)&&"F"===t.limitType}function ee(t){return!ut(t.limit)&&"L"===t.limitType}function ne(t){return t.Nt.length>0?t.Nt[0].field:null}function re(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function ie(t){return null!==t.collectionGroup}function oe(t){var e=E(t);if(null===e.Ot){e.Ot=[];var n=re(e),r=ne(e);if(null!==n&&null===r)n.ht()||e.Ot.push(new Gt(n)),e.Ot.push(new Gt(rt.lt(),"asc"));else{for(var i=!1,o=0,u=e.Nt;o<u.length;o++){var s=u[o];e.Ot.push(s),s.field.ht()&&(i=!0)}if(!i){var a=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ot.push(new Gt(rt.lt(),a))}}}return e.Ot}function se(t){var e=E(t);if(!e.Ft)if("F"===e.limitType)e.Ft=Pt(e.path,e.collectionGroup,oe(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=oe(e);r<i.length;r++){var o=i[r],u="desc"===o.dir?"asc":"desc";n.push(new Gt(o.field,u))}var s=e.endAt?new zt(e.endAt.position,!e.endAt.before):null,a=e.startAt?new zt(e.startAt.position,!e.startAt.before):null;e.Ft=Pt(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.Ft}function ae(t,e,n){return new Xt(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ue(t,e){return Rt(se(t),se(e))&&t.limitType===e.limitType}function ce(t){return xt(se(t))+"|lt:"+t.limitType}function he(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.ot()+" "+e.op+" "+yt(e.value);var e})).join(", ")+"]"),ut(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Wt(t.startAt)),t.endAt&&(e+=", endAt: "+Wt(t.endAt)),"Target("+e+")"}(se(t))+"; limitType="+t.limitType+")"}function le(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):J.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Yt(t.startAt,oe(t),e)||t.endAt&&Yt(t.endAt,oe(t),e))}(t,e)}function fe(t){return function(e,n){for(var r=!1,i=0,o=oe(t);i<o.length;i++){var u=o[i],s=pe(u,e,n);if(0!==s)return s;r=r||u.field.ht()}return 0}}function pe(t,e,n){var r=t.field.ht()?J.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?vt(r,i):_()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _()}}var de=function(){function t(t,e,n,r,i,o,u){void 0===i&&(i=W.min()),void 0===o&&(o=W.min()),void 0===u&&(u=N.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();function ve(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ct(e)?"-0":e}}function ge(t){return{integerValue:""+t}}function ye(t,e){return ht(e)?ge(e):ve(t,e)}var me=function(){this.Ut=void 0};function be(t,e,n){return t instanceof Ee?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ie?Te(t,e):t instanceof Oe?Se(t,e):function(t,e){var n=we(t,e),r=Ne(n)+Ne(t.Qt);return bt(n)&&bt(t.Qt)?ge(r):ve(t.Kt,r)}(t,e)}function _e(t,e,n){return t instanceof Ie?Te(t,e):t instanceof Oe?Se(t,e):n}function we(t,e){return t instanceof Ce?bt(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ee=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.c)(e,t),e}(me),Ie=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(h.c)(e,t),e}(me);function Te(t,e){for(var n=ke(e),r=function(t){n.some((function(e){return ft(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Oe=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(h.c)(e,t),e}(me);function Se(t,e){for(var n=ke(e),r=function(t){n=n.filter((function(e){return!ft(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ce=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return Object(h.c)(e,t),e}(me);function Ne(t){return it(t.integerValue||t.doubleValue)}function ke(t){return _t(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ae=function(t,e){this.field=t,this.transform=e},je=function(t,e){this.version=t,this.transformResults=e},Pe=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.jt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function xe(t,e){return void 0!==t.updateTime?e instanceof Nt&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Nt}var Re=function(){};function De(t,e,n){return t instanceof Ve?function(t,e,n){var r=t.value;if(n.transformResults){var i=He(t.fieldTransforms,e,n.transformResults);r=ze(t.fieldTransforms,r,i)}return new Nt(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof qe?function(t,e,n){if(!xe(t.Gt,e))return new At(t.key,n.version);var r=Be(t,e,n.transformResults?He(t.fieldTransforms,e,n.transformResults):[]);return new Nt(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new kt(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Le(t,e,n,r){return t instanceof Ve?function(t,e,n,r){if(!xe(t.Gt,e))return e;var i=t.value,o=Ke(t.fieldTransforms,n,e);i=ze(t.fieldTransforms,i,o);var u=Ue(e);return new Nt(t.key,u,i,{bt:!0})}(t,e,r):t instanceof qe?function(t,e,n,r){if(!xe(t.Gt,e))return e;var i=Ue(e),o=Be(t,e,Ke(t.fieldTransforms,n,e));return new Nt(t.key,i,o,{bt:!0})}(t,e,r):function(t,e){return xe(t.Gt,e)?new kt(t.key,W.min()):e}(t,e)}function Me(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],u=e instanceof Nt?e.field(o.field):void 0,s=we(o.transform,u||null);null!=s&&(n=null==n?(new Ot).set(o.field,s):n.set(o.field,s))}return n?n.yt():null}(t.fieldTransforms,e)}function Fe(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&S(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ie&&e instanceof Ie||t instanceof Oe&&e instanceof Oe?S(t.elements,e.elements,ft):t instanceof Ce&&e instanceof Ce?ft(t.Qt,e.Qt):t instanceof Ee&&e instanceof Ee}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function Ue(t){return t instanceof Nt?t.version:W.min()}var Ve=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return Object(h.c)(e,t),e}(Re),qe=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var u=this;return(u=t.call(this)||this).key=e,u.data=n,u.zt=r,u.Gt=i,u.fieldTransforms=o,u.type=1,u}return Object(h.c)(e,t),e}(Re);function Be(t,e,n){var r;return r=function(t,e){var n=new Ot(e);return t.zt.fields.forEach((function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.yt()}(t,r=e instanceof Nt?e.data():Tt.empty()),ze(t.fieldTransforms,r,n)}function He(t,e,n){var r=[];w(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],u=o.transform,s=null;e instanceof Nt&&(s=e.field(o.field)),r.push(_e(u,s,n[i]))}return r}function Ke(t,e,n,r){for(var i=[],o=0,u=t;o<u.length;o++){var s=u[o],a=s.transform,c=null;n instanceof Nt&&(c=n.field(s.field)),i.push(be(a,c,e))}return i}function ze(t,e,n){for(var r=new Ot(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.yt()}var We,Ge,Qe=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return Object(h.c)(e,t),e}(Re),Ye=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return Object(h.c)(e,t),e}(Re),Je=function(t){this.count=t};function Xe(t){switch(t){case k.OK:return _();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return _()}}function $e(t){if(void 0===t)return v("GRPC error has no .code"),k.UNKNOWN;switch(t){case We.OK:return k.OK;case We.CANCELLED:return k.CANCELLED;case We.UNKNOWN:return k.UNKNOWN;case We.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case We.INTERNAL:return k.INTERNAL;case We.UNAVAILABLE:return k.UNAVAILABLE;case We.UNAUTHENTICATED:return k.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case We.NOT_FOUND:return k.NOT_FOUND;case We.ALREADY_EXISTS:return k.ALREADY_EXISTS;case We.PERMISSION_DENIED:return k.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case We.ABORTED:return k.ABORTED;case We.OUT_OF_RANGE:return k.OUT_OF_RANGE;case We.UNIMPLEMENTED:return k.UNIMPLEMENTED;case We.DATA_LOSS:return k.DATA_LOSS;default:return _()}}(Ge=We||(We={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";var Ze=function(){function t(t,e){this.J=t,this.root=e||en.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,en.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,en.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Zt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new tn(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new tn(this.root,t,this.J,!1)},t.prototype.se=function(){return new tn(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new tn(this.root,t,this.J,!0)},t}(),tn=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),en=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw _();if(this.right._e())throw _();var t=this.left.me();if(t!==this.right.me())throw _();return t+(this._e()?0:1)},t}();en.EMPTY=null,en.RED=!0,en.Jt=!1,en.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw _()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw _()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw _()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw _()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw _()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new en(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());var nn=function(){function t(t){this.J=t,this.data=new Ze(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt((function(e,n){return t(e),!1}))},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new rn(this.data.ee())},t.prototype.ne=function(t){return new rn(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),rn=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),on=new Ze(J.J);function sn(){return on}function an(){return sn()}var un=new Ze(J.J);function cn(){return un}var hn=new Ze(J.J);function ln(){return hn}var fn=new nn(J.J);function pn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=fn,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var dn=new nn(O);function vn(){return dn}var gn=function(){function t(t){this.J=t?function(e,n){return t(e,n)||J.J(e.key,n.key)}:function(t,e){return J.J(t.key,e.key)},this.Ve=cn(),this.pe=new Ze(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),yn=function(){function t(){this.ve=new Ze(J.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):_():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt((function(e,n){t.push(n)})),t},t}(),mn=function(){function t(t,e,n,r,i,o,u,s){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=u,this.Ne=s}return t.Oe=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,gn.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&ue(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),bn=function(){function t(t,e,n,r,i){this.Mt=t,this.Fe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,_n.Be(e,n)),new t(W.min(),r,vn(),sn(),pn())},t}(),_n=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(N.h,n,pn(),pn(),pn())},t}(),wn=function(t,e,n,r){this.je=t,this.removedTargetIds=e,this.key=n,this.We=r},En=function(t,e){this.targetId=t,this.Ge=e},In=function(t,e,n,r){void 0===n&&(n=N.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Tn=function(){function t(){this.ze=0,this.He=Cn(),this.Je=N.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=pn(),e=pn(),n=pn();return this.He.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:_()}})),new _n(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=Cn()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),On=function(){function t(t){this.hn=t,this.ln=new Map,this._n=sn(),this.fn=Sn(),this.dn=new nn(O)}return t.prototype.wn=function(t){for(var e=0,n=t.je;e<n.length;e++){var r=n[e];t.We instanceof Nt?this.En(r,t.We):t.We instanceof kt&&this.Tn(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Tn(r,t.key,t.We)},t.prototype.In=function(t){var e=this;this.mn(t,(function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:_()}}))},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach((function(t,r){n.Rn(r)&&e(r)}))},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(Dt(i))if(0===n){var o=new J(i.path);this.Tn(e,o,new kt(o,W.min()))}else w(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach((function(r,i){var o=e.gn(i);if(o){if(r.qe&&Dt(o.target)){var u=new J(o.target.path);null!==e._n.get(u)||e.bn(i,u)||e.Tn(i,u,new kt(u,t))}r.tn&&(n.set(i,r.nn()),r.sn())}}));var r=pn();this.fn.forEach((function(t,n){var i=!0;n.Re((function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new bn(t,n,this.dn,this._n,r);return this._n=sn(),this.fn=Sn(),this.dn=new nn(O),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new Tn,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new nn(O),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||d("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new Tn),this.hn.Sn(t).forEach((function(n){e.Tn(t,n,null)}))},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();function Sn(){return new Ze(J.J)}function Cn(){return new Ze(J.J)}var Nn={asc:"ASCENDING",desc:"DESCENDING"},kn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},An=function(t,e){this.T=t,this.qt=e};function jn(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pn(t,e){return t.qt?e.toBase64():e.toUint8Array()}function xn(t,e){return jn(t,e.G())}function Rn(t){return w(!!t),W.j(function(t){var e=nt(t);return new z(e.seconds,e.nanos)}(t))}function Dn(t,e){return function(t){return new Q(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function Ln(t){var e=Q.ct(t);return w(ir(e)),e}function Mn(t,e){return Dn(t.T,e.path)}function Fn(t,e){var n=Ln(e);if(n.get(1)!==t.T.projectId)throw new A(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new A(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new J(Bn(n))}function Un(t,e){return Dn(t.T,e)}function Vn(t){var e=Ln(t);return 4===e.length?Q.at():Bn(e)}function qn(t){return new Q(["projects",t.T.projectId,"databases",t.T.database]).ot()}function Bn(t){return w(t.length>4&&"documents"===t.get(4)),t.X(5)}function Hn(t,e,n){return{name:Mn(t,e),fields:n.proto.mapValue.fields}}function Kn(t,e,n){var r=Fn(t,e.name),i=Rn(e.updateTime),o=new Tt({mapValue:{fields:e.fields}});return new Nt(r,i,o,{hasCommittedMutations:!!n})}function zn(t,e){var n;if(e instanceof Ve)n={update:Hn(t,e.key,e.value)};else if(e instanceof Qe)n={delete:Mn(t,e.key)};else if(e instanceof qe)n={update:Hn(t,e.key,e.data),updateMask:rr(e.zt)};else{if(!(e instanceof Ye))return _();n={verify:Mn(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ee)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ie)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof Oe)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof Ce)return{fieldPath:e.field.ot(),increment:n.Qt};throw _()}(0,t)}))),e.Gt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:xn(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:_()}(t,e.Gt)),n}function tr(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Pe.updateTime(Rn(t.updateTime)):void 0!==t.exists?Pe.exists(t.exists):Pe.jt()}(e.currentDocument):Pe.jt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)w("REQUEST_TIME"===e.setToServerValue),n=new Ee;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Ie(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Oe(i)}else"increment"in e?n=new Ce(t,e.increment):_();var o=rt._t(e.fieldPath);return new Ae(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Fn(t,e.update.name),o=new Tt({mapValue:{fields:e.update.fields}});if(e.updateMask){var u=function(t){var e=t.fieldPaths||[];return new tt(e.map((function(t){return rt._t(t)})))}(e.updateMask);return new qe(i,o,u,n,r)}return new Ve(i,o,n,r)}if(e.delete){var s=Fn(t,e.delete);return new Qe(s,n)}if(e.verify){var a=Fn(t,e.verify);return new Ye(a,n)}return _()}function Wn(t,e){return{documents:[Un(t,e.path)]}}function Gn(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Un(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Un(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Et(t.value))return{unaryFilter:{field:Zn(t.field),op:"IS_NAN"}};if(wt(t.value))return{unaryFilter:{field:Zn(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Et(t.value))return{unaryFilter:{field:Zn(t.field),op:"IS_NOT_NAN"}};if(wt(t.value))return{unaryFilter:{field:Zn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zn(t.field),op:$n(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Zn(t.field),direction:Xn(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var u=function(t,e){return t.qt||ut(e)?e:{value:e}}(t,e.limit);return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=Yn(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Yn(e.endAt)),n}function Qn(t){var e=Vn(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){w(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var u=[];n.where&&(u=function t(e){return e?void 0!==e.unaryFilter?[nr(e)]:void 0!==e.fieldFilter?[hr(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):_():[]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Gt(er(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return ut(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Jn(n.startAt));var h=null;return n.endAt&&(h=Jn(n.endAt)),$t(e,i,s,u,a,"F",c,h)}function Yn(t){return{before:t.before,values:t.position}}function Jn(t){var e=!!t.before,n=t.values||[];return new zt(n,e)}function Xn(t){return Nn[t]}function $n(t){return kn[t]}function Zn(t){return{fieldPath:t.ot()}}function er(t){return rt._t(t.fieldPath)}function hr(t){return Lt.create(er(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return _()}}(t.fieldFilter.op),t.fieldFilter.value)}function nr(t){switch(t.unaryFilter.op){case"IS_NAN":var e=er(t.unaryFilter.field);return Lt.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=er(t.unaryFilter.field);return Lt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=er(t.unaryFilter.field);return Lt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=er(t.unaryFilter.field);return Lt.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return _()}}function rr(t){var e=[];return t.fields.forEach((function(t){return e.push(t.ot())})),{fieldPaths:e}}function ir(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var or=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},sr=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.On=!1,t((function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)}),(function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.On&&_(),this.On=!0,this.Nn?this.error?this.Fn(n,this.error):this.kn(e,this.result):new t((function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.Fn(n,e).next(t,i)}}))},t.prototype.Mn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.Fn=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),ar=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new or,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new br(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=vr(e.target.error);n.qn.reject(new br(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new br(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(d("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new fr(e)},t}(),ur=function(){function e(t,n,i){this.name=t,this.version=n,this.Qn=i,12.2===e.Kn(Object(o.p)())&&v("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return d("SimpleDb","Removing database:",t),pr(window.indexedDB.deleteDatabase(t)).Mn()},e.jn=function(){if("undefined"==typeof indexedDB)return!1;if(e.Wn())return!0;var t=Object(o.p)(),n=e.Kn(t),i=0<n&&n<10,r=e.Gn(t),u=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||u)},e.Wn=function(){var e;return void 0!==t&&"YES"===(null===(e=t.env)||void 0===e?void 0:e.zn)},e.Hn=function(t,e){return t.store(e)},e.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.Jn=function(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n=this;return Object(h.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(d("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new br(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new A(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new br(t,n))},i.onupgradeneeded=function(t){d("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Qn.Yn(e,i.transaction,t.oldVersion,n.version).next((function(){d("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}}))}))},e.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},e.prototype.runTransaction=function(t,e,n,r){return Object(h.b)(this,void 0,void 0,(function(){var i,o,u,s,a;return Object(h.d)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,u=function(){var e,u,a,c,l;return Object(h.d)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.Jn(t)];case 2:return s.db=h.sent(),e=ar.open(s.db,t,i?"readonly":"readwrite",n),u=r(e).catch((function(t){return e.abort(t),sr.reject(t)})).Mn(),a={},u.catch((function(){})),[4,e.Un];case 3:return[2,(a.value=(h.sent(),u),a)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,d("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,u()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),cr=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return pr(this.ts.delete())},t}(),br=function(t){function e(e,n){var r=this;return(r=t.call(this,k.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(h.c)(e,t),e}(A);function lr(t){return"IndexedDbTransactionError"===t.name}var fr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(d("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),pr(n)},t.prototype.add=function(t){return d("SimpleDb","ADD",this.store.name,t,t),pr(this.store.add(t))},t.prototype.get=function(t){var e=this;return pr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),d("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return d("SimpleDb","DELETE",this.store.name,t),pr(this.store.delete(t))},t.prototype.count=function(){return d("SimpleDb","COUNT",this.store.name),pr(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.us=function(t,e){d("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,(function(t,e,n){return n.delete()}))},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new sr((function(n,r){e.onerror=function(t){var e=vr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.cs=function(t,e){var n=[];return new sr((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new cr(i),u=e(i.primaryKey,i.value,o);if(u instanceof sr){var s=u.catch((function(t){return o.done(),sr.reject(t)}));n.push(s)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}})).next((function(){return sr.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function pr(t){return new sr((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=vr(t.target.error);n(e)}}))}var dr=!1;function vr(t){var e=ur.Kn(Object(o.p)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var i=new A("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return dr||(dr=!0,setTimeout((function(){throw i}),0)),i}}return t}var gr=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new or,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch((function(t){}))}return t.Is=function(e,n,r,i,o){var u=new t(e,n,Date.now()+r,i,o);return u.start(r),u},t.prototype.start=function(t){var e=this;this.As=setTimeout((function(){return e.Rs()}),t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new A(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys((function(){return null!==t.As?(t.clearTimeout(),t.op().then((function(e){return t.Ts.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function yr(t,e){if(v("AsyncQueue",e+": "+t),lr(t))return new A(k.UNAVAILABLE,e+": "+t);throw t}var mr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_r=function(){function t(){this.gs=[]}return t.prototype.Vs=function(t){this.gs.push(t)},t.prototype.ps=function(){this.gs.forEach((function(t){return t()}))},t}();function wr(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ir(e)),e=Er(t.get(n),e);return Ir(e)}function Er(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Ir(t){return t+""}function Tr(t){var e=t.length;if(w(e>=2),2===e)return w(""===t.charAt(0)&&""===t.charAt(1)),Q.at();for(var n=e-2,r=[],i="",o=0;o<e;){var u=t.indexOf("",o);switch((u<0||u>n)&&_(),t.charAt(u+1)){case"":var s=t.substring(o,u),a=void 0;0===i.length?a=s:(a=i+=s,i=""),r.push(a);break;case"":i+=t.substring(o,u),i+="\0";break;case"":i+=t.substring(o,u+1);break;default:_()}o=u+2}return new Q(r)}var Or=function(t,e){this.seconds=t,this.nanoseconds=e},Sr=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Sr.store="owner",Sr.key="owner";var Cr=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Cr.store="mutationQueues",Cr.keyPath="userId";var Nr=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Nr.store="mutations",Nr.keyPath="batchId",Nr.userMutationsIndex="userMutationsIndex",Nr.userMutationsKeyPath=["userId","batchId"];var kr=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,wr(e)]},t.key=function(t,e,n){return[t,wr(e),n]},t}();kr.store="documentMutations",kr.PLACEHOLDER=new kr;var Ar=function(t,e){this.path=t,this.readTime=e},jr=function(t,e){this.path=t,this.version=e},Pr=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Pr.store="remoteDocuments",Pr.readTimeIndex="readTimeIndex",Pr.readTimeIndexPath="readTime",Pr.collectionReadTimeIndex="collectionReadTimeIndex",Pr.collectionReadTimeIndexPath=["parentPath","readTime"];var xr=function(t){this.byteSize=t};xr.store="remoteDocumentGlobal",xr.key="remoteDocumentGlobalKey";var Rr=function(t,e,n,r,i,o,u){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=u};Rr.store="targets",Rr.keyPath="targetId",Rr.queryTargetsIndexName="queryTargetsIndex",Rr.queryTargetsKeyPath=["canonicalId","targetId"];var Dr=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Dr.store="targetDocuments",Dr.keyPath=["targetId","path"],Dr.documentTargetsIndex="documentTargetsIndex",Dr.documentTargetsKeyPath=["path","targetId"];var Lr=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Lr.key="targetGlobalKey",Lr.store="targetGlobal";var Mr=function(t,e){this.collectionId=t,this.parent=e};Mr.store="collectionParents",Mr.keyPath=["collectionId","parent"];var Fr=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Fr.store="clientMetadata",Fr.keyPath="clientId";var Ur=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Ur.store="bundles",Ur.keyPath="bundleId";var Vr=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Vr.store="namedQueries",Vr.keyPath="name";var qr=Object(h.g)(Object(h.g)(Object(h.g)(Object(h.g)([Cr.store,Nr.store,kr.store,Pr.store,Rr.store,Sr.store,Lr.store,Dr.store],[Fr.store]),[xr.store]),[Mr.store]),[Ur.store,Vr.store]),Br=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).bs=e,r.vs=n,r}return Object(h.c)(e,t),e}(_r);function Hr(t,e){var n=E(t);return ur.Hn(n.bs,e)}var Kr=function(){function t(t,e,n,r){this.batchId=t,this.Ss=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ds=function(t,e,n){for(var r=n.Cs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=De(o,e,r[i]))}return e},t.prototype.xs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(u=r[n]).key.isEqual(t)&&(e=Le(u,e,0,this.Ss));for(var i=0,o=this.mutations;i<o.length;i++){var u;(u=o[i]).key.isEqual(t)&&(e=Le(u,e,0,this.Ss))}return e},t.prototype.Ns=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.xs(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),pn())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&S(this.mutations,t.mutations,(function(t,e){return Fe(t,e)}))&&S(this.baseMutations,t.baseMutations,(function(t,e){return Fe(t,e)}))},t}(),zr=function(){function t(t,e,n,r){this.batch=t,this.Os=e,this.Cs=n,this.Fs=r}return t.from=function(e,n,r){w(e.mutations.length===r.length);for(var i=ln(),o=e.mutations,u=0;u<o.length;u++)i=i.Ht(o[u].key,r[u].version);return new t(e,n,r,i)},t}(),Wr=function(t){this.ks=t};function Gr(t,e){if(e.document)return Kn(t.ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=J.Tt(e.noDocument.path),r=$r(e.noDocument.readTime);return new kt(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=J.Tt(e.unknownDocument.path);return r=$r(e.unknownDocument.version),new At(i,r)}return _()}function Qr(t,e,n){var r=Yr(n),i=e.key.path.Z().rt();if(e instanceof Nt){var o=function(t,e){return{name:Mn(t,e.key),fields:e.vt().mapValue.fields,updateTime:jn(t,e.version.G())}}(t.ks,e),u=e.hasCommittedMutations;return new Pr(null,null,o,u,r,i)}if(e instanceof kt){var s=e.key.path.rt(),a=Xr(e.version);return u=e.hasCommittedMutations,new Pr(null,new Ar(s,a),null,u,r,i)}if(e instanceof At){var c=e.key.path.rt(),h=Xr(e.version);return new Pr(new jr(c,h),null,null,!0,r,i)}return _()}function Yr(t){var e=t.G();return[e.seconds,e.nanoseconds]}function Jr(t){var e=new z(t[0],t[1]);return W.j(e)}function Xr(t){var e=t.G();return new Or(e.seconds,e.nanoseconds)}function $r(t){var e=new z(t.seconds,t.nanoseconds);return W.j(e)}function Zr(t,e){for(var n=(e.baseMutations||[]).map((function(e){return tr(t.ks,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return tr(t.ks,e)})),u=z.fromMillis(e.localWriteTimeMs);return new Kr(e.batchId,u,n,o)}function ti(t){var e,n,r=$r(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?$r(t.lastLimboFreeSnapshotVersion):W.min();return void 0!==t.query.documents?(w(1===(n=t.query).documents.length),e=se(Zt(Vn(n.documents[0])))):e=function(t){return se(Qn(t))}(t.query),new de(e,t.targetId,0,t.lastListenSequenceNumber,r,i,N.fromBase64String(t.resumeToken))}function ei(t,e){var n,r=Xr(e.Mt),i=Xr(e.lastLimboFreeSnapshotVersion);n=Dt(e.target)?Wn(t.ks,e.target):Gn(t.ks,e.target);var o=e.resumeToken.toBase64();return new Rr(e.targetId,xt(e.target),r,o,e.sequenceNumber,i,n)}function ni(t){var e=Qn({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ae(e,e.limit,"L"):e}var li=function(){function t(){}return t.prototype.Ms=function(t,e){return ri(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:$r(e.createTime),version:e.version};var e}))},t.prototype.Ls=function(t,e){return ri(t).put({bundleId:(n=e).id,createTime:Xr(Rn(n.createTime)),version:n.version});var n},t.prototype.$s=function(t,e){return ii(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:ni(e.bundledQuery),readTime:$r(e.readTime)};var e}))},t.prototype.Bs=function(t,e){return ii(t).put(function(t){return{name:t.name,readTime:Xr(Rn(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function ri(t){return Hr(t,Ur.store)}function ii(t){return Hr(t,Vr.store)}var oi=function(){function t(){this.qs=new si}return t.prototype.Us=function(t,e){return this.qs.add(e),sr.resolve()},t.prototype.Qs=function(t,e){return sr.resolve(this.qs.getEntries(e))},t}(),si=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new nn(Q.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new nn(Q.J)).rt()},t}(),ai=function(){function t(){this.Ks=new si}return t.prototype.Us=function(t,e){var n=this;if(!this.Ks.has(e)){var r=e.et(),i=e.Z();t.Vs((function(){n.Ks.add(e)}));var o={collectionId:r,parent:wr(i)};return ui(t).put(o)}return sr.resolve()},t.prototype.Qs=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[C(e),""],!1,!0);return ui(t).os(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Tr(o.parent))}return n}))},t}();function ui(t){return Hr(t,Mr.store)}var ci={js:!1,Ws:0,Gs:0,zs:0},hi=function(){function t(t,e,n){this.Hs=t,this.Js=e,this.Ys=n}return t.Xs=function(e){return new t(e,t.Zs,t.ti)},t}();function fi(t){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(e){if(t.code!==k.FAILED_PRECONDITION||t.message!==mr)throw t;return d("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}hi.Zs=10,hi.ti=1e3,hi.ei=new hi(41943040,hi.Zs,hi.ti),hi.ni=new hi(-1,0,0);var pi=function(){function t(t,e){this.si=t,this.ii=e,this.ri={}}return t.prototype.get=function(t){var e=this.si(t),n=this.ri[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],u=o[0],s=o[1];if(this.ii(u,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.si(t),r=this.ri[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ii(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ri[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.si(t),n=this.ri[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ii(n[r][0],t))return 1===n.length?delete this.ri[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){$(this.ri,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],u=o[0],s=o[1];t(u,s)}}))},t.prototype.nt=function(){return Z(this.ri)},t}(),di=function(){function t(){this.oi=new pi((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.ci=!1}return t.prototype.ai=function(t){var e=this.oi.get(t);return e?e.readTime:W.min()},t.prototype.ui=function(t,e){this.hi(),this.oi.set(t.key,{li:t,readTime:e})},t.prototype._i=function(t,e){void 0===e&&(e=null),this.hi(),this.oi.set(t,{li:null,readTime:e})},t.prototype.fi=function(t,e){this.hi();var n=this.oi.get(e);return void 0!==n?sr.resolve(n.li):this.di(t,e)},t.prototype.getEntries=function(t,e){return this.wi(t,e)},t.prototype.apply=function(t){return this.hi(),this.ci=!0,this.Ei(t)},t.prototype.hi=function(){},t}();function vi(t,e,n){var r=t.store(Nr.store),i=t.store(kr.store),o=[],u=IDBKeyRange.only(n.batchId),s=0,a=r.ls({range:u},(function(t,e,n){return s++,n.delete()}));o.push(a.next((function(){w(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=kr.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return sr.$n(o).next((function(){return c}))}function gi(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw _();e=t.noDocument}return JSON.stringify(e).length}var yi=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ti=n,this.Ii=r,this.mi={}}return t.Ai=function(e,n,r,i){return w(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Ri=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bi(t).ls({index:Nr.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Pi=function(t,e,n,r){var i=this,o=_i(t),u=bi(t);return u.add({}).next((function(s){w("number"==typeof s);for(var a=new Kr(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return zn(t.ks,e)})),i=n.mutations.map((function(e){return zn(t.ks,e)}));return new Nr(e,n.batchId,n.Ss.toMillis(),r,i)}(i.Kt,i.userId,a),h=[],l=new nn((function(t,e){return O(t.ot(),e.ot())})),f=0,p=r;f<p.length;f++){var d=p[f],v=kr.key(i.userId,d.key.path,s);l=l.add(d.key.path.Z()),h.push(u.put(c)),h.push(o.put(v,kr.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ti.Us(t,e))})),t.Vs((function(){i.mi[s]=a.keys()})),sr.$n(h).next((function(){return a}))}))},t.prototype.yi=function(t,e){var n=this;return bi(t).get(e).next((function(t){return t?(w(t.userId===n.userId),Zr(n.Kt,t)):null}))},t.prototype.gi=function(t,e){var n=this;return this.mi[e]?sr.resolve(this.mi[e]):this.yi(t,e).next((function(t){if(t){var r=t.keys();return n.mi[e]=r,r}return null}))},t.prototype.Vi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return bi(t).ls({index:Nr.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(w(e.batchId>=r),o=Zr(n.Kt,e)),i.done()})).next((function(){return o}))},t.prototype.pi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return bi(t).ls({index:Nr.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.bi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bi(t).os(Nr.userMutationsIndex,n).next((function(t){return t.map((function(t){return Zr(e.Kt,t)}))}))},t.prototype.vi=function(t,e){var n=this,r=kr.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return _i(t).ls({range:i},(function(r,i,u){var s=r[0],a=r[1],c=r[2],h=Tr(a);if(s===n.userId&&e.path.isEqual(h))return bi(t).get(c).next((function(t){if(!t)throw _();w(t.userId===n.userId),o.push(Zr(n.Kt,t))}));u.done()})).next((function(){return o}))},t.prototype.Si=function(t,e){var n=this,r=new nn(O),i=[];return e.forEach((function(e){var o=kr.prefixForPath(n.userId,e.path),u=IDBKeyRange.lowerBound(o),s=_i(t).ls({range:u},(function(t,i,o){var u=t[0],s=t[1],a=t[2],c=Tr(s);u===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(s)})),sr.$n(i).next((function(){return n.Di(t,r)}))},t.prototype.Ci=function(t,e){var n=this,r=e.path,i=r.length+1,o=kr.prefixForPath(this.userId,r),u=IDBKeyRange.lowerBound(o),s=new nn(O);return _i(t).ls({range:u},(function(t,e,o){var u=t[0],a=t[1],c=t[2],h=Tr(a);u===n.userId&&r.st(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Di(t,s)}))},t.prototype.Di=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(bi(t).get(e).next((function(t){if(null===t)throw _();w(t.userId===n.userId),r.push(Zr(n.Kt,t))})))})),sr.$n(i).next((function(){return r}))},t.prototype.xi=function(t,e){var n=this;return vi(t.bs,this.userId,e).next((function(r){return t.Vs((function(){n.Ni(e.batchId)})),sr.forEach(r,(function(e){return n.Ii.Oi(t,e)}))}))},t.prototype.Ni=function(t){delete this.mi[t]},t.prototype.Fi=function(t){var e=this;return this.Ri(t).next((function(n){if(!n)return sr.resolve();var r=IDBKeyRange.lowerBound(kr.prefixForUser(e.userId)),i=[];return _i(t).ls({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Tr(t[1]);i.push(o)}else r.done()})).next((function(){w(0===i.length)}))}))},t.prototype.ki=function(t,e){return mi(t,this.userId,e)},t.prototype.Mi=function(t){var e=this;return wi(t).get(this.userId).next((function(t){return t||new Cr(e.userId,-1,"")}))},t}();function mi(t,e,n){var r=kr.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),u=!1;return _i(t).ls({range:o,hs:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(u=!0),r.done()})).next((function(){return u}))}function bi(t){return Hr(t,Nr.store)}function _i(t){return Hr(t,kr.store)}function wi(t){return Hr(t,Cr.store)}var Ei=function(){function t(t){this.Li=t}return t.prototype.next=function(){return this.Li+=2,this.Li},t.$i=function(){return new t(0)},t.Bi=function(){return new t(-1)},t}(),Ii=function(){function t(t,e){this.Ii=t,this.Kt=e}return t.prototype.qi=function(t){var e=this;return this.Ui(t).next((function(n){var r=new Ei(n.highestTargetId);return n.highestTargetId=r.next(),e.Qi(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ki=function(t){return this.Ui(t).next((function(t){return W.j(new z(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.ji=function(t){return this.Ui(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.Ui(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Qi(t,i)}))},t.prototype.Gi=function(t,e){var n=this;return this.zi(t,e).next((function(){return n.Ui(t).next((function(r){return r.targetCount+=1,n.Hi(e,r),n.Qi(t,r)}))}))},t.prototype.Ji=function(t,e){return this.zi(t,e)},t.prototype.Yi=function(t,e){var n=this;return this.Xi(t,e.targetId).next((function(){return Ti(t).delete(e.targetId)})).next((function(){return n.Ui(t)})).next((function(e){return w(e.targetCount>0),e.targetCount-=1,n.Qi(t,e)}))},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return Ti(t).ls((function(u,s){var a=ti(s);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Yi(t,a)))})).next((function(){return sr.$n(o)})).next((function(){return i}))},t.prototype.mn=function(t,e){return Ti(t).ls((function(t,n){var r=ti(n);e(r)}))},t.prototype.Ui=function(t){return Oi(t).get(Lr.key).next((function(t){return w(null!==t),t}))},t.prototype.Qi=function(t,e){return Oi(t).put(Lr.key,e)},t.prototype.zi=function(t,e){return Ti(t).put(ei(this.Kt,e))},t.prototype.Hi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.tr=function(t){return this.Ui(t).next((function(t){return t.targetCount}))},t.prototype.er=function(t,e){var n=xt(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ti(t).ls({range:r,index:Rr.queryTargetsIndexName},(function(t,n,r){var o=ti(n);Rt(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.nr=function(t,e,n){var r=this,i=[],o=Si(t);return e.forEach((function(e){var u=wr(e.path);i.push(o.put(new Dr(n,u))),i.push(r.Ii.sr(t,n,e))})),sr.$n(i)},t.prototype.ir=function(t,e,n){var r=this,i=Si(t);return sr.forEach(e,(function(e){var o=wr(e.path);return sr.$n([i.delete([n,o]),r.Ii.rr(t,n,e)])}))},t.prototype.Xi=function(t,e){var n=Si(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.cr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Si(t),i=pn();return r.ls({range:n,hs:!0},(function(t,e,n){var r=Tr(t[1]),o=new J(r);i=i.add(o)})).next((function(){return i}))},t.prototype.ki=function(t,e){var n=wr(e.path),r=IDBKeyRange.bound([n],[C(n)],!1,!0),i=0;return Si(t).ls({index:Dr.documentTargetsIndex,hs:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Dn=function(t,e){return Ti(t).get(e).next((function(t){return t?ti(t):null}))},t}();function Ti(t){return Hr(t,Rr.store)}function Oi(t){return Hr(t,Lr.store)}function Si(t){return Hr(t,Dr.store)}function Ci(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],u=O(n,i);return 0===u?O(r,o):u}var Ni=function(){function t(t){this.ar=t,this.buffer=new nn(Ci),this.ur=0}return t.prototype.hr=function(){return++this.ur},t.prototype.lr=function(t){var e=[t,this.hr()];if(this.buffer.size<this.ar)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ci(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ki=function(){function t(t,e){this._r=t,this.fs=e,this.dr=!1,this.wr=null}return t.prototype.start=function(t){-1!==this._r.params.Hs&&this.Er(t)},t.prototype.stop=function(){this.wr&&(this.wr.cancel(),this.wr=null)},Object.defineProperty(t.prototype,"Tr",{get:function(){return null!==this.wr},enumerable:!1,configurable:!0}),t.prototype.Er=function(t){var e=this,n=this.dr?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.wr=this.fs.Ir("lru_garbage_collection",n,(function(){return Object(h.b)(e,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){switch(n.label){case 0:this.wr=null,this.dr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.mr(this._r)];case 2:return n.sent(),[3,7];case 3:return lr(e=n.sent())?(d("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,fi(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Er(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Ai=function(){function t(t,e){this.Ar=t,this.params=e}return t.prototype.Rr=function(t,e){return this.Ar.Pr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.yr=function(t,e){var n=this;if(0===e)return sr.resolve(K.U);var r=new Ni(e);return this.Ar.mn(t,(function(t){return r.lr(t.sequenceNumber)})).next((function(){return n.Ar.gr(t,(function(t){return r.lr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Zi=function(t,e,n){return this.Ar.Zi(t,e,n)},t.prototype.Vr=function(t,e){return this.Ar.Vr(t,e)},t.prototype.pr=function(t,e){var n=this;return-1===this.params.Hs?(d("LruGarbageCollector","Garbage collection skipped; disabled"),sr.resolve(ci)):this.br(t).next((function(r){return r<n.params.Hs?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Hs),ci):n.vr(t,e)}))},t.prototype.br=function(t){return this.Ar.br(t)},t.prototype.vr=function(t,e){var n,i,o,u,s,a,c,h=this,l=Date.now();return this.Rr(t,this.params.Js).next((function(e){return e>h.params.Ys?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.Ys+" from "+e),i=h.params.Ys):i=e,u=Date.now(),h.yr(t,i)})).next((function(r){return n=r,s=Date.now(),h.Zi(t,n,e)})).next((function(e){return o=e,a=Date.now(),h.Vr(t,n)})).next((function(t){return c=Date.now(),f()<=r.a.DEBUG&&d("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(u-l)+"ms\n\tDetermined least recently used "+i+" in "+(s-u)+"ms\n\tRemoved "+o+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(c-a)+"ms\nTotal Duration: "+(c-l)+"ms"),sr.resolve({js:!0,Ws:i,Gs:o,zs:t})}))},t}(),ji=function(){function t(t,e){this.db=t,this._r=function(t,e){return new Ai(t,e)}(this,e)}return t.prototype.Pr=function(t){var e=this.Sr(t);return this.db.Dr().tr(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Sr=function(t){var e=0;return this.gr(t,(function(t){e++})).next((function(){return e}))},t.prototype.mn=function(t,e){return this.db.Dr().mn(t,e)},t.prototype.gr=function(t,e){return this.Cr(t,(function(t,n){return e(n)}))},t.prototype.sr=function(t,e,n){return Pi(t,n)},t.prototype.rr=function(t,e,n){return Pi(t,n)},t.prototype.Zi=function(t,e,n){return this.db.Dr().Zi(t,e,n)},t.prototype.Oi=function(t,e){return Pi(t,e)},t.prototype.Nr=function(t,e){return function(t,e){var n=!1;return wi(t)._s((function(r){return mi(t,r,e).next((function(t){return t&&(n=!0),sr.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Vr=function(t,e){var n=this,r=this.db.Fr().Or(),i=[],o=0;return this.Cr(t,(function(u,s){if(s<=e){var a=n.Nr(t,u).next((function(e){if(!e)return o++,r.fi(t,u).next((function(){return r._i(u),Si(t).delete([0,wr(u.path)])}))}));i.push(a)}})).next((function(){return sr.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.vs);return this.db.Dr().Ji(t,n)},t.prototype.kr=function(t,e){return Pi(t,e)},t.prototype.Cr=function(t,e){var n,r=Si(t),i=K.U;return r.ls({index:Dr.documentTargetsIndex},(function(t,r){var o=t[0],u=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==K.U&&e(new J(Tr(n)),i),i=s,n=u):i=K.U})).next((function(){i!==K.U&&e(new J(Tr(n)),i)}))},t.prototype.br=function(t){return this.db.Fr().Mr(t)},t}();function Pi(t,e){return Si(t).put(function(t,e){return new Dr(0,wr(t.path),e)}(e,t.vs))}var xi=function(){function t(t,e){this.Kt=t,this.Ti=e}return t.prototype.ui=function(t,e,n){return Li(t).put(Mi(e),n)},t.prototype._i=function(t,e){var n=Li(t),r=Mi(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Lr(t,r)}))},t.prototype.fi=function(t,e){var n=this;return Li(t).get(Mi(e)).next((function(t){return n.$r(t)}))},t.prototype.Br=function(t,e){var n=this;return Li(t).get(Mi(e)).next((function(t){var e=n.$r(t);return e?{li:e,size:gi(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=an();return this.qr(t,e,(function(t,e){var i=n.$r(e);r=r.Ht(t,i)})).next((function(){return r}))},t.prototype.Ur=function(t,e){var n=this,r=an(),i=new Ze(J.J);return this.qr(t,e,(function(t,e){var o=n.$r(e);o?(r=r.Ht(t,o),i=i.Ht(t,gi(e))):(r=r.Ht(t,null),i=i.Ht(t,0))})).next((function(){return{Qr:r,Kr:i}}))},t.prototype.qr=function(t,e,n){if(e.nt())return sr.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return Li(t).ls({range:r},(function(t,e,r){for(var u=J.Tt(t);o&&J.J(o,u)<0;)n(o,null),o=i.ce();o&&o.isEqual(u)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ae()?i.ce():null}))},t.prototype.jr=function(t,e,n){var r=this,i=cn(),o=e.path.length+1,u={};if(n.isEqual(W.min())){var s=e.path.rt();u.range=IDBKeyRange.lowerBound(s)}else{var a=e.path.rt(),c=Yr(n);u.range=IDBKeyRange.lowerBound([a,c],!0),u.index=Pr.collectionReadTimeIndex}return Li(t).ls(u,(function(t,n,u){if(t.length===o){var s=Gr(r.Kt,n);e.path.st(s.key.path)?s instanceof Nt&&le(e,s)&&(i=i.Ht(s.key,s)):u.done()}})).next((function(){return i}))},t.prototype.Or=function(t){return new Ri(this,!!t&&t.Wr)},t.prototype.Mr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Di(t).get(xr.key).next((function(t){return w(!!t),t}))},t.prototype.Lr=function(t,e){return Di(t).put(xr.key,e)},t.prototype.$r=function(t){if(t){var e=Gr(this.Kt,t);return e instanceof kt&&e.version.isEqual(W.min())?null:e}return null},t}(),Ri=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Gr=e,r.Wr=n,r.zr=new pi((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(h.c)(e,t),e.prototype.Ei=function(t){var e=this,n=[],r=0,i=new nn((function(t,e){return O(t.ot(),e.ot())}));return this.oi.forEach((function(o,u){var s=e.zr.get(o);if(u.li){var a=Qr(e.Gr.Kt,u.li,e.ai(o));i=i.add(o.path.Z());var c=gi(a);r+=c-s,n.push(e.Gr.ui(t,o,a))}else if(r-=s,e.Wr){var h=Qr(e.Gr.Kt,new kt(o,W.min()),e.ai(o));n.push(e.Gr.ui(t,o,h))}else n.push(e.Gr._i(t,o))})),i.forEach((function(r){n.push(e.Gr.Ti.Us(t,r))})),n.push(this.Gr.updateMetadata(t,r)),sr.$n(n)},e.prototype.di=function(t,e){var n=this;return this.Gr.Br(t,e).next((function(t){return null===t?(n.zr.set(e,0),null):(n.zr.set(e,t.size),t.li)}))},e.prototype.wi=function(t,e){var n=this;return this.Gr.Ur(t,e).next((function(t){var e=t.Qr;return t.Kr.forEach((function(t,e){n.zr.set(t,e)})),e}))},e}(di);function Di(t){return Hr(t,xr.store)}function Li(t){return Hr(t,Pr.store)}function Mi(t){return t.path.rt()}var Fi=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;w(n<r&&n>=0&&r<=11);var o=new ar("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Sr.store)}(t),function(t){t.createObjectStore(Cr.store,{keyPath:Cr.keyPath}),t.createObjectStore(Nr.store,{keyPath:Nr.keyPath,autoIncrement:!0}).createIndex(Nr.userMutationsIndex,Nr.userMutationsKeyPath,{unique:!0}),t.createObjectStore(kr.store)}(t),Ui(t),function(t){t.createObjectStore(Pr.store)}(t));var u=sr.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Dr.store),t.deleteObjectStore(Rr.store),t.deleteObjectStore(Lr.store)}(t),Ui(t)),u=u.next((function(){return function(t){var e=t.store(Lr.store),n=new Lr(0,0,W.min().G(),0);return e.put(Lr.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(u=u.next((function(){return function(t,e){return e.store(Nr.store).os().next((function(n){t.deleteObjectStore(Nr.store),t.createObjectStore(Nr.store,{keyPath:Nr.keyPath,autoIncrement:!0}).createIndex(Nr.userMutationsIndex,Nr.userMutationsKeyPath,{unique:!0});var r=e.store(Nr.store),i=n.map((function(t){return r.put(t)}));return sr.$n(i)}))}(t,o)}))),u=u.next((function(){!function(t){t.createObjectStore(Fr.store,{keyPath:Fr.keyPath})}(t)}))),n<5&&r>=5&&(u=u.next((function(){return i.Hr(o)}))),n<6&&r>=6&&(u=u.next((function(){return function(t){t.createObjectStore(xr.store)}(t),i.Jr(o)}))),n<7&&r>=7&&(u=u.next((function(){return i.Yr(o)}))),n<8&&r>=8&&(u=u.next((function(){return i.Xr(t,o)}))),n<9&&r>=9&&(u=u.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Pr.store);e.createIndex(Pr.readTimeIndex,Pr.readTimeIndexPath,{unique:!1}),e.createIndex(Pr.collectionReadTimeIndex,Pr.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(u=u.next((function(){return i.Zr(o)}))),n<11&&r>=11&&(u=u.next((function(){!function(t){t.createObjectStore(Ur.store,{keyPath:Ur.keyPath})}(t),function(t){t.createObjectStore(Vr.store,{keyPath:Vr.keyPath})}(t)}))),u},t.prototype.Jr=function(t){var e=0;return t.store(Pr.store).ls((function(t,n){e+=gi(n)})).next((function(){var n=new xr(e);return t.store(xr.store).put(xr.key,n)}))},t.prototype.Hr=function(t){var e=this,n=t.store(Cr.store),r=t.store(Nr.store);return n.os().next((function(n){return sr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(Nr.userMutationsIndex,i).next((function(r){return sr.forEach(r,(function(r){w(r.userId===n.userId);var i=Zr(e.Kt,r);return vi(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Yr=function(t){var e=t.store(Dr.store),n=t.store(Pr.store);return t.store(Lr.store).get(Lr.key).next((function(t){var r=[];return n.ls((function(n,i){var o=new Q(n),u=function(t){return[0,wr(t)]}(o);r.push(e.get(u).next((function(n){return n?sr.resolve():function(n){return e.put(new Dr(0,wr(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return sr.$n(r)}))}))},t.prototype.Xr=function(t,e){t.createObjectStore(Mr.store,{keyPath:Mr.keyPath});var n=e.store(Mr.store),r=new si,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:wr(i)})}};return e.store(Pr.store).ls({hs:!0},(function(t,e){var n=new Q(t);return i(n.Z())})).next((function(){return e.store(kr.store).ls({hs:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Tr(n));return i(r.Z())}))}))},t.prototype.Zr=function(t){var e=this,n=t.store(Rr.store);return n.ls((function(t,r){var i=ti(r),o=ei(e.Kt,i);return n.put(o)}))},t}();function Ui(t){t.createObjectStore(Dr.store,{keyPath:Dr.keyPath}).createIndex(Dr.documentTargetsIndex,Dr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Rr.store,{keyPath:Rr.keyPath}).createIndex(Rr.queryTargetsIndexName,Rr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Lr.store)}var Vi="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qi=function(){function t(e,n,r,i,o,u,s,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.eo=o,this.window=u,this.document=s,this.no=c,this.so=h,this.io=null,this.ro=!1,this.isPrimary=!1,this.networkEnabled=!0,this.oo=null,this.inForeground=!1,this.co=null,this.ao=null,this.uo=Number.NEGATIVE_INFINITY,this.ho=function(t){return Promise.resolve()},!t.jn())throw new A(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ii=new ji(this,i),this.lo=n+"main",this.Kt=new Wr(a),this._o=new ur(this.lo,11,new Fi(this.Kt)),this.fo=new Ii(this.Ii,this.Kt),this.Ti=new ai,this.wo=function(t,e){return new xi(t,e)}(this.Kt,this.Ti),this.Eo=new li,this.window&&this.window.localStorage?this.To=this.window.localStorage:(this.To=null,!1===h&&v("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Io().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new A(k.FAILED_PRECONDITION,Vi);return t.mo(),t.Ao(),t.Ro(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.fo.ji(e)}))})).then((function(e){t.io=new K(e,t.no)})).then((function(){t.ro=!0})).catch((function(e){return t._o&&t._o.close(),Promise.reject(e)}))},t.prototype.Po=function(t){var e=this;return this.ho=function(n){return Object(h.b)(e,void 0,void 0,(function(){return Object(h.d)(this,(function(e){return this.Tr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.yo=function(t){var e=this;this._o.Zn((function(n){return Object(h.b)(e,void 0,void 0,(function(){return Object(h.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Vo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.eo.ys((function(){return Object(h.b)(e,void 0,void 0,(function(){return Object(h.d)(this,(function(t){switch(t.label){case 0:return this.Tr?[4,this.Io()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Io=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Hi(e).put(new Fr(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.po(e).next((function(e){e||(t.isPrimary=!1,t.eo.bo((function(){return t.ho(!1)})))}))})).next((function(){return t.vo(e)})).next((function(n){return t.isPrimary&&!n?t.So(e).next((function(){return!1})):!!n&&t.Do(e).next((function(){return!0}))}))})).catch((function(e){if(lr(e))return d("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return d("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.eo.bo((function(){return t.ho(e)})),t.isPrimary=e}))},t.prototype.po=function(t){var e=this;return Bi(t).get(Sr.key).next((function(t){return sr.resolve(e.Co(t))}))},t.prototype.xo=function(t){return Hi(t).delete(this.clientId)},t.prototype.No=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Object(h.d)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.Oo(this.uo,18e5)?[3,2]:(this.uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Hr(t,Fr.store);return e.os().next((function(t){var n=i.Fo(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return sr.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.To)for(e=0,n=t;e<n.length;e++)r=n[e],this.To.removeItem(this.ko(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Ro=function(){var t=this;this.ao=this.eo.Ir("client_metadata_refresh",4e3,(function(){return t.Io().then((function(){return t.No()})).then((function(){return t.Ro()}))}))},t.prototype.Co=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.vo=function(t){var e=this;return this.so?sr.resolve(!0):Bi(t).get(Sr.key).next((function(n){if(null!==n&&e.Oo(n.leaseTimestampMs,5e3)&&!e.Mo(n.ownerId)){if(e.Co(n)&&e.networkEnabled)return!0;if(!e.Co(n)){if(!n.allowTabSynchronization)throw new A(k.FAILED_PRECONDITION,Vi);return!1}}return!(!e.networkEnabled||!e.inForeground)||Hi(t).os().next((function(t){return void 0===e.Fo(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&d("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Lo=function(){return Object(h.b)(this,void 0,void 0,(function(){var t=this;return Object(h.d)(this,(function(e){switch(e.label){case 0:return this.ro=!1,this.$o(),this.ao&&(this.ao.cancel(),this.ao=null),this.Bo(),this.qo(),[4,this._o.runTransaction("shutdown","readwrite",[Sr.store,Fr.store],(function(e){var n=new Br(e,K.U);return t.So(n).next((function(){return t.xo(n)}))}))];case 1:return e.sent(),this._o.close(),this.Uo(),[2]}}))}))},t.prototype.Fo=function(t,e){var n=this;return t.filter((function(t){return n.Oo(t.updateTimeMs,e)&&!n.Mo(t.clientId)}))},t.prototype.Qo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Hi(e).os().next((function(e){return t.Fo(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.Ko=function(t){return yi.Ai(t,this.Kt,this.Ti,this.Ii)},t.prototype.Dr=function(){return this.fo},t.prototype.Fr=function(){return this.wo},t.prototype.jo=function(){return this.Ti},t.prototype.Wo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r=this;d("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this._o.runTransaction(t,o,qr,(function(o){return i=new Br(o,r.io?r.io.next():K.U),"readwrite-primary"===e?r.po(i).next((function(t){return!!t||r.vo(i)})).next((function(e){if(!e)throw v("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.eo.bo((function(){return r.ho(!1)})),new A(k.FAILED_PRECONDITION,mr);return n(i)})).next((function(t){return r.Do(i).next((function(){return t}))})):r.Go(i).next((function(){return n(i)}))})).then((function(t){return i.ps(),t}))},t.prototype.Go=function(t){var e=this;return Bi(t).get(Sr.key).next((function(t){if(null!==t&&e.Oo(t.leaseTimestampMs,5e3)&&!e.Mo(t.ownerId)&&!e.Co(t)&&!(e.so||e.allowTabSynchronization&&t.allowTabSynchronization))throw new A(k.FAILED_PRECONDITION,Vi)}))},t.prototype.Do=function(t){var e=new Sr(this.clientId,this.allowTabSynchronization,Date.now());return Bi(t).put(Sr.key,e)},t.jn=function(){return ur.jn()},t.prototype.So=function(t){var e=this,n=Bi(t);return n.get(Sr.key).next((function(t){return e.Co(t)?(d("IndexedDbPersistence","Releasing primary lease."),n.delete(Sr.key)):sr.resolve()}))},t.prototype.Oo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(v("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.mo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.co=function(){t.eo.ys((function(){return t.inForeground="visible"===t.document.visibilityState,t.Io()}))},this.document.addEventListener("visibilitychange",this.co),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Bo=function(){this.co&&(this.document.removeEventListener("visibilitychange",this.co),this.co=null)},t.prototype.Ao=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.oo=function(){e.$o(),e.eo.ys((function(){return e.Lo()}))},this.window.addEventListener("unload",this.oo))},t.prototype.qo=function(){this.oo&&(this.window.removeEventListener("unload",this.oo),this.oo=null)},t.prototype.Mo=function(t){var e;try{var n=null!==(null===(e=this.To)||void 0===e?void 0:e.getItem(this.ko(t)));return d("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return v("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.$o=function(){if(this.To)try{this.To.setItem(this.ko(this.clientId),String(Date.now()))}catch(t){v("Failed to set zombie client id.",t)}},t.prototype.Uo=function(){if(this.To)try{this.To.removeItem(this.ko(this.clientId))}catch(t){}},t.prototype.ko=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Bi(t){return Hr(t,Sr.store)}function Hi(t){return Hr(t,Fr.store)}function Ki(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var zi=function(t,e){this.progress=t,this.zo=e},Wi=function(){function t(t,e,n){this.wo=t,this.Ho=e,this.Ti=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.vi(t,e).next((function(r){return n.Yo(t,e,r)}))},t.prototype.Yo=function(t,e,n){return this.wo.fi(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].xs(e,t);return t}))},t.prototype.Xo=function(t,e,n){var r=an();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].xs(t,e);r=r.Ht(t,e)})),r},t.prototype.Zo=function(t,e){var n=this;return this.wo.getEntries(t,e).next((function(e){return n.tc(t,e)}))},t.prototype.tc=function(t,e){var n=this;return this.Ho.Si(t,e).next((function(r){var i=n.Xo(t,e,r),o=sn();return i.forEach((function(t,e){e||(e=new kt(t,W.min())),o=o.Ht(t,e)})),o}))},t.prototype.jr=function(t,e,n){return function(t){return J.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):ie(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new J(e)).next((function(t){var e=cn();return t instanceof Nt&&(e=e.Ht(t.key,t)),e}))},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=cn();return this.Ti.Qs(t,i).next((function(u){return sr.forEach(u,(function(u){var s=function(t,e){return new Xt(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,u.child(i));return r.sc(t,s,n).next((function(t){t.forEach((function(t,e){o=o.Ht(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.wo.jr(t,e,n).next((function(n){return r=n,o.Ho.Ci(t,e)})).next((function(e){return i=e,o.ic(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],u=0,s=o.mutations;u<s.length;u++){var a=s[u],c=a.key,h=Le(a,r.get(c),0,o.Ss);r=h instanceof Nt?r.Ht(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){le(e,n)||(r=r.remove(t))})),r}))},t.prototype.ic=function(t,e,n){for(var r=pn(),i=0,o=e;i<o.length;i++)for(var u=0,s=o[i].mutations;u<s.length;u++){var a=s[u];a instanceof qe&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.wo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Nt&&(c=c.Ht(t,e))})),c}))},t}(),Gi=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=pn(),i=pn(),o=0,u=n.docChanges;o<u.length;o++){var s=u[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Qi=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.jr=function(t,e,n,i){var o=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(W.min())?this.hc(t,e):this.uc.Zo(t,i).next((function(u){var s=o.lc(e,u);return(te(e)||ee(e))&&o._c(e.limitType,s,i,n)?o.hc(t,e):(f()<=r.a.DEBUG&&d("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),he(e)),o.uc.jr(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ht(e.key,e)})),t})))}))},t.prototype.lc=function(t,e){var n=new nn(fe(t));return e.forEach((function(e,r){r instanceof Nt&&le(t,r)&&(n=n.add(r))})),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return f()<=r.a.DEBUG&&d("QueryEngine","Using full collection scan to execute query:",he(e)),this.uc.jr(t,e,W.min())},t}(),Yi=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new Ze(O),this.wc=new pi((function(t){return xt(t)}),Rt),this.Ec=W.min(),this.Ho=t.Ko(n),this.Tc=t.Fr(),this.fo=t.Dr(),this.Ic=new Wi(this.Tc,this.Ho,this.persistence.jo()),this.Eo=t.Wo(),this.fc.ac(this.Ic)}return t.prototype.mr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.pr(n,e.dc)}))},t}();function Ji(t,e,n,r){return new Yi(t,e,n,r)}function Xi(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(h.d)(this,(function(u){switch(u.label){case 0:return n=E(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ho.bi(t).next((function(u){return o=u,r=n.persistence.Ko(e),i=new Wi(n.Tc,r,n.persistence.jo()),r.bi(t)})).next((function(e){for(var n=[],r=[],u=pn(),s=0,a=o;s<a.length;s++){var c=a[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];u=u.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,m=v.mutations;y<m.length;y++){var g=m[y];u=u.add(g.key)}}return i.Zo(t,u).next((function(t){return{mc:t,Ac:n,Rc:r}}))}))}))];case 1:return o=u.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),o)]}}))}))}function $i(t,e){var n=E(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Tc.Or({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),u=sr.resolve();return o.forEach((function(t){u=u.next((function(){return r.fi(e,t)})).next((function(e){var o=e,u=n.Fs.get(t);w(null!==u),(!o||o.version.u(u)<0)&&(o=i.Ds(t,o,n))&&r.ui(o,n.Os)}))})),u.next((function(){return t.Ho.xi(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ho.Fi(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}function Zi(t){var e=E(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.fo.Ki(t)}))}function to(t,e){var n=E(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Tc.Or({Wr:!0});i=n.dc;var u=[];e.Fe.forEach((function(e,o){var s=i.get(o);if(s){u.push(n.fo.ir(t,e.Ke,o).next((function(){return n.fo.nr(t,e.Ue,o)})));var a=e.resumeToken;if(a.o()>0){var c=s.$t(a,r).Lt(t.vs);i=i.Ht(o,c),function(t,e,n){return w(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.W()-t.Mt.W()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(s,c,e)&&u.push(n.fo.Ji(t,c))}}}));var s=sn();if(e.Me.forEach((function(r,i){e.Le.has(r)&&u.push(n.persistence.Ii.kr(t,r))})),u.push(eo(t,o,e.Me,r,void 0).next((function(t){s=t}))),!r.isEqual(W.min())){var a=n.fo.Ki(t).next((function(e){return n.fo.Wi(t,t.vs,r)}));u.push(a)}return sr.$n(u).next((function(){return o.apply(t)})).next((function(){return n.Ic.tc(t,s)}))})).then((function(t){return n.dc=i,t}))}function eo(t,e,n,r,i){var o=pn();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=sn();return n.forEach((function(n,u){var s=t.get(n),a=(null==i?void 0:i.get(n))||r;u instanceof kt&&u.version.isEqual(W.min())?(e._i(n,a),o=o.Ht(n,u)):null==s||u.version.u(s.version)>0||0===u.version.u(s.version)&&s.hasPendingWrites?(e.ui(u,a),o=o.Ht(n,u)):d("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",u.version)})),o}))}function no(t,e){var n=E(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ho.Vi(t,e)}))}function ro(t,e){var n=E(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.fo.er(t,e).next((function(i){return i?(r=i,sr.resolve(r)):n.fo.qi(t).next((function(i){return r=new de(e,i,0,t.vs),n.fo.Gi(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t}))}function io(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i,o,u;return Object(h.d)(this,(function(s){switch(s.label){case 0:r=E(t),i=r.dc.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ii.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!lr(u=s.sent()))throw u;return d("LocalStore","Failed to update sequence numbers for target "+e+": "+u),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}}))}))}function oo(t,e,n){var r=E(t),i=W.min(),o=pn();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=E(t),i=r.wc.get(n);return void 0!==i?sr.resolve(r.dc.get(i)):r.fo.er(e,n)}(r,t,se(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.fo.cr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.fc.jr(t,e,n?i:W.min(),n?o:pn())})).next((function(t){return{documents:t,Pc:o}}))}))}function so(t,e){var n=E(t),r=E(n.fo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Dn(t,e).next((function(t){return t?t.target:null}))}))}function ao(t){var e=E(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=E(t),i=sn(),o=Yr(n),u=Li(e),s=IDBKeyRange.lowerBound(o,!0);return u.ls({index:Pr.readTimeIndex,range:s},(function(t,e){var n=Gr(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime})).next((function(){return{zo:i,readTime:Jr(o)}}))}(e.Tc,t,e.Ec)})).then((function(t){var n=t.zo,r=t.readTime;return e.Ec=r,n}))}function uo(t){return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){return[2,(e=E(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Li(t),n=W.min();return e.ls({index:Pr.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Jr(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ec=t}))]}))}))}function co(t,e,n,r){return Object(h.b)(this,void 0,void 0,(function(){var i,o,u,s,a,c,l,f,d,p;return Object(h.d)(this,(function(h){switch(h.label){case 0:for(i=E(t),o=pn(),u=sn(),s=ln(),a=0,c=n;a<c.length;a++)l=c[a],f=e.yc(l.metadata.name),l.document&&(o=o.add(f)),u=u.Ht(f,e.gc(l)),s=s.Ht(f,e.Vc(l.metadata.readTime));return d=i.Tc.Or({Wr:!0}),[4,ro(i,function(t){return se(Zt(Q.ct("__bundle__/docs/"+t)))}(r))];case 1:return p=h.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return eo(t,d,u,W.min(),s).next((function(e){return d.apply(t),e})).next((function(e){return i.fo.Xi(t,p.targetId).next((function(){return i.fo.nr(t,o,p.targetId)})).next((function(){return i.Ic.tc(t,e)}))}))}))]}}))}))}function ho(t,e,n){return void 0===n&&(n=pn()),Object(h.b)(this,void 0,void 0,(function(){var r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:return[4,ro(t,se(ni(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=E(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Rn(e.readTime);if(r.Mt.u(o)>=0)return i.Eo.Bs(t,e);var u=r.$t(N.h,o);return i.dc=i.dc.Ht(u.targetId,u),i.fo.Ji(t,u).next((function(){return i.fo.Xi(t,r.targetId)})).next((function(){return i.fo.nr(t,n,r.targetId)})).next((function(){return i.Eo.Bs(t,e)}))}))]}}))}))}var lo=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ms=function(t,e){return sr.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:Rn(n.createTime)}),sr.resolve()},t.prototype.$s=function(t,e){return sr.resolve(this.vc.get(e))},t.prototype.Bs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:ni(t.bundledQuery),readTime:Rn(t.readTime)}}(e)),sr.resolve()},t}(),fo=function(){function t(){this.Sc=new nn(po.Dc),this.Cc=new nn(po.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.sr=function(t,e){var n=new po(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach((function(t){return n.sr(t,e)}))},t.prototype.rr=function(t,e){this.Oc(new po(t,e))},t.prototype.Fc=function(t,e){var n=this;t.forEach((function(t){return n.rr(t,e)}))},t.prototype.kc=function(t){var e=this,n=new J(new Q([])),r=new po(n,t),i=new po(n,t+1),o=[];return this.Cc.Ae([r,i],(function(t){e.Oc(t),o.push(t.key)})),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach((function(e){return t.Oc(e)}))},t.prototype.Oc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new J(new Q([])),n=new po(e,t),r=new po(e,t+1),i=pn();return this.Cc.Ae([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.ki=function(t){var e=new po(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),po=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return J.J(t.key,e.key)||O(t.$c,e.$c)},t.xc=function(t,e){return O(t.$c,e.$c)||J.J(t.key,e.key)},t}(),vo=function(){function t(t,e){this.Ti=t,this.Ii=e,this.Ho=[],this.Bc=1,this.qc=new nn(po.Dc)}return t.prototype.Ri=function(t){return sr.resolve(0===this.Ho.length)},t.prototype.Pi=function(t,e,n,r){var i=this.Bc;this.Bc++,this.Ho.length>0&&this.Ho[this.Ho.length-1];var o=new Kr(i,e,n,r);this.Ho.push(o);for(var u=0,s=r;u<s.length;u++){var a=s[u];this.qc=this.qc.add(new po(a.key,i)),this.Ti.Us(t,a.key.path.Z())}return sr.resolve(o)},t.prototype.yi=function(t,e){return sr.resolve(this.Uc(e))},t.prototype.Vi=function(t,e){var n=e+1,r=this.Qc(n),i=r<0?0:r;return sr.resolve(this.Ho.length>i?this.Ho[i]:null)},t.prototype.pi=function(){return sr.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.bi=function(t){return sr.resolve(this.Ho.slice())},t.prototype.vi=function(t,e){var n=this,r=new po(e,0),i=new po(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],(function(t){var e=n.Uc(t.$c);o.push(e)})),sr.resolve(o)},t.prototype.Si=function(t,e){var n=this,r=new nn(O);return e.forEach((function(t){var e=new po(t,0),i=new po(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],(function(t){r=r.add(t.$c)}))})),sr.resolve(this.Kc(r))},t.prototype.Ci=function(t,e){var n=e.path,r=n.length+1,i=n;J.Et(i)||(i=i.child(""));var o=new po(new J(i),0),u=new nn(O);return this.qc.Re((function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(u=u.add(t.$c)),!0)}),o),sr.resolve(this.Kc(u))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Uc(t);null!==r&&n.push(r)})),n},t.prototype.xi=function(t,e){var n=this;w(0===this.jc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return sr.forEach(e.mutations,(function(i){var o=new po(i.key,e.batchId);return r=r.delete(o),n.Ii.Oi(t,i.key)})).next((function(){n.qc=r}))},t.prototype.Ni=function(t){},t.prototype.ki=function(t,e){var n=new po(e,0),r=this.qc.Pe(n);return sr.resolve(e.isEqual(r&&r.key))},t.prototype.Fi=function(t){return this.Ho.length,sr.resolve()},t.prototype.jc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),go=function(){function t(t,e){this.Ti=t,this.Wc=e,this.docs=new Ze(J.J),this.size=0}return t.prototype.ui=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,u=this.Wc(e);return this.docs=this.docs.Ht(r,{li:e,size:u,readTime:n}),this.size+=u-o,this.Ti.Us(t,r.path.Z())},t.prototype._i=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.fi=function(t,e){var n=this.docs.get(e);return sr.resolve(n?n.li:null)},t.prototype.getEntries=function(t,e){var n=this,r=an();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ht(t,e?e.li:null)})),sr.resolve(r)},t.prototype.jr=function(t,e,n){for(var r=cn(),i=new J(e.path.child("")),o=this.docs.ne(i);o.ae();){var u=o.ce(),s=u.key,a=u.value,c=a.li,h=a.readTime;if(!e.path.st(s.path))break;h.u(n)<=0||c instanceof Nt&&le(e,c)&&(r=r.Ht(c.key,c))}return sr.resolve(r)},t.prototype.Gc=function(t,e){return sr.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Or=function(t){return new yo(this)},t.prototype.Mr=function(t){return sr.resolve(this.size)},t}(),yo=function(t){function e(e){var n=this;return(n=t.call(this)||this).Gr=e,n}return Object(h.c)(e,t),e.prototype.Ei=function(t){var e=this,n=[];return this.oi.forEach((function(r,i){i&&i.li?n.push(e.Gr.ui(t,i.li,e.ai(r))):e.Gr._i(r)})),sr.$n(n)},e.prototype.di=function(t,e){return this.Gr.fi(t,e)},e.prototype.wi=function(t,e){return this.Gr.getEntries(t,e)},e}(di),mo=function(){function t(t){this.persistence=t,this.zc=new pi((function(t){return xt(t)}),Rt),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new fo,this.targetCount=0,this.Yc=Ei.$i()}return t.prototype.mn=function(t,e){return this.zc.forEach((function(t,n){return e(n)})),sr.resolve()},t.prototype.Ki=function(t){return sr.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ji=function(t){return sr.resolve(this.Hc)},t.prototype.qi=function(t){return this.highestTargetId=this.Yc.next(),sr.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),sr.resolve()},t.prototype.zi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new Ei(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.Gi=function(t,e){return this.zi(e),this.targetCount+=1,sr.resolve()},t.prototype.Ji=function(t,e){return this.zi(e),sr.resolve()},t.prototype.Yi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,sr.resolve()},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach((function(u,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.zc.delete(u),o.push(r.Xi(t,s.targetId)),i++)})),sr.$n(o).next((function(){return i}))},t.prototype.tr=function(t){return sr.resolve(this.targetCount)},t.prototype.er=function(t,e){var n=this.zc.get(e)||null;return sr.resolve(n)},t.prototype.nr=function(t,e,n){return this.Jc.Nc(e,n),sr.resolve()},t.prototype.ir=function(t,e,n){this.Jc.Fc(e,n);var r=this.persistence.Ii,i=[];return r&&e.forEach((function(e){i.push(r.Oi(t,e))})),sr.$n(i)},t.prototype.Xi=function(t,e){return this.Jc.kc(e),sr.resolve()},t.prototype.cr=function(t,e){var n=this.Jc.Lc(e);return sr.resolve(n)},t.prototype.ki=function(t,e){return sr.resolve(this.Jc.ki(e))},t}(),bo=function(){function t(t,e){var n=this;this.Xc={},this.io=new K(0),this.ro=!1,this.ro=!0,this.Ii=t(this),this.fo=new mo(this),this.Ti=new oi,this.wo=function(t,e){return new go(t,(function(t){return n.Ii.Zc(t)}))}(this.Ti),this.Kt=new Wr(e),this.Eo=new lo(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Lo=function(){return this.ro=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.yo=function(){},t.prototype.Vo=function(){},t.prototype.jo=function(){return this.Ti},t.prototype.Ko=function(t){var e=this.Xc[t.R()];return e||(e=new vo(this.Ti,this.Ii),this.Xc[t.R()]=e),e},t.prototype.Dr=function(){return this.fo},t.prototype.Fr=function(){return this.wo},t.prototype.Wo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r=this;d("MemoryPersistence","Starting transaction:",t);var i=new _o(this.io.next());return this.Ii.ta(),n(i).next((function(t){return r.Ii.ea(i).next((function(){return t}))})).Mn().then((function(t){return i.ps(),t}))},t.prototype.na=function(t,e){return sr.Bn(Object.values(this.Xc).map((function(n){return function(){return n.ki(t,e)}})))},t}(),_o=function(t){function e(e){var n=this;return(n=t.call(this)||this).vs=e,n}return Object(h.c)(e,t),e}(_r),wo=function(){function t(t){this.persistence=t,this.sa=new fo,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw _()},enumerable:!1,configurable:!0}),t.prototype.sr=function(t,e,n){return this.sa.sr(n,e),this.oa.delete(n.toString()),sr.resolve()},t.prototype.rr=function(t,e,n){return this.sa.rr(n,e),this.oa.add(n.toString()),sr.resolve()},t.prototype.Oi=function(t,e){return this.oa.add(e.toString()),sr.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach((function(t){return n.oa.add(t.toString())}));var r=this.persistence.Dr();return r.cr(t,e.targetId).next((function(t){t.forEach((function(t){return n.oa.add(t.toString())}))})).next((function(){return r.Yi(t,e)}))},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.Fr().Or();return sr.forEach(this.oa,(function(r){var i=J.ft(r);return e.ca(t,i).next((function(t){t||n._i(i)}))})).next((function(){return e.ia=null,n.apply(t)}))},t.prototype.kr=function(t,e){var n=this;return this.ca(t,e).next((function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())}))},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return sr.Bn([function(){return sr.resolve(n.sa.ki(e))},function(){return n.persistence.Dr().ki(t,e)},function(){return n.persistence.na(t,e)}])},t}();function Eo(t,e){return"firestore_clients_"+t+"_"+e}function Io(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function To(t,e){return"firestore_targets_"+t+"_"+e}var Oo=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),u=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(u=new A(i.error.code,i.error.message)),o?new t(e,n,i.state,u):(v("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),So=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new A(r.error.code,r.error.message)),i?new t(e,r.state,o):(v("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Co=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=vn(),u=0;i&&u<r.activeTargetIds.length;++u)i=ht(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return i?new t(e,o):(v("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),No=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(v("SharedClientState","Failed to parse online state: "+e),null)},t}(),ko=function(){function t(){this.activeTargetIds=vn()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ao=function(){function t(t,e,n,r,i){this.window=t,this.eo=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new Ze(O),this.Tr=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=Eo(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new ko),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.jn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,u,s,a,c,l,f=this;return Object(h.d)(this,(function(h){switch(h.label){case 0:return[4,this.fa.Qo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(Eo(this.persistenceKey,r)))&&(o=Co.aa(r,i))&&(this.Ta=this.Ta.Ht(o.clientId,o));for(this.pa(),(u=this.storage.getItem(this.ga))&&(s=this.ba(u))&&this.va(s),a=0,c=this.Ia;a<c.length;a++)l=c[a],this.Ea(l);return this.Ia=[],this.window.addEventListener("unload",(function(){return f.Lo()})),this.Tr=!0,[2]}}))}))},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Oa=function(t,e,n){this.Na(t,e,n),this.Fa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(To(this.persistenceKey,t));if(n){var r=So.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(To(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach((function(t){r.Fa(t)})),this.currentUser=t,n.forEach((function(t){r.xa(t)}))},t.prototype.Ka=function(t){this.ja(t)},t.prototype.Wa=function(){this.Ga()},t.prototype.Lo=function(){this.Tr&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Tr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return d("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){d("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){d("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(d("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void v("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.eo.bo((function(){return Object(h.b)(e,void 0,void 0,(function(){var t,e,r,i,o,u;return Object(h.d)(this,(function(s){if(this.Tr){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(o=this.ba(n.newValue)))return[2,this.va(o)]}else if(n.key===this.Aa)(u=function(t){var e=K.U;if(null!=t)try{var n=JSON.parse(t);w("number"==typeof n),e=n}catch(t){v("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==K.U&&this.L(u);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new Oo(this.currentUser,t,e,n),i=Io(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Fa=function(t){var e=Io(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ja=function(t){var e={clientId:this._a,onlineState:t};this.storage.setItem(this.ga,JSON.stringify(e))},t.prototype.Ua=function(t,e,n){var r=To(this.persistenceKey,t),i=new So(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return Co.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Oo.aa(new M(i),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return So.aa(r,e)},t.prototype.ba=function(t){return No.aa(t)},t.prototype.Xa=function(t){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(d("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),u=[],s=[];return o.forEach((function(t){i.has(t)||u.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.fa.iu(u,s).then((function(){n.Ta=r}))},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=vn();return t.forEach((function(t,n){e=e.ye(n.activeTargetIds)})),e},t}(),jo=function(){function t(){this.ru=new ko,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Oa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new ko,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.Lo=function(){},t.prototype.q=function(t){},t.prototype.Wa=function(){},t}(),Po=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.Lo=function(){},t}(),xo=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.Lo=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.jn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ro={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Do=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),Lo=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return Object(h.c)(e,t),e.prototype.Du=function(t,e,n,r){return new Promise((function(i,o){var u=new c.f;u.listenOnce(c.c.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case c.a.NO_ERROR:var e=u.getResponseJson();d("Connection","XHR received:",JSON.stringify(e)),i(e);break;case c.a.TIMEOUT:d("Connection",'RPC "'+t+'" timed out'),o(new A(k.DEADLINE_EXCEEDED,"Request time out"));break;case c.a.HTTP_ERROR:var n=u.getStatus();if(d("Connection",'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(e)>=0?e:k.UNKNOWN}(r.status);o(new A(s,r.message))}else o(new A(k.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new A(k.UNAVAILABLE,"Connection failed."));break;default:_()}}finally{d("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);u.send(e,"POST",s,n,15)}))},e.prototype.xu=function(t,e){var n=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Object(c.g)(),h=Object(c.h)(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(l.initMessageHeaders,e),Object(o.x)()||Object(o.A)()||Object(o.t)()||Object(o.v)()||Object(o.B)()||Object(o.s)()||(l.httpHeadersOverwriteParam="$httpHeaders");var f=n.join("");d("Connection","Creating WebChannel: "+f,l);var g=r.createWebChannel(f,l),v=!1,b=!1,m=new Do({du:function(t){b?d("Connection","Not sending because WebChannel is closed:",t):(v||(d("Connection","Opening WebChannel transport."),g.open(),v=!0),d("Connection","WebChannel sending:",t),g.send(t))},wu:function(){return g.close()}}),_=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return _(g,c.e.EventType.OPEN,(function(){b||d("Connection","WebChannel transport opened.")})),_(g,c.e.EventType.CLOSE,(function(){b||(b=!0,d("Connection","WebChannel transport closed"),m.Pu())})),_(g,c.e.EventType.ERROR,(function(t){b||(b=!0,y("Connection","WebChannel transport errored:",t),m.Pu(new A(k.UNAVAILABLE,"The operation could not be completed")))})),_(g,c.e.EventType.MESSAGE,(function(t){var e;if(!b){var n=t.data[0];w(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){d("Connection","WebChannel received error:",i);var o=i.status,u=function(t){var e=We[t];if(void 0!==e)return $e(e)}(o),s=i.message;void 0===u&&(u=k.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),b=!0,m.Pu(new A(u,s)),g.close()}else d("Connection","WebChannel received:",n),m.yu(n)}})),_(h,c.b.STAT_EVENT,(function(t){t.stat===c.d.PROXY?d("Connection","Detected buffering proxy"):t.stat===c.d.NOPROXY&&d("Connection","Detected no buffering proxy")})),setTimeout((function(){m.Ru()}),0),m},e}(function(){function t(t){this.gu=t,this.T=t.T;var e=t.ssl?"https":"http";this.Vu=e+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);d("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then((function(t){return d("RestConnection","Received: ",t),t}),(function(e){throw y("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.2",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){var n=Ro[t];return this.Vu+"/v1/"+e+":"+n},t}());function Mo(){return"undefined"!=typeof window?window:null}function Fo(){return"undefined"!=typeof document?document:null}function Uo(t){return new An(t,!0)}var Vo=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.eo=t,this.ds=e,this.Nu=n,this.Ou=r,this.Fu=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Fu},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.eo.Ir(this.ds,i,(function(){return e.Lu=Date.now(),t()})),this.ku*=this.Ou,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Fu&&(this.ku=this.Fu)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),qo=function(){function t(t,e,n,r,i,o){this.eo=t,this.Qu=n,this.Ku=r,this.ju=i,this.listener=o,this.state=0,this.Wu=0,this.Gu=null,this.stream=null,this.zu=new Vo(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.eo.Ir(this.Qu,6e4,(function(){return t.th()})))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(t){return this.Ju()?[2,this.close(0)]:[2]}))}))},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.Wu++,3!==t?this.zu.reset():e&&e.code===k.RESOURCE_EXHAUSTED?(v(e.toString()),v("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===k.UNAUTHENTICATED&&this.ju.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.Wu),n=this.Wu;this.ju.getToken().then((function(e){t.Wu===n&&t.rh(e)}),(function(n){e((function(){var e=new A(k.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)}))}))},t.prototype.rh=function(t){var e=this,n=this.ih(this.Wu);this.stream=this.ah(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream.Iu((function(t){n((function(){return e.oh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu((function(){return Object(h.b)(t,void 0,void 0,(function(){return Object(h.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.oh=function(t){return d("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.eo.ys((function(){return e.Wu===t?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Bo=function(t){function e(e,n,r,i,o){var u=this;return(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,u}return Object(h.c)(e,t),e.prototype.ah=function(t){return this.Ku.xu("Listen",t)},e.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:_()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(w(void 0===e||"string"==typeof e),N.fromBase64String(e||"")):(w(void 0===e||e instanceof Uint8Array),N.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),u=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?k.UNKNOWN:$e(t.code);return new A(e,t.message||"")}(s);n=new In(r,i,o,u||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Fn(t,r.document.name),o=Rn(r.document.updateTime);var s=new Tt({mapValue:{fields:r.document.fields}}),a=(u=new Nt(i,o,s,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new wn(a,c,u.key,u)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Fn(t,r.document),o=r.readTime?Rn(r.readTime):W.min(),s=new kt(i,o),u=r.removedTargetIds||[],n=new wn([],u,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Fn(t,r.document),o=r.removedTargetIds||[],n=new wn([],o,i,null);else{if(!("filter"in e))return _();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Je(r),o=h.targetId,n=new En(o,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return W.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?W.min():e.readTime?Rn(e.readTime):W.min()}(t);return this.listener.uh(e,n)},e.prototype.hh=function(t){var e={};e.database=qn(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=Dt(r)?{documents:Wn(t,r)}:{query:Gn(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=Pn(t,e.resumeToken):e.Mt.u(W.min())>0&&(n.readTime=jn(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(this.Kt,t);n&&(e.labels=n),this.eh(e)},e.prototype.lh=function(t){var e={};e.database=qn(this.Kt),e.removeTarget=t,this.eh(e)},e}(qo),Ho=function(t){function e(e,n,r,i,o){var u=this;return(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,u._h=!1,u}return Object(h.c)(e,t),Object.defineProperty(e.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.sh=function(){this._h&&this.dh([])},e.prototype.ah=function(t){return this.Ku.xu("Write",t)},e.prototype.onMessage=function(t){if(w(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(w(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Rn(t.updateTime):Rn(e);n.isEqual(W.min())&&(n=Rn(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new je(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Rn(t.commitTime);return this.listener.wh(n,e)}return w(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},e.prototype.Th=function(){var t={};t.database=qn(this.Kt),this.eh(t)},e.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return zn(e.Kt,t)}))};this.eh(n)},e}(qo),Ko=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return Object(h.c)(e,t),e.prototype.mh=function(){if(this.Ih)throw new A(k.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.bu(t,e,n,i)})).catch((function(t){throw t.code===k.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.Cu(t,e,n,i)})).catch((function(t){throw t.code===k.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.terminate=function(){this.Ih=!1},e}((function(){})),zo=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.Ir("online_state_timeout",1e4,(function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()})))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(v(e),this.Ph=!1):d("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),Wo=function(t,e,n,r,i){var o=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Oh=new Set,this.Fh=[],this.kh=i,this.kh.cu((function(t){n.ys((function(){return Object(h.b)(o,void 0,void 0,(function(){return Object(h.d)(this,(function(t){switch(t.label){case 0:return es(this)?(d("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return(e=E(t)).Oh.add(4),[4,Qo(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Oh.delete(4),[4,Go(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Mh=new zo(n,r)};function Go(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:if(!es(t))return[3,4];e=0,n=t.Fh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Qo(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.Fh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Yo(t,e){var n=E(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),ts(n)?Zo(n):gs(n).Ju()&&Xo(n,e))}function Jo(t,e){var n=E(t),r=gs(n);n.Nh.delete(e),r.Ju()&&$o(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():es(n)&&n.Mh.set("Unknown"))}function Xo(t,e){t.Lh.cn(e.targetId),gs(t).hh(e)}function $o(t,e){t.Lh.cn(e),gs(t).lh(e)}function Zo(t){t.Lh=new On({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),gs(t).start(),t.Mh.yh()}function ts(t){return es(t)&&!gs(t).Hu()&&t.Nh.size>0}function es(t){return 0===E(t).Oh.size}function ns(t){t.Lh=void 0}function rs(t){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(e){return t.Nh.forEach((function(e,n){Xo(t,e)})),[2]}))}))}function is(t,e){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(n){return ns(t),ts(t)?(t.Mh.ph(e),Zo(t)):t.Mh.set("Unknown"),[2]}))}))}function os(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i,o;return Object(h.d)(this,(function(u){switch(u.label){case 0:if(t.Mh.set("Online"),!(e instanceof In&&2===e.state&&e.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(h.d)(this,(function(u){switch(u.label){case 0:n=e.cause,r=0,i=e.targetIds,u.label=1;case 1:return r<i.length?(o=i[r],t.Nh.has(o)?[4,t.Ch.$h(o,n)]:[3,3]):[3,5];case 2:u.sent(),t.Nh.delete(o),t.Lh.removeTarget(o),u.label=3;case 3:u.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return u.sent(),[3,5];case 3:return r=u.sent(),d("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ss(t,r)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof wn?t.Lh.wn(e):e instanceof En?t.Lh.yn(e):t.Lh.In(e),n.isEqual(W.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,Zi(t.Sh)];case 8:return i=u.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Fe.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}})),n.ke.forEach((function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(N.h,n.Mt)),$o(t,e);var r=new de(n.target,e,1,n.sequenceNumber);Xo(t,r)}})),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return d("RemoteStore","Failed to raise snapshot:",o=u.sent()),[4,ss(t,o)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function ss(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r=this;return Object(h.d)(this,(function(i){switch(i.label){case 0:if(!lr(e))throw e;return t.Oh.add(1),[4,Qo(t)];case 1:return i.sent(),t.Mh.set("Offline"),n||(n=function(){return Zi(t.Sh)}),t.fs.bo((function(){return Object(h.b)(r,void 0,void 0,(function(){return Object(h.d)(this,(function(e){switch(e.label){case 0:return d("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Oh.delete(1),[4,Go(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function as(t,e){return e().catch((function(n){return ss(t,n,e)}))}function us(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(h.d)(this,(function(u){switch(u.label){case 0:e=E(t),n=ys(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,u.label=1;case 1:if(!function(t){return es(t)&&t.xh.length<10}(e))return[3,7];u.label=2;case 2:return u.trys.push([2,4,,6]),[4,no(e.Sh,r)];case 3:return null===(i=u.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=ys(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return o=u.sent(),[4,ss(e,o)];case 5:return u.sent(),[3,6];case 6:return[3,1];case 7:return cs(e)&&hs(e),[2]}}))}))}function cs(t){return es(t)&&!ys(t).Hu()&&t.xh.length>0}function hs(t){ys(t).start()}function ls(t){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(e){return ys(t).Th(),[2]}))}))}function fs(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n,r,i;return Object(h.d)(this,(function(o){for(e=ys(t),n=0,r=t.xh;n<r.length;n++)i=r[n],e.dh(i.mutations);return[2]}))}))}function ps(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:return r=t.xh.shift(),i=zr.from(r,e,n),[4,as(t,(function(){return t.Ch.qh(i)}))];case 1:return o.sent(),[4,us(t)];case 2:return o.sent(),[2]}}))}))}function ds(t,e){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(n){switch(n.label){case 0:return e&&ys(t).fh?[4,function(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return Xe(r=e.code)&&r!==k.ABORTED?(n=t.xh.shift(),ys(t).Xu(),[4,as(t,(function(){return t.Ch.Uh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,us(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return cs(t)&&hs(t),[2]}}))}))}function vs(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(i){switch(i.label){case 0:return n=E(t),e?(n.Oh.delete(2),[4,Go(n)]):[3,2];case 1:return i.sent(),[3,5];case 2:return e?[3,4]:(n.Oh.add(2),[4,Qo(n)]);case 3:i.sent(),n.Mh.set("Unknown"),i.label=4;case 4:i.label=5;case 5:return[2]}}))}))}function gs(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=E(t);return r.mh(),new Bo(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:rs.bind(null,t),Iu:is.bind(null,t),uh:os.bind(null,t)}),t.Fh.push((function(n){return Object(h.b)(e,void 0,void 0,(function(){return Object(h.d)(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),ts(t)?Zo(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),ns(t),e.label=3;case 3:return[2]}}))}))}))),t.Qh}function ys(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=E(t);return r.mh(),new Ho(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:ls.bind(null,t),Iu:ds.bind(null,t),Eh:fs.bind(null,t),wh:ps.bind(null,t)}),t.Fh.push((function(n){return Object(h.b)(e,void 0,void 0,(function(){return Object(h.d)(this,(function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,us(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(d("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kh}var ms=function(){this.jh=void 0,this.listeners=[]},bs=function(){this.queries=new pi((function(t){return ce(t)}),ue),this.onlineState="Unknown",this.Wh=new Set};function _s(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o,u,s,a;return Object(h.d)(this,(function(c){switch(c.label){case 0:if(n=E(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new ms),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),u=o,[4,n.Gh(r)];case 2:return u.jh=c.sent(),[3,4];case 3:return s=c.sent(),a=yr(s,"Initialization of query '"+he(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zh(n.onlineState),o.jh&&e.Hh(o.jh)&&Ts(n),[2]}}))}))}function ws(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o,u;return Object(h.d)(this,(function(s){return n=E(t),r=e.query,i=!1,(o=n.queries.get(r))&&(u=o.listeners.indexOf(e))>=0&&(o.listeners.splice(u,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]}))}))}function Es(t,e){for(var n=E(t),r=!1,i=0,o=e;i<o.length;i++){var u=o[i],s=u.query,a=n.queries.get(s);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].Hh(u)&&(r=!0);a.jh=u}}r&&Ts(n)}function Is(t,e,n){var r=E(t),i=r.queries.get(e);if(i)for(var o=0,u=i.listeners;o<u.length;o++)u[o].onError(n);r.queries.delete(e)}function Ts(t){t.Wh.forEach((function(t){t.next()}))}var Os=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new mn(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.sl&&n||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){if(t.docChanges.length>0)return!0;var e=this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites;return!(!t.xe&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=mn.Oe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),Ss=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.il=function(){return"metadata"in this.payload},t}(),Cs=function(){function t(t){this.Kt=t}return t.prototype.yc=function(t){return Fn(this.Kt,t)},t.prototype.gc=function(t){return t.metadata.exists?Kn(this.Kt,t.document,!1):new kt(this.yc(t.metadata.name),this.Vc(t.metadata.readTime))},t.prototype.Vc=function(t){return Rn(t)},t}(),Ns=function(){function t(t,e,n){this.rl=t,this.Sh=e,this.Kt=n,this.queries=[],this.documents=[],this.progress=ks(t)}return t.prototype.ol=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.cl=function(t){for(var e=new Map,n=new Cs(this.Kt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var u=n.yc(o.metadata.name),s=0,a=o.metadata.queries;s<a.length;s++){var c=a[s],h=(e.get(c)||pn()).add(u);e.set(c,h)}}return e},t.prototype.complete=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:return[4,co(this.Sh,new Cs(this.Kt),this.documents,this.rl.id)];case 1:t=o.sent(),e=this.cl(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,ho(this.Sh,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new zi(Object.assign({},this.progress),t))]}}))}))},t}();function ks(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var As=function(t){this.key=t},js=function(t){this.key=t},Ps=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=pn(),this.Ce=pn(),this.ll=fe(t),this._l=new gn(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new yn,i=e?e._l:this._l,o=e?e.Ce:this.Ce,u=i,s=!1,a=te(this.query)&&i.size===this.query.limit?i.last():null,c=ee(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt((function(t,e){var h=i.get(t),l=e instanceof Nt?e:null;l&&(l=le(n.query,l)?l:null);var f=!!h&&n.Ce.has(h.key),p=!!l&&(l.bt||n.Ce.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.El(h,l)||(r.track({type:2,doc:l}),d=!0,(a&&n.ll(l,a)>0||c&&n.ll(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(s=!0)),d&&(l?(u=u.add(l),o=p?o.add(t):o.delete(t)):(u=u.delete(t),o=o.delete(t)))})),te(this.query)||ee(this.query))for(;u.size>this.query.limit;){var h=te(this.query)?u.last():u.first();u=u.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{_l:u,wl:r,_c:s,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ei=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)})),this.Tl(n);var u=e?this.Il():[],s=0===this.hl.size&&this.qe?1:0,a=s!==this.ul;return this.ul=s,0!==o.length||a?{snapshot:new mn(this.query,t._l,i,o,t.Ce,0===s,a,!1),ml:u}:{ml:u}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ei({_l:this._l,wl:new yn,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach((function(t){return e.al=e.al.add(t)})),t.Qe.forEach((function(t){})),t.Ke.forEach((function(t){return e.al=e.al.delete(t)})),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=pn(),this._l.forEach((function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))}));var n=[];return e.forEach((function(e){t.hl.has(e)||n.push(new js(e))})),this.hl.forEach((function(t){e.has(t)||n.push(new As(t))})),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=pn();var e=this.dl(t.documents);return this.Ei(e,!0)},t.prototype.Pl=function(){return mn.Oe(this.query,this._l,this.Ce,0===this.ul)},t}(),xs=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Rs=function(t){this.key=t,this.yl=!1},Ds=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new pi((function(t){return ce(t)}),ue),this.Dl=new Map,this.Cl=[],this.xl=new Ze(J.J),this.Nl=new Map,this.Ol=new fo,this.Fl={},this.kl=new Map,this.Ml=Ei.Bi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();function Ls(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o,u,s;return Object(h.d)(this,(function(a){switch(a.label){case 0:return n=la(t),(o=n.Sl.get(e))?(r=o.targetId,n.pl.ka(r),i=o.view.Pl(),[3,4]):[3,1];case 1:return[4,ro(n.Sh,se(e))];case 2:return u=a.sent(),s=n.pl.ka(u.targetId),r=u.targetId,[4,Ms(n,e,r,"current"===s)];case 3:i=a.sent(),n.$l&&Yo(n.gl,u),a.label=4;case 4:return[2,i]}}))}))}function Ms(t,e,n,r){return Object(h.b)(this,void 0,void 0,(function(){var i,o,u,s,a,c;return Object(h.d)(this,(function(l){switch(l.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return Object(h.b)(this,void 0,void 0,(function(){var i,o,u;return Object(h.d)(this,(function(s){switch(s.label){case 0:return(i=e.view.dl(n))._c?[4,oo(t.Sh,e.query,!1).then((function(t){var n=t.documents;return e.view.dl(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.Fe.get(e.targetId),u=e.view.Ei(i,t.$l,o),[2,(Js(t,e.targetId,u.ml),u.snapshot)]}}))}))}(t,e,n,r)},[4,oo(t.Sh,e,!0)];case 1:return i=l.sent(),o=new Ps(e,i.Pc),u=o.dl(i.documents),s=_n.Be(n,r&&"Offline"!==t.onlineState),a=o.Ei(u,t.$l,s),Js(t,n,a.ml),c=new xs(e,n,o),[2,(t.Sl.set(e,c),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),a.snapshot)]}}))}))}function Fs(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:return n=E(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter((function(t){return!ue(t,e)}))),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,io(n.Sh,r.targetId,!1).then((function(){n.pl.Ba(r.targetId),Jo(n.gl,r.targetId),Qs(n,r.targetId)})).catch(fi)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Qs(n,r.targetId),[4,io(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Us(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i,o,u;return Object(h.d)(this,(function(s){switch(s.label){case 0:r=fa(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=E(t),i=z.now(),o=e.reduce((function(t,e){return t.add(e.key)}),pn());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ic.Zo(t,o).next((function(o){n=o;for(var u=[],s=0,a=e;s<a.length;s++){var c=a[s],h=Me(c,n.get(c.key));null!=h&&u.push(new qe(c.key,h,St(h.proto.mapValue),Pe.exists(!0)))}return r.Ho.Pi(t,i,u,e)}))})).then((function(t){var e=t.Ns(n);return{batchId:t.batchId,oi:e}}))}(r.Sh,e)];case 2:return i=s.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Fl[t.currentUser.R()];r||(r=new Ze(O)),r=r.Ht(e,n),t.Fl[t.currentUser.R()]=r}(r,i.batchId,n),[4,Zs(r,i.oi)];case 3:return s.sent(),[4,us(r.gl)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),u=yr(o,"Failed to persist write"),n.reject(u),[3,6];case 6:return[2]}}))}))}function Vs(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:n=E(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,to(n.Sh,e)];case 2:return r=i.sent(),e.Fe.forEach((function(t,e){var r=n.Nl.get(e);r&&(w(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?w(r.yl):t.Ke.size>0&&(w(r.yl),r.yl=!1))})),[4,Zs(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,fi(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function qs(t,e,n){var r=E(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach((function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=E(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)})),r&&Ts(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function Bs(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i,o,u,s,a;return Object(h.d)(this,(function(c){switch(c.label){case 0:return(r=E(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(o=i&&i.key)?(u=(u=new Ze(J.J)).Ht(o,new kt(o,W.min())),s=pn().add(o),a=new bn(W.min(),new Map,new nn(O),u,s),[4,Vs(r,a)]):[3,2];case 1:return c.sent(),r.xl=r.xl.remove(o),r.Nl.delete(e),$s(r),[3,4];case 2:return[4,io(r.Sh,e,!1).then((function(){return Qs(r,e,n)})).catch(fi)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Hs(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:n=E(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,$i(n.Sh,e)];case 2:return i=o.sent(),Gs(n,r,null),Ws(n,r),n.pl.Oa(r,"acknowledged"),[4,Zs(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,fi(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ks(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:r=E(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=E(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ho.yi(t,e).next((function(e){return w(null!==e),r=e.keys(),n.Ho.xi(t,e)})).next((function(){return n.Ho.Fi(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}(r.Sh,e)];case 2:return i=o.sent(),Gs(r,e,n),Ws(r,e),r.pl.Oa(e,"rejected",n),[4,Zs(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,fi(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function zs(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o,u;return Object(h.d)(this,(function(s){switch(s.label){case 0:es((n=E(t)).gl)||d("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=E(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ho.pi(t)}))}(n.Sh)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return o=s.sent(),u=yr(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(u),[3,4];case 4:return[2]}}))}))}function Ws(t,e){(t.kl.get(e)||[]).forEach((function(t){t.resolve()})),t.kl.delete(e)}function Gs(t,e,n){var r=E(t),i=r.Fl[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Fl[r.currentUser.R()]=i}}function Qs(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Ol.kc(e).forEach((function(e){t.Ol.ki(e)||Ys(t,e)}))}function Ys(t,e){var n=t.xl.get(e);null!==n&&(Jo(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),$s(t))}function Js(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof As?(t.Ol.sr(o.key,e),Xs(t,o)):o instanceof js?(d("SyncEngine","Document no longer in limbo: "+o.key),t.Ol.rr(o.key,e),t.Ol.ki(o.key)||Ys(t,o.key)):_()}}function Xs(t,e){var n=e.key;t.xl.get(n)||(d("SyncEngine","New document in limbo: "+n),t.Cl.push(n),$s(t))}function $s(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new Rs(e)),t.xl=t.xl.Ht(e,n),Yo(t.gl,new de(se(Zt(e.path)),n,2,K.U))}}function Zs(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i,o,u;return Object(h.d)(this,(function(s){switch(s.label){case 0:return r=E(t),i=[],o=[],u=[],r.Sl.nt()?[3,3]:(r.Sl.forEach((function(t,s){u.push(r.Bl(s,e,n).then((function(t){if(t){r.$l&&r.pl.qa(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Gi.cc(s.targetId,t);o.push(e)}})))})),[4,Promise.all(u)]);case 1:return s.sent(),r.vl.uh(i),[4,function(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o,u,s,a,c,l;return Object(h.d)(this,(function(h){switch(h.label){case 0:n=E(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return sr.forEach(e,(function(e){return sr.forEach(e.rc,(function(r){return n.persistence.Ii.sr(t,e.targetId,r)})).next((function(){return sr.forEach(e.oc,(function(r){return n.persistence.Ii.rr(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!lr(r=h.sent()))throw r;return d("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)u=o[i],s=u.targetId,u.fromCache||(a=n.dc.get(s),c=a.Mt,l=a.Bt(c),n.dc=n.dc.Ht(s,l));return[2]}}))}))}(r.Sh,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function ta(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return(n=E(t)).currentUser.isEqual(e)?[3,3]:(d("SyncEngine","User change. New user:",e.R()),[4,Xi(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach((function(t){t.forEach((function(t){t.reject(new A(k.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,Zs(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function ea(t,e){var n=E(t),r=n.Nl.get(e);if(r&&r.yl)return pn().add(r.key);var i=pn(),o=n.Dl.get(e);if(!o)return i;for(var u=0,s=o;u<s.length;u++){var a=s[u],c=n.Sl.get(a);i=i.ye(c.view.fl)}return i}function na(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:return[4,oo((n=E(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&Js(n,e.targetId,i.ml),i)]}}))}))}function ra(t){return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){return[2,ao((e=E(t)).Sh).then((function(t){return Zs(e,t)}))]}))}))}function ia(t,e,n,r){return Object(h.b)(this,void 0,void 0,(function(){var i,o;return Object(h.d)(this,(function(u){switch(u.label){case 0:return[4,function(t,e){var n=E(t),r=E(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.gi(t,e).next((function(e){return e?n.Ic.Zo(t,e):sr.resolve(null)}))}))}((i=E(t)).Sh,e)];case 1:return null===(o=u.sent())?[3,6]:"pending"!==n?[3,3]:[4,us(i.gl)];case 2:return u.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Gs(i,e,r||null),Ws(i,e),function(t,e){E(E(t).Ho).Ni(e)}(i.Sh,e)):_(),u.label=4;case 4:return[4,Zs(i,o)];case 5:return u.sent(),[3,7];case 6:d("SyncEngine","Cannot apply mutation batch with id: "+e),u.label=7;case 7:return[2]}}))}))}function oa(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o,u,s,a,c;return Object(h.d)(this,(function(h){switch(h.label){case 0:return la(n=E(t)),fa(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,sa(n,r.rt())]);case 1:return i=h.sent(),n.Ll=!0,[4,vs(n.gl,!0)];case 2:for(h.sent(),o=0,u=i;o<u.length;o++)s=u[o],Yo(n.gl,s);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(a=[],c=Promise.resolve(),n.Dl.forEach((function(t,e){n.pl.$a(e)?a.push(e):c=c.then((function(){return Qs(n,e),io(n.Sh,e,!0)})),Jo(n.gl,e)})),[4,c]);case 4:return h.sent(),[4,sa(n,a)];case 5:return h.sent(),function(t){var e=E(t);e.Nl.forEach((function(t,n){Jo(e.gl,n)})),e.Ol.Mc(),e.Nl=new Map,e.xl=new Ze(J.J)}(n),n.Ll=!1,[4,vs(n.gl,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function sa(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o,u,s,a,c,l,f,d,p,v,y;return Object(h.d)(this,(function(h){switch(h.label){case 0:n=E(t),r=[],i=[],o=0,u=e,h.label=1;case 1:return o<u.length?(s=u[o],a=void 0,(c=n.Dl.get(s))&&0!==c.length?[4,ro(n.Sh,se(c[0]))]:[3,7]):[3,13];case 2:a=h.sent(),l=0,f=c,h.label=3;case 3:return l<f.length?(d=f[l],p=n.Sl.get(d),[4,na(n,p)]):[3,6];case 4:(v=h.sent()).snapshot&&i.push(v.snapshot),h.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,so(n.Sh,s)];case 8:return y=h.sent(),[4,ro(n.Sh,y)];case 9:return a=h.sent(),[4,Ms(n,aa(y),s,!1)];case 10:h.sent(),h.label=11;case 11:r.push(a),h.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}}))}))}function aa(t){return $t(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ua(t){var e=E(t);return E(E(e.Sh).persistence).Qo()}function ca(t,e,n,r){return Object(h.b)(this,void 0,void 0,(function(){var i,o,u;return Object(h.d)(this,(function(s){switch(s.label){case 0:return(i=E(t)).Ll?(d("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ao(i.Sh)];case 3:return o=s.sent(),u=bn.$e(e,"current"===n),[4,Zs(i,o,u)];case 4:return s.sent(),[3,8];case 5:return[4,io(i.Sh,e,!0)];case 6:return s.sent(),Qs(i,e,r),[3,8];case 7:_(),s.label=8;case 8:return[2]}}))}))}function ha(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i,o,u,s,a,c,l,f,v;return Object(h.d)(this,(function(p){switch(p.label){case 0:if(!(r=la(t)).Ll)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(u=o[i],r.Dl.has(u)?(d("SyncEngine","Adding an already active target "+u),[3,5]):[4,so(r.Sh,u)]):[3,6];case 2:return s=p.sent(),[4,ro(r.Sh,s)];case 3:return a=p.sent(),[4,Ms(r,aa(s),a.targetId,!1)];case 4:p.sent(),Yo(r.gl,a),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(h.d)(this,(function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,io(r.Sh,t,!1).then((function(){Jo(r.gl,t),Qs(r,t)})).catch(fi)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,f=n,p.label=7;case 7:return l<f.length?(v=f[l],[5,c(v)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function la(t){var e=E(t);return e.gl.Ch.Bh=Vs.bind(null,e),e.gl.Ch.Sn=ea.bind(null,e),e.gl.Ch.$h=Bs.bind(null,e),e.vl.uh=Es.bind(null,e.Vl),e.vl.ql=Is.bind(null,e.Vl),e}function fa(t){var e=E(t);return e.gl.Ch.qh=Hs.bind(null,e),e.gl.Ch.Uh=Ks.bind(null,e),e}function pa(t,e,n){var r=E(t);(function(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i,o,u,s,a;return Object(h.d)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=E(t),r=Rn(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.Eo.Ms(t,e.id)})).then((function(t){return!!t&&t.createTime.u(r)>=0}))}(t.Sh,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n.Ul(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n.Ql(ks(r)),i=new Ns(r,t.Sh,e.Kt),[4,e.Kl()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.ol(o)]:[3,10];case 7:return(u=c.sent())&&n.Ql(u),[4,e.Kl()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=c.sent(),[4,Zs(t,s.zo,void 0)];case 12:return c.sent(),[4,function(t,e){var n=E(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Eo.Ls(t,e)}))}(t.Sh,r)];case 13:return c.sent(),n.Ul(s.progress),[3,15];case 14:return y("SyncEngine","Loading bundle failed with "+(a=c.sent())),n.jl(a),[3,15];case 15:return[2]}}))}))})(r,e,n).then((function(){r.pl.Wa()}))}var da=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(e){switch(e.label){case 0:return this.Kt=Uo(t.gu.T),this.pl=this.Wl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Ji(this.persistence,new Qi,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new bo(wo.ra,this.Kt)},t.prototype.Wl=function(t){return new jo},t.prototype.terminate=function(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.Lo()];case 1:return t.sent(),[4,this.persistence.Lo()];case 2:return t.sent(),[2]}}))}))},t}(),va=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(h.c)(e,t),e.prototype.initialize=function(e){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,uo(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,fa(this.Xl.fa)];case 4:return n.sent(),[4,us(this.Xl.gl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return Ji(this.persistence,new Qi,t.Yl,this.Kt)},e.prototype.Hl=function(t){var e=this.persistence.Ii._r;return new ki(e,t.fs)},e.prototype.Gl=function(t){var e=Ki(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?hi.Xs(this.cacheSizeBytes):hi.ei;return new qi(this.synchronizeTabs,e,t.clientId,n,t.fs,Mo(),Fo(),this.Kt,this.pl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new jo},e}(da),ga=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(h.c)(e,t),e.prototype.initialize=function(e){return Object(h.b)(this,void 0,void 0,(function(){var n,r=this;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.fa,this.pl instanceof Ao?(this.pl.fa={nu:ia.bind(null,n),su:ca.bind(null,n),iu:ha.bind(null,n),Qo:ua.bind(null,n),eu:ra.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Po((function(t){return Object(h.b)(r,void 0,void 0,(function(){return Object(h.d)(this,(function(e){switch(e.label){case 0:return[4,oa(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Tr?this.zl.start(this.Sh):t||this.zl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=Mo();if(!Ao.jn(e))throw new A(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ki(t.gu.T,t.gu.persistenceKey);return new Ao(e,t.fs,n,t.clientId,t.Yl)},e}(va),ya=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n=this;return Object(h.d)(this,(function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return qs(n.fa,t,1)},this.gl.Ch.s_=ta.bind(null,this.fa),[4,vs(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new bs},t.prototype.Zl=function(t){var e,n=Uo(t.gu.T),r=(e=t.gu,new Lo(e));return function(t,e,n){return new Ko(t,e,n)}(t.credentials,r,n)},t.prototype.t_=function(t){var e,n,r,i,o,u=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return qs(u.fa,t,0)},o=xo.jn()?new xo:new Po,new Wo(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,u){var s=new Ds(t,e,n,r,i,o);return u&&(s.Ll=!0),s}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return e=E(t),d("RemoteStore","RemoteStore shutting down."),e.Oh.add(5),[4,Qo(e)];case 1:return n.sent(),e.kh.Lo(),e.Mh.set("Unknown"),[2]}}))}))}(this.gl)},t}();function ma(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(h.b)(this,void 0,void 0,(function(){var r;return Object(h.d)(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(t){return[2]}))}))},releaseLock:function(){}}}var ba=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),_a=function(){function t(t,e){var n=this;this.o_=t,this.Kt=e,this.metadata=new or,this.buffer=new Uint8Array,this.c_=new TextDecoder("utf-8"),this.a_().then((function(t){t&&t.il()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.o_.cancel()},t.prototype.getMetadata=function(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Kl=function(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.a_())]}}))}))},t.prototype.a_=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,this.u_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.c_.decode(t),n=Number(e),isNaN(n)&&this.h_("length string ("+e+") is not valid number"),[4,this.l_(n)]);case 2:return r=i.sent(),[2,new Ss(JSON.parse(r),t.length+n)]}}))}))},t.prototype.__=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.u_=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return this.__()<0?[4,this.f_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.__())<0&&this.h_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.l_=function(t){return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.f_()]:[3,3];case 1:n.sent()&&this.h_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.c_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.h_=function(t){throw this.o_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.f_=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return[4,this.o_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),wa=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new A(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new rt(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}(),Ea=function(t){this._methodName=t};function Ia(t,e,n){if(!n)throw new A(k.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ta(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new A(k.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Oa(t,e,n,r){if(!0===e&&!0===r)throw new A(k.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Sa(t){if(!J.Et(t))throw new A(k.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Ca(t){if(J.Et(t))throw new A(k.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Na(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":_()}function ka(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new A(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Na(t);throw new A(k.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Aa(t,e){if(e<=0)throw new A(k.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var ja=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new A(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new A(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Oa("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Pa=new Map,xa=function(){function t(t,e){this.w_="(lite)",this.E_=new ja({}),this.T_=!1,t instanceof L?(this.I_=t,this.m_=new U):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new A(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new L(t.options.projectId)}(t),this.m_=new V(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new A(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new A(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new ja(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new U;switch(t.type){case"gapi":var e=t.client;return w(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new H(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new A(k.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.b_=function(){return this,(t=Pa.get(this))&&(d("ComponentProvider","Removing Datastore"),Pa.delete(this),t.terminate()),Promise.resolve();var t},t}(),Ra=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new La(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Da=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),La=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Zt(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(h.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new Ra(this.firestore,null,new J(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Da);function Ma(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof q&&(t=t._),Ia("collection","path",e),t instanceof xa)return Ca(n=Q.ct.apply(Q,Object(h.g)([e],r))),new La(t,null,n);if(!(t instanceof Ra||t instanceof La))throw new A(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ca(n=Q.ct.apply(Q,Object(h.g)([t.path],r)).child(Q.ct(e))),new La(t.firestore,null,n)}function Fa(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof q&&(t=t._),1===arguments.length&&(e=T.t()),Ia("doc","path",e),t instanceof xa)return Sa(n=Q.ct.apply(Q,Object(h.g)([e],r))),new Ra(t,null,new J(n));if(!(t instanceof Ra||t instanceof La))throw new A(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Sa(n=t.D_.child(Q.ct.apply(Q,Object(h.g)([e],r)))),new Ra(t.firestore,t instanceof La?t.v_:null,new J(n))}function Ua(t,e){return t instanceof q&&(t=t._),e instanceof q&&(e=e._),(t instanceof Ra||t instanceof La)&&(e instanceof Ra||e instanceof La)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Va(t,e){return t instanceof q&&(t=t._),e instanceof q&&(e=e._),t instanceof Da&&e instanceof Da&&t.firestore===e.firestore&&ue(t.C_,e.C_)&&t.v_===e.v_}var qa=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new A(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new A(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return O(this.x_,t.x_)||O(this.N_,t.N_)},t}(),Ba=/^__.*__$/,Ha=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.O_=function(t,e){return null!==this.zt?new qe(t,this.data,this.zt,e,this.fieldTransforms):new Ve(t,this.data,e,this.fieldTransforms)},t}(),Ka=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.O_=function(t,e){return new qe(t,this.data,this.zt,e,this.fieldTransforms)},t}();function za(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _()}}var Wa=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.F_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.F_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return fu(t,this.settings.methodName,this.settings.j_||!1,this.path,this.settings.W_)},t.prototype.contains=function(t){return void 0!==this.zt.find((function(e){return t.st(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.st(e.field)}))},t.prototype.F_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(za(this.k_)&&Ba.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Ga=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||Uo(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Wa({k_:t,methodName:e,W_:n,path:rt.at(),B_:!1,j_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function Qa(t){var e=t.p_(),n=Uo(t.I_);return new Ga(t.I_,!!e.ignoreUndefinedProperties,n)}function Ya(t,e,n,r,i,o){void 0===o&&(o={});var u=t.G_(o.merge||o.mergeFields?2:0,e,n,i);uu("Data must be an object, but it was:",u,r);var s,a,c=su(r,u);if(o.merge)s=new tt(u.zt),a=u.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=cu(e,f[l],n);if(!u.contains(p))throw new A(k.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");pu(h,p)||h.push(p)}s=new tt(h),a=u.fieldTransforms.filter((function(t){return s.It(t.field)}))}else s=null,a=u.fieldTransforms;return new Ha(new Tt(c),s,a)}var Ja=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Ea);function Xa(t,e,n){return new Wa({k_:3,W_:e.settings.W_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var $a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.c)(e,t),e.prototype.z_=function(t){return new Ae(t.path,new Ee)},e.prototype.isEqual=function(t){return t instanceof e},e}(Ea),Za=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(h.c)(e,t),e.prototype.z_=function(t){var e=Xa(this,t,!0),n=this.H_.map((function(t){return ou(t,e)})),r=new Ie(n);return new Ae(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ea),tu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(h.c)(e,t),e.prototype.z_=function(t){var e=Xa(this,t,!0),n=this.H_.map((function(t){return ou(t,e)})),r=new Oe(n);return new Ae(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ea),eu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(h.c)(e,t),e.prototype.z_=function(t){var e=new Ce(t.Kt,ye(t.Kt,this.J_));return new Ae(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Ea);function nu(t,e,n,r){var i=t.G_(1,e,n);uu("Data must be an object, but it was:",i,r);var o=[],u=new Ot;$(r,(function(t,r){var s=lu(e,t,n);r instanceof q&&(r=r._);var a=i.U_(s);if(r instanceof Ja)o.push(s);else{var c=ou(r,a);null!=c&&(o.push(s),u.set(s,c))}}));var s=new tt(o);return new Ka(u.yt(),s,i.fieldTransforms)}function ru(t,e,n,r,i,o){var u=t.G_(1,e,n),s=[cu(e,r,n)],a=[i];if(o.length%2!=0)throw new A(k.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(cu(e,o[c])),a.push(o[c+1]);for(var h=[],l=new Ot,f=s.length-1;f>=0;--f)if(!pu(h,s[f])){var p=s[f],d=a[f];d instanceof q&&(d=d._);var v=u.U_(p);if(d instanceof Ja)h.push(p);else{var y=ou(d,v);null!=y&&(h.push(p),l.set(p,y))}}var m=new tt(h);return new Ka(l.yt(),m,u.fieldTransforms)}function iu(t,e,n,r){return void 0===r&&(r=!1),ou(n,t.G_(r?4:3,e))}function ou(t,e){if(t instanceof q&&(t=t._),au(t))return uu("Unsupported field value:",e,t),su(t,e);if(t instanceof Ea)return function(t,e){if(!za(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var u=ou(o[i],e.Q_(r));null==u&&(u={nullValue:"NULL_VALUE"}),n.push(u),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof q&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ye(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=z.fromDate(t);return{timestampValue:jn(e.Kt,n)}}if(t instanceof z)return n=new z(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:jn(e.Kt,n)};if(t instanceof qa)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof j)return{bytesValue:Pn(e.Kt,t.l)};if(t instanceof Ra){n=e.T;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Dn(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+Na(t))}(t,e)}function su(t,e){var n={};return Z(t)?e.path&&e.path.length>0&&e.zt.push(e.path):$(t,(function(t,r){var i=ou(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function au(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof z||t instanceof qa||t instanceof j||t instanceof Ra||t instanceof Ea)}function uu(t,e,n){if(!au(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Na(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function cu(t,e,n){if(e instanceof q&&(e=e._),e instanceof wa)return e.d_;if("string"==typeof e)return lu(t,e);throw fu("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var hu=new RegExp("[~\\*/\\[\\]]");function lu(t,e,n){if(e.search(hu)>=0)throw fu("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(wa.bind.apply(wa,Object(h.g)([void 0],e.split("."))))).d_}catch(r){throw fu("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function fu(t,e,n,r,i){var o=r&&!r.nt(),u=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var a="";return(o||u)&&(a+=" (found",o&&(a+=" in field "+r),u&&(a+=" in document "+i),a+=")"),new A(k.INVALID_ARGUMENT,(s+=". ")+t+a)}function pu(t,e){return t.some((function(t){return t.isEqual(e)}))}var du=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n=this;return Object(h.d)(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new A(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o,u,s;return Object(h.d)(this,(function(a){switch(a.label){case 0:return n=E(t),r=qn(n.Kt)+"/documents",i={documents:e.map((function(t){return Mn(n.Kt,t)}))},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return o=a.sent(),u=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){w(!!e.found),e.found.name,e.found.updateTime;var n=Fn(t,e.found.name),r=Rn(e.found.updateTime),i=new Tt({mapValue:{fields:e.found.fields}});return new Nt(n,r,i,{})}(t,e):"missing"in e?function(t,e){w(!!e.missing),w(!!e.readTime);var n=Fn(t,e.missing),r=Rn(e.readTime);return new kt(n,r)}(t,e):_()}(n.Kt,t);u.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=u.get(t.toString());w(!!e),s.push(e)})),s)]}}))}))}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof kt||t instanceof Nt?n.sf(t):_()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.O_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.O_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Qe(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e=this;return Object(h.d)(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=J.ft(n);e.mutations.push(new Ye(r,e.Gt(r)))})),[4,function(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:return n=E(t),r=qn(n.Kt)+"/documents",i={writes:e.map((function(t){return zn(n.Kt,t)}))},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof Nt)e=t.version;else{if(!(t instanceof kt))throw _();e=W.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new A(k.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Pe.updateTime(e):Pe.jt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(W.min()))throw new A(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pe.updateTime(e)}return Pe.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),vu=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new Vo(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu((function(){return Object(h.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(h.d)(this,(function(r){return t=new du(this.Dh),(e=this.uf(t))&&e.then((function(e){n.fs.ys((function(){return t.commit().then((function(){n.Ts.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!ut(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys((function(){return e.af(),Promise.resolve()}))):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Xe(e)}return!1},t}(),gu=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=M.UNAUTHENTICATED,this.clientId=T.t(),this._f=function(){},this.N=new or,this.credentials.S((function(t){d("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()}))}return t.prototype.getConfiguration=function(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.fs.wf)throw new A(k.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new or;return this.fs.Tf((function(){return Object(h.b)(t,void 0,void 0,(function(){var t,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=yr(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function yu(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(h.d)(this,(function(o){switch(o.label){case 0:return t.fs.Af(),d("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Yl,t.ff((function(n){r.isEqual(n)||(r=n,t.fs.bo((function(){return Object(h.b)(i,void 0,void 0,(function(){return Object(h.d)(this,(function(t){switch(t.label){case 0:return[4,Xi(e.Sh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.yo((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function mu(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return t.fs.Af(),[4,bu(t)];case 1:return n=i.sent(),d("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.fs.bo((function(){return function(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return(n=E(t)).fs.Af(),d("RemoteStore","RemoteStore received new credentials"),r=es(n),n.Oh.add(3),[4,Qo(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Oh.delete(3),[4,Go(n)];case 3:return i.sent(),[2]}}))}))}(e.gl,n)}))})),t.If=e,[2]}}))}))}function bu(t){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(d("FirestoreClient","Using default OfflineComponentProvider"),[4,yu(t,new da)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function _u(t){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(d("FirestoreClient","Using default OnlineComponentProvider"),[4,mu(t,new ya)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function wu(t){return bu(t).then((function(t){return t.persistence}))}function Eu(t){return bu(t).then((function(t){return t.Sh}))}function Iu(t){return _u(t).then((function(t){return t.gl}))}function Tu(t){return _u(t).then((function(t){return t.fa}))}function Ou(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,_u(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=Ls.bind(null,e.fa),n.Jh=Fs.bind(null,e.fa),n)]}}))}))}function Su(t,e,n){var r=this;void 0===n&&(n={});var i=new or;return t.fs.ys((function(){return Object(h.b)(r,void 0,void 0,(function(){var r;return Object(h.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ba({next:function(o){e.ys((function(){return ws(t,u)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new A(k.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new A(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),u=new Os(Zt(n.path),o,{includeMetadataChanges:!0,sl:!0});return _s(t,u)},[4,Ou(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}function Cu(t,e,n){var r=this;void 0===n&&(n={});var i=new or;return t.fs.ys((function(){return Object(h.b)(r,void 0,void 0,(function(){var r;return Object(h.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ba({next:function(n){e.ys((function(){return ws(t,u)})),n.fromCache&&"server"===r.source?i.reject(new A(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),u=new Os(n,o,{includeMetadataChanges:!0,sl:!0});return _s(t,u)},[4,Ou(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}var Nu=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new Vo(this,"async_queue_retry"),this.vf=function(){var e=Fo();e&&d("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=Fo();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=Fo();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.bo=function(t){var e=this;this.ys((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e=this;return Object(h.d)(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!lr(t=n.sent()))throw t;return d("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,v("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Ir=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=gr.Is(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&_()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(h.b)(this,void 0,void 0,(function(){var t;return Object(h.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Of=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ws-e.ws}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),ku=-1,Au=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new Nu,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(h.c)(e,t),e.prototype.b_=function(){return this.Lf||Pu(this),this.Lf.terminate()},e}(xa);function ju(t){return t.Lf||Pu(t),t.Lf.df(),t.Lf}function Pu(t){var e=t.p_(),n=function(t,e,n){return new D(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new gu(t.m_,t.Mf,n)}function xu(t,e,n){var r=this,i=new or;return t.fs.enqueue((function(){return Object(h.b)(r,void 0,void 0,(function(){var r;return Object(h.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,yu(t,n)];case 1:return o.sent(),[4,mu(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===k.FAILED_PRECONDITION||t.code===k.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Ru(t){if(t.R_||t.P_)throw new A(k.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Du=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),lt(t)){case 0:return null;case 1:return t.booleanValue;case 2:return it(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(ot(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.jf(t.arrayValue,e);case 10:return this.Wf(t.mapValue,e);default:throw _()}},t.prototype.Wf=function(t,e){var n=this,r={};return $(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new qa(it(t.latitude),it(t.longitude))},t.prototype.jf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=function dt(t){var e=t.mapValue.fields.__previous_value__;return st(e)?dt(e):e}(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(at(t));default:return null}},t.prototype.Bf=function(t){var e=nt(t);return new z(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=Q.ct(t);w(ir(n));var r=new L(n.get(1),n.get(3)),i=new J(n.X(5));return r.isEqual(e)||v("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Lu=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ra(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new Mu(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(Fu("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),Mu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Lu);function Fu(t,e){return"string"==typeof e?lu(t,e):e instanceof q?e._.d_:e.d_}function Uu(t){if(ee(t)&&0===t.Nt.length)throw new A(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vu=function(){};function qu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var Bu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return Object(h.c)(e,t),e.prototype.Yf=function(t){var e=Qa(t.firestore),n=function(t,e,n,r,i,o,u){var s;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new A(k.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Yu(u,o);for(var a=[],c=0,h=u;c<h.length;c++){var l=h[c];a.push(Qu(r,t,l))}s={arrayValue:{values:a}}}else s=Qu(r,t,u)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Yu(u,o),s=iu(n,"where",u,"in"===o||"not-in"===o);var f=Lt.create(i,o,s);return function(t,e){if(e.xt()){var n=re(t);if(null!==n&&!n.isEqual(e.field))throw new A(k.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ne(t);null!==r&&Ju(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new A(k.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new A(k.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new Da(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Xt(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Vu),Hu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return Object(h.c)(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new A(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new A(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Gt(e,n);return function(t,e){if(null===ne(t)){var n=re(t);null!==n&&Ju(t,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new Da(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new Xt(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Vu),Ku=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return Object(h.c)(e,t),e.prototype.Yf=function(t){return new Da(t.firestore,t.v_,ae(t.C_,this.nd,this.sd))},e}(Vu),zu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(h.c)(e,t),e.prototype.Yf=function(t){var e=Gu(t,this.type,this.rd,this.od);return new Da(t.firestore,t.v_,function(t,e){return new Xt(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Vu),Wu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(h.c)(e,t),e.prototype.Yf=function(t){var e=Gu(t,this.type,this.rd,this.od);return new Da(t.firestore,t.v_,function(t,e){return new Xt(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Vu);function Gu(t,e,n,r){if(n[0]instanceof q&&(n[0]=n[0]._),n[0]instanceof Lu)return function(t,e,n,r,i){if(!r)throw new A(k.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],u=0,s=oe(t);u<s.length;u++){var a=s[u];if(a.field.ht())o.push(mt(e,r.key));else{var c=r.field(a.field);if(st(c))throw new A(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.ot();throw new A(k.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new zt(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=Qa(t.firestore);return function(t,e,n,r,i,o){var u=t.Nt;if(i.length>u.length)throw new A(k.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],a=0;a<i.length;a++){var c=i[a];if(u[a].field.ht()){if("string"!=typeof c)throw new A(k.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ie(t)&&-1!==c.indexOf("/"))throw new A(k.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Q.ct(c));if(!J.Et(h))throw new A(k.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new J(h);s.push(mt(e,l))}else{var f=iu(n,r,c);s.push(f)}}return new zt(s,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Qu(t,e,n){if(n instanceof q&&(n=n._),"string"==typeof n){if(""===n)throw new A(k.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ie(e)&&-1!==n.indexOf("/"))throw new A(k.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Q.ct(n));if(!J.Et(r))throw new A(k.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return mt(t,new J(r))}if(n instanceof Ra)return mt(t,n.S_);throw new A(k.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Na(n)+".")}function Yu(t,e){if(!Array.isArray(t)||0===t.length)throw new A(k.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new A(k.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Ju(t,e,n){if(!n.isEqual(e))throw new A(k.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Xu(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function $u(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Zu=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(h.c)(e,t),e.prototype.Uf=function(t){return new j(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Ra(this.firestore,null,e)},e}(Du),tc=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ec=function(t){function e(e,n,r,i,o,u){var s=this;return(s=t.call(this,e,n,r,i,u)||this).zf=e,s.ad=e,s.metadata=o,s}return Object(h.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new nc(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(Fu("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(Lu),nc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(ec),rc=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new tc(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new nc(n.zf,n.Hf,r.key,r,new tc(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new A(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map((function(e){var r=new nc(t.zf,t.Hf,e.doc.key,e.doc,new tc(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.ud.De;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new nc(t.zf,t.Hf,e.doc.key,e.doc,new tc(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:ic(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function ic(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _()}}function oc(t,e){return t instanceof ec&&e instanceof ec?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof rc&&e instanceof rc&&t.zf===e.zf&&Va(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var sc=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(h.c)(e,t),e.prototype.Uf=function(t){return new j(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Ra(this.firestore,null,e)},e}(Du);function ac(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=ka(t,Ra);var o=ka(t.firestore,Au),u=Qa(o);return e instanceof q&&(e=e._),cc(o,[("string"==typeof e||e instanceof wa?ru(u,"updateDoc",t.S_,e,n,r):nu(u,"updateDoc",t.S_,e)).O_(t.S_,Pe.exists(!0))])}function uc(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof q&&(t=t._);var u={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Xu(i[s])||(u=i[s],s++);var a,c,l,f={includeMetadataChanges:u.includeMetadataChanges};if(Xu(i[s])){var d=i[s];i[s]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[s+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[s+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Ra)c=ka(t.firestore,Au),l=Zt(t.S_.path),a={next:function(e){i[s]&&i[s](hc(c,t,e))},error:i[s+1],complete:i[s+2]};else{var p=ka(t,Da);c=ka(p.firestore,Au),l=p.C_;var v=new sc(c);a={next:function(t){i[s]&&i[s](new rc(c,v,p,t))},error:i[s+1],complete:i[s+2]},Uu(t.C_)}return function(t,e,n,r){var i=this,o=new ba(r),u=new Os(e,o,n);return t.fs.ys((function(){return Object(h.b)(i,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return e=_s,[4,Ou(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))})),function(){o.r_(),t.fs.ys((function(){return Object(h.b)(i,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return e=ws,[4,Ou(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))}))}}(ju(c),l,f,a)}function cc(t,e){return function(t,e){var n=this,r=new or;return t.fs.ys((function(){return Object(h.b)(n,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(i){switch(i.label){case 0:return n=Us,[4,Tu(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(ju(t),e)}function hc(t,e,n){var r=n.docs.get(e.S_),i=new sc(t);return new ec(t,i,e.S_,r,new tc(n.hasPendingWrites,n.fromCache),e.v_)}var lc=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=Qa(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=fc(t,this.zf),i=$u(r.v_,e,n),o=Ya(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.O_(r.S_,Pe.jt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,u=fc(t,this.zf);return e instanceof q&&(e=e._),o="string"==typeof e||e instanceof wa?ru(this.wd,"WriteBatch.update",u.S_,e,n,r):nu(this.wd,"WriteBatch.update",u.S_,e),this.fd.push(o.O_(u.S_,Pe.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=fc(t,this.zf);return this.fd=this.fd.concat(new Qe(e.S_,Pe.jt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new A(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function fc(t,e){if(t instanceof q&&(t=t._),t.firestore!==e)throw new A(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var pc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return Object(h.c)(e,t),e.prototype.get=function(e){var n=this,r=fc(e,this.zf),i=new sc(this.zf);return t.prototype.get.call(this,e).then((function(t){return new ec(n.zf,i,r.S_,t.Jf,new tc(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=Qa(t)}return t.prototype.get=function(t){var e=this,n=fc(t,this.zf),r=new Zu(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return _();var i=t[0];if(i instanceof kt)return new Lu(e.zf,r,n.S_,null,n.v_);if(i instanceof Nt)return new Lu(e.zf,r,i.key,i,n.v_);throw _()}))},t.prototype.set=function(t,e,n){var r=fc(t,this.zf),i=$u(r.v_,e,n),o=Ya(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,u=fc(t,this.zf);return e instanceof q&&(e=e._),o="string"==typeof e||e instanceof wa?ru(this.wd,"Transaction.update",u.S_,e,n,r):nu(this.wd,"Transaction.update",u.S_,e),this.Td.update(u.S_,o),this},t.prototype.delete=function(t){var e=fc(t,this.zf);return this.Td.delete(e.S_),this},t}()),dc=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Ru(t=ka(t,Au));var n=ju(t),r=t.p_(),i=new ya;return xu(n,i,new va(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Ru(t=ka(t,Au));var e=ju(t),n=t.p_(),r=new ya;return xu(e,r,new ga(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new A(k.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new or;return t.Mf.Tf((function(){return Object(h.b)(e,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return ur.jn()?(e=t+"main",[4,ur.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Ki(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),vc=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof L||(i.md=e),i}return Object(h.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=ka(t,xa)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&y("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return Object(h.b)(e,void 0,void 0,(function(){var e,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,wu(t)];case 1:return e=r.sent(),[4,Iu(t)];case 2:return n=r.sent(),[2,(e.Vo(!0),function(t){var e=E(t);return e.Oh.delete(0),Go(e)}(n))]}}))}))}))}(ju(ka(this._,Au)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return Object(h.b)(e,void 0,void 0,(function(){var e,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,wu(t)];case 1:return e=r.sent(),[4,Iu(t)];case 2:return n=r.sent(),[2,(e.Vo(!1),function(t){return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return(e=E(t)).Oh.add(0),[4,Qo(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(ju(ka(this._,Au)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Oa("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new or;return t.fs.ys((function(){return Object(h.b)(e,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(r){switch(r.label){case 0:return e=zs,[4,Tu(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(ju(ka(this._,Au)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new ba(e);return t.fs.ys((function(){return Object(h.b)(n,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){E(t).Wh.add(e),e.next()},[4,Ou(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.r_(),t.fs.ys((function(){return Object(h.b)(n,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){E(t).Wh.delete(e)},[4,Ou(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(ju(t=ka(t,Au)),Xu(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new A(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new kc(this,Ma(this._,t))}catch(t){throw wc(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new _c(this,Fa(this._,t))}catch(t){throw wc(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Sc(this,function(t,e){if(t=ka(t,xa),Ia("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new A(k.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Da(t,null,function(t){return new Xt(Q.at(),t)}(e))}(this._,t))}catch(t){throw wc(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new or;return t.fs.ys((function(){return Object(h.b)(n,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return _u(t).then((function(t){return t.Dh}))}(t)];case 1:return n=i.sent(),new vu(t.fs,n,e,r).run(),[2]}}))}))})),r.promise}(ju(t),(function(n){return e(new pc(t,n))}))}(this._,(function(n){return t(new mc(e,n))}))},e.prototype.batch=function(){var t=this;return ju(this._),new bc(new lc(this._,(function(e){return cc(t._,e)})))},e.prototype.loadBundle=function(t){throw new A(k.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new A(k.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(q),gc=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(h.c)(e,t),e.prototype.Uf=function(t){return new R(new j(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return _c.Ad(e,this.firestore,null)},e}(Du);function yc(t){var e;e=t,l.setLogLevel(e)}var mc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r.Hf=new gc(e),r}return Object(h.c)(e,t),e.prototype.get=function(t){var e=this,n=Ac(t);return this._.get(n).then((function(t){return new Tc(e.zf,new ec(e.zf._,e.Hf,t.S_,t.Jf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=Ac(t);return n?(Ta("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var u=Ac(t);return 2===arguments.length?this._.update(u,e):(r=this._).update.apply(r,Object(h.g)([u,e,n],i)),this},e.prototype.delete=function(t){var e=Ac(t);return this._.delete(e),this},e}(q),bc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.c)(e,t),e.prototype.set=function(t,e,n){var r=Ac(t);return n?(Ta("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var u=Ac(t);return 2===arguments.length?this._.update(u,e):(r=this._).update.apply(r,Object(h.g)([u,e,n],i)),this},e.prototype.delete=function(t){var e=Ac(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(q),_c=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new gc(e),r}return Object(h.c)(e,t),e.Rd=function(t,n,r){if(t.length%2!=0)throw new A(k.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new e(n,new Ra(n._,r,new J(t)))},e.Ad=function(t,n,r){return new e(n,new Ra(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new kc(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new kc(this.firestore,Ma(this._,t))}catch(t){throw wc(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof q&&(t=t._),t instanceof Ra&&Ua(this._,t)},e.prototype.set=function(t,e){e=Ta("DocumentReference.set",e);try{return function(t,e,n){t=ka(t,Ra);var r=ka(t.firestore,Au),i=$u(t.v_,e,n);return cc(r,[Ya(Qa(r),"setDoc",t.S_,i,null!==t.v_,n).O_(t.S_,Pe.jt())])}(this._,t,e)}catch(t){throw wc(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?ac(this._,t):ac.apply(void 0,Object(h.g)([this._,t,e],n))}catch(t){throw wc(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return cc(ka((t=this._).firestore,Au),[new Qe(t.S_,Pe.jt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ec(e),i=Ic(e,(function(e){return new Tc(t.firestore,new ec(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return uc(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ka(t,Ra);var e=ka(t.firestore,Au),n=ju(e),r=new sc(e);return function(t,e){var n=this,r=new or;return t.fs.ys((function(){return Object(h.b)(n,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=E(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ic.Jo(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof Nt?n.resolve(i):i instanceof kt?n.resolve(null):n.reject(new A(k.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=yr(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Eu(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new ec(e,r,t.S_,n,new tc(n instanceof Nt&&n.bt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=ka(t,Ra);var e=ka(t.firestore,Au);return Su(ju(e),t.S_,{source:"server"}).then((function(n){return hc(e,t,n)}))}(this._):function(t){t=ka(t,Ra);var e=ka(t.firestore,Au);return Su(ju(e),t.S_).then((function(n){return hc(e,t,n)}))}(this._)).then((function(t){return new Tc(e.firestore,new ec(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(q);function wc(t,e,n){return t.message=t.message.replace(e,n),t}function Ec(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Xu(r))return r}return{}}function Ic(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Xu(t[0])?t[0]:Xu(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Tc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(h.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new _c(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return oc(this._,t._)},e}(q),Oc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.c)(e,t),e.prototype.data=function(t){return this._.data(t)},e}(Tc),Sc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new gc(e),r}return Object(h.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,qu(this._,function(t,e,n){var r=e,i=Fu("where",t);return new Bu(i,r,n)}(t,n,r)))}catch(t){throw wc(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,qu(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=Fu("orderBy",t);return new Hu(r,n)}(t,n)))}catch(t){throw wc(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,qu(this._,function(t){return Aa("limit",t),new Ku("limit",t,"F")}(t)))}catch(t){throw wc(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,qu(this._,function(t){return Aa("limitToLast",t),new Ku("limitToLast",t,"L")}(t)))}catch(t){throw wc(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qu(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zu("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw wc(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qu(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zu("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw wc(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qu(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wu("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw wc(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qu(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wu("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw wc(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Va(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ka(t,Da);var e=ka(t.firestore,Au),n=ju(e),r=new sc(e);return function(t,e){var n=this,r=new or;return t.fs.ys((function(){return Object(h.b)(n,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i,o,u,s;return Object(h.d)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,oo(t,e,!0)];case 1:return s=a.sent(),r=new Ps(e,s.Pc),i=r.dl(s.documents),o=r.Ei(i,!1),n.resolve(o.snapshot),[3,3];case 2:return u=a.sent(),s=yr(u,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,Eu(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new rc(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=ka(t,Da);var e=ka(t.firestore,Au),n=ju(e),r=new sc(e);return Cu(n,t.C_,{source:"server"}).then((function(n){return new rc(e,r,t,n)}))}(this._):function(t){t=ka(t,Da);var e=ka(t.firestore,Au),n=ju(e),r=new sc(e);return Uu(t.C_),Cu(n,t.C_).then((function(n){return new rc(e,r,t,n)}))}(this._)).then((function(t){return new Nc(e.firestore,new rc(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ec(e),i=Ic(e,(function(e){return new Nc(t.firestore,new rc(t.firestore._,t.Hf,t._,e.ud))}));return uc(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(q),Cc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(h.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Oc(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(q),Nc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(h.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Sc(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new Oc(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new Cc(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new Oc(n.zf,r))}))},e.prototype.isEqual=function(t){return oc(this._,t._)},e}(q),kc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return Object(h.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new _c(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new _c(this.firestore,void 0===t?Fa(this._):Fa(this._,t))}catch(t){throw wc(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=ka(t.firestore,Au),r=Fa(t),i=$u(t.v_,e);return cc(n,[Ya(Qa(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).O_(r.S_,Pe.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new _c(e.firestore,t)}))},e.prototype.isEqual=function(t){return Ua(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(Sc);function Ac(t){return t instanceof q&&(t=t._),ka(t,Ra)}var jc=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(wa.bind.apply(wa,Object(h.g)([void 0],e))))||this}return Object(h.c)(e,t),e.documentId=function(){return new e(rt.lt().ot())},e.prototype.isEqual=function(t){return t instanceof q&&(t=t._),t instanceof wa&&this._.d_.isEqual(t.d_)},e}(q),Pc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.c)(e,t),e.serverTimestamp=function(){var t=new $a("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Ja("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Za("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new tu("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new eu("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(q),xc=function(){function t(){this.Pd={},this.yd=new or,this.gd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this.Pd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.yd.promise.catch(t)},t.prototype.then=function(t,e){return this.yd.promise.then(t,e)},t.prototype.Ul=function(t){this.Ql(t),this.Pd.complete&&this.Pd.complete(),this.yd.resolve(t)},t.prototype.jl=function(t){this.gd.taskState="Error",this.Pd.next&&this.Pd.next(this.gd),this.Pd.error&&this.Pd.error(t),this.yd.reject(t)},t.prototype.Ql=function(t){this.gd=t,this.Pd.next&&this.Pd.next(t)},t}();function Rc(t,e){var n=new xc;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new _a(t,e)}(function(t,e){if(t instanceof Uint8Array)return ma(t,e);if(t instanceof ArrayBuffer)return ma(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,Uo(e));t.fs.ys((function(){return Object(h.b)(i,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return e=pa,[4,Tu(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(ju(t._),t.I_,e,n),n}function Dc(t,e){return function(t,e){var n=this;return t.fs.enqueue((function(){return Object(h.b)(n,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=E(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Eo.$s(t,e)}))},[4,Eu(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(ju(t._),e).then((function(e){return e?new Sc(t,new Da(t._,null,e.query)):null}))}}).call(this,n(109))}}]);